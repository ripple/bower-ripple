var ripple=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){function n(t){var r=e[t];Object.keys(r.prototype).forEach(function(t){var e=/([A-Z]{1})[a-z]+/g;if(e.test(t)){var n=t.replace(e,function(t){return"_"+t.toLowerCase()});r.prototype[n]=r.prototype[t]}})}e.Remote=r(1).Remote,e.Request=r(2).Request,e.Amount=r(3).Amount,e.Account=r(4).Account,e.Transaction=r(5).Transaction,e.Currency=r(6).Currency,e.Base=r(7).Base,e.UInt128=r(8).UInt128,e.UInt160=r(9).UInt160,e.UInt256=r(10).UInt256,e.Seed=r(11).Seed,e.Meta=r(12).Meta,e.SerializedObject=r(13).SerializedObject,e.RippleError=r(14).RippleError,e.Message=r(15).Message,e.binformat=r(16),e.utils=r(17),e.Server=r(18).Server,e.Wallet=r(19),e.Ledger=r(20).Ledger,e.TransactionQueue=r(21).TransactionQueue,e.RangeSet=r(22).RangeSet,e.sjcl=r(17).sjcl,e.types=r(23),e.config=r(24),["Remote","Request","Transaction","Account","Server"].forEach(n)},function(t,e,r){function n(t){function e(t,e){if(u.contains(n.TRANSACTION_EVENTS,e))switch(t){case"add":1===++r._transaction_listeners&&r.requestSubscribe("transactions").request();break;case"remove":0===--r._transaction_listeners&&r.requestUnsubscribe("transactions").request()}}i.call(this);var r=this,t=t||{};if(Object.keys(n.DEFAULTS).forEach(function(e){this[e]=t.hasOwnProperty(e)?t[e]:n.DEFAULTS[e]},this),this.state="offline",this._server_fatal=!1,this._stand_alone=void 0,this._testnet=void 0,this._ledger_current_index=void 0,this._ledger_hash=void 0,this._ledger_time=void 0,this._connection_count=0,this._connected=!1,this._should_connect=!0,this._transaction_listeners=0,this._received_tx=new a({max:100}),this._cur_path_find=null,this.local_signing&&(this.local_sequence=!0,this.local_fee=!0),this._servers=[],this._primary_server=void 0,this.accounts={},this._accounts={},this._books={},this.secrets={},this.ledgers={current:{account_root:{}}},"boolean"!=typeof this.trusted)throw new TypeError("trusted must be a boolean");if("boolean"!=typeof this.trace)throw new TypeError("trace must be a boolean");if("boolean"!=typeof this.allow_partial_history)throw new TypeError("allow_partial_history must be a boolean");if("number"!=typeof this.max_fee)throw new TypeError("max_fee must be a number");if("number"!=typeof this.max_attempts)throw new TypeError("max_attempts must be a number");if("number"!=typeof this.fee_cushion)throw new TypeError("fee_cushion must be a number");if("boolean"!=typeof this.local_signing)throw new TypeError("local_signing must be a boolean");if("boolean"!=typeof this.local_fee)throw new TypeError("local_fee must be a boolean");if("boolean"!=typeof this.local_sequence)throw new TypeError("local_sequence must be a boolean");if("boolean"!=typeof this.canonical_signing)throw new TypeError("canonical_signing must be a boolean");if("number"!=typeof this.submission_timeout)throw new TypeError("submission_timeout must be a number");if("number"!=typeof this.last_ledger_offset)throw new TypeError("last_ledger_offset must be a number");if(!Array.isArray(this.servers))throw new TypeError("servers must be an array");this.setMaxListeners(this.max_listeners),this.servers.forEach(function(t){var e=r.addServer(t);e.setMaxListeners(r.max_listeners)}),this.on("newListener",function(t){e("add",t)}),this.on("removeListener",function(t){e("remove",t)})}var i=r(39).EventEmitter,o=r(43),s=r(40),a=r(48),c=r(49),u=r(45),h=r(18).Server,f=r(2).Request,h=r(18).Server,l=r(3).Amount,p=r(6).Currency,d=r(9).UInt160,_=r(10).UInt256,v=r(5).Transaction,y=r(4).Account,g=r(12).Meta,m=r(25).OrderBook,b=r(26).PathFind,w=r(13).SerializedObject,E=r(14).RippleError,x=r(17),S=r(17).sjcl,A=r(27),k=r(24),T=r(28).internal.sub("remote");o.inherits(n,i),n.DEFAULTS={trusted:!1,trace:!1,allow_partial_history:!0,local_sequence:!0,local_fee:!0,local_signing:!0,canonical_signing:!0,fee_cushion:1.2,max_fee:1e6,max_attempts:10,submission_timeout:2e4,last_ledger_offset:3,servers:[],max_listeners:0},n.TRANSACTION_EVENTS=["transaction","transaction_all"],n.flags={account_root:{PasswordSpent:65536,RequireDestTag:131072,RequireAuth:262144,DisallowXRP:524288,DisableMaster:1048576},offer:{Passive:65536,Sell:131072},state:{LowReserve:65536,HighReserve:131072,LowAuth:262144,HighAuth:524288,LowNoRipple:1048576,HighNoRipple:2097152}},n.from_config=function(t,e){function r(t){var e=k.accounts[t];"object"==typeof e&&e.secret&&(o.setSecret(t,e.secret),o.setSecret(e.account,e.secret))}var i="string"==typeof t?k.servers[t]:t,o=new n(i,e);return k.accounts&&Object.keys(k.accounts).forEach(r),o},n.isValidMessage=function(t){return"object"==typeof t&&"string"==typeof t.type},n.isValidLedgerData=function(t){return"object"==typeof t&&"number"==typeof t.fee_base&&"number"==typeof t.fee_ref&&"string"==typeof t.ledger_hash&&"number"==typeof t.ledger_index&&"number"==typeof t.ledger_time&&"number"==typeof t.reserve_base&&"number"==typeof t.reserve_inc},n.isValidLoadStatus=function(t){return"number"==typeof t.load_base&&"number"==typeof t.load_factor},n.isValidated=function(t){return t&&"object"==typeof t&&t.validated===!0},n.prototype._setState=function(t){if(this.state!==t)switch(this.trace&&T.info("set_state:",t),this.state=t,this.emit("state",t),t){case"online":this._online_state="open",this._connected=!0,this.emit("connect"),this.emit("connected");break;case"offline":this._online_state="closed",this._connected=!1,this.emit("disconnect"),this.emit("disconnected")}},n.prototype.setServerFatal=function(){this._server_fatal=!0},n.prototype.setTrace=function(t){return this.trace=void 0===t||t,this},n.prototype._trace=function(){this.trace&&T.info.apply(T,arguments)},n.prototype.setSecret=function(t,e){this.secrets[t]=e},n.prototype.addServer=function(t){function e(t){i._handleMessage(t,o)}function r(){i._connection_count+=1,t.primary&&i._setPrimaryServer(o),1===i._connection_count&&i._setState("online"),i._connection_count===i._servers.length&&i.emit("ready")}function n(){i._connection_count--,0===i._connection_count&&i._setState("offline")}var i=this,o=new h(this,t);return o.on("message",e),o.on("connect",r),o.on("disconnect",n),this._servers.push(o),o},n.prototype.reconnect=function(){return this._should_connect?(T.info("reconnecting"),this._servers.forEach(function(t){t.reconnect()}),this):void 0},n.prototype.connect=function(t){if(!this._servers.length)throw new Error("No servers available.");return"function"==typeof t&&this.once("connect",t),this._should_connect=!0,this._servers.forEach(function(t){t.connect()}),this},n.prototype.disconnect=function(t){if(!this._servers.length)throw new Error("No servers available, not disconnecting");var t="function"==typeof t?t:function(){};return this._should_connect=!1,this.isConnected()?(this.once("disconnect",t),this._servers.forEach(function(t){t.disconnect()}),this._set_state("offline"),this):(t(),this)},n.prototype._handleMessage=function(t,e){try{t=JSON.parse(t)}catch(r){}if(!n.isValidMessage(t))return void this.emit("error",new E("remoteUnexpected","Unexpected response from remote"));switch(t.type){case"ledgerClosed":this._handleLedgerClosed(t,e);break;case"serverStatus":this._handleServerStatus(t,e);break;case"transaction":this._handleTransaction(t,e);break;case"path_find":this._handlePathFind(t,e);break;default:this.trace&&T.info(t.type+": ",t)}},n.prototype._handleLedgerClosed=function(t,e){var r=this;if(n.isValidLedgerData(t)){var i=t.ledger_index>=this._ledger_current_index;(isNaN(this._ledger_current_index)||i)&&(this._ledger_time=t.ledger_time,this._ledger_hash=t.ledger_hash,this._ledger_current_index=t.ledger_index+1,this.isConnected()?this.emit("ledger_closed",t,e):this.once("connect",function(){r.emit("ledger_closed",t,e)}))}},n.prototype._handleServerStatus=function(t,e){this.emit("server_status",t,e)},n.prototype._handleTransaction=function(t,e){var r=t.transaction.hash;if(!this._received_tx.get(r)){t.validated&&this._received_tx.set(r,!0),this.trace&&T.info("tx:",t);var n=t.meta||t.metadata;n?(t.mmeta=new g(n),t.mmeta.getAffectedAccounts().forEach(function(e){this._accounts[e]&&this._accounts[e].notify(t)},this),t.mmeta.getAffectedBooks().forEach(function(e){this._books[e]&&this._books[e].notify(t)},this)):["Account","Destination"].forEach(function(e){this._accounts[t.transaction[e]]&&this._accounts[t.transaction[e]].notify(t)},this),this.emit("transaction",t,e),this.emit("transaction_all",t,e)}},n.prototype._handlePathFind=function(t,e){this._cur_path_find&&this._cur_path_find.notify_update(t),this.emit("path_find_all",t,e)},n.prototype.getLedgerHash=function(){return this._ledger_hash},n.prototype._setPrimaryServer=n.prototype.setPrimaryServer=function(t){this._primary_server&&(this._primary_server._primary=!1),this._primary_server=t,this._primary_server._primary=!0},n.prototype.isConnected=function(){return this._connected},n.prototype.getConnectedServers=function(){for(var t=[],e=0;e<this._servers.length;e++)this._servers[e].isConnected()&&t.push(this._servers[e]);return t},n.prototype._getServer=n.prototype.getServer=function(){if(this._primary_server&&this._primary_server.isConnected())return this._primary_server;if(!this._servers.length)return null;var t=this.getConnectedServers();if(0===t.length||!t[0])return null;for(var e=t[0],r=e._score+e._fee,n=1;n<t.length;n++){var i=t[n],o=i._score+i._fee;r>o&&(e=i,r=o)}return e},n.prototype.request=function(t){if("string"==typeof t){if(/^request_/.test(t)||(t="request_"+t),"function"==typeof this[t]){var e=Array.prototype.slice.call(arguments,1);return this[t].apply(this,e)}throw new Error("Command does not exist: "+t)}if(!(t instanceof f))throw new Error("Argument is not a Request");if(!this._servers.length)return t.emit("error",new Error("No servers available"));if(!this.isConnected())return this.once("connect",this.request.bind(this,t));if(null===t.server)return t.emit("error",new Error("Server does not exist"));var r=t.server||this.getServer();r?r._request(t):t.emit("error",new Error("No servers available"))},n.prototype.ping=n.prototype.requestPing=function(t,e){var r=new f(this,"ping");switch(typeof t){case"function":e=t;break;case"string":r.setServer(t)}var n=Date.now();return r.once("success",function(){r.emit("pong",Date.now()-n)}),r.callback(e,"pong"),r},n.prototype.requestServerInfo=function(t){return new f(this,"server_info").callback(t)},n.prototype.requestLedger=function(t,e){var r=new f(this,"ledger");switch(typeof t){case"undefined":break;case"function":e=t;break;case"object":if(!t)break;Object.keys(t).forEach(function(e){switch(e){case"full":case"expand":case"transactions":case"accounts":r.message[e]=!0;break;case"ledger":r.selectLedger(t.ledger);break;case"ledger_index":case"ledger_hash":r.message[e]=t[e];break;case"closed":case"current":case"validated":r.message.ledger_index=e}},t);break;default:r.selectLedger(t)}return r.callback(e),r},n.prototype.requestLedgerClosed=n.prototype.requestLedgerHash=function(t){return new f(this,"ledger_closed").callback(t)},n.prototype.requestLedgerHeader=function(t){return new f(this,"ledger_header").callback(t)},n.prototype.requestLedgerCurrent=function(t){return new f(this,"ledger_current").callback(t)},n.prototype.requestLedgerData=function(t,e){var r=new f(this,"ledger_data");return r.message.binary=t.binary!==!1,r.selectLedger(t.ledger),r.message.limit=t.limit,r.once("success",function(e){function i(t,e){c.setImmediate(function(){e(null,n.parseBinaryLedgerData(t))})}function o(t,n){t?r.emit("error",t):(e.state=n,r.emit("state",e))}return t.binary===!1?void r.emit("state",e):void c.mapSeries(e.state,i,o)}),r.callback(e,"state"),r},n.prototype.requestLedgerEntry=function(t,e){var r=this,n=new f(this,"ledger_entry");return"function"==typeof t&&(e=t),"account_root"===t&&(n.request_default=n.request,n.request=function(){var e=!0;if(!r._ledger_hash&&"account_root"===t){var i=r.ledgers.current.account_root;i||(i=r.ledgers.current.account_root={});var o=r.ledgers.current.account_root[n.message.account_root];if(o)n.emit("success",{node:o}),e=!1;else switch(t){case"account_root":n.once("success",function(t){r.ledgers.current.account_root[t.node.Account]=t.node})}}e&&n.request_default()}),n.callback(e),n},n.prototype.requestSubscribe=function(t,e){var r=new f(this,"subscribe");return t&&(r.message.streams=Array.isArray(t)?t:[t]),r.callback(e),r},n.prototype.requestUnsubscribe=function(t,e){var r=new f(this,"unsubscribe");return t&&(r.message.streams=Array.isArray(t)?t:[t]),r.callback(e),r},n.prototype.requestTransactionEntry=function(t,e,r){var n=new f(this,"transaction_entry");switch("object"==typeof t?(e=t.ledger||t.ledger_hash||t.ledger_index,t=t.hash||t.tx||t.transaction):console.error("DEPRECATED: First argument to request constructor should be an object containing request properties"),n.txHash(t),typeof e){case"string":case"number":n.selectLedger(e);break;case"undefined":case"function":n.ledgerIndex("validated"),r=e;break;default:throw new Error("Invalid ledger_hash type")}return n.callback(r),n},n.prototype.requestTransaction=n.prototype.requestTx=function(t,e){var r;"string"==typeof t?(r={hash:t},console.error("DEPRECATED: First argument to request constructor should be an object containing request properties")):r=t;var i=new f(this,"tx");return i.message.binary=r.binary!==!1,i.message.transaction=r.hash,i.once("success",function(t){return r.binary===!1?void i.emit("transaction",t):void i.emit("transaction",n.parseBinaryTransaction(t))}),i.callback(e,"transaction"),i},n.accountRequest=function(t,e,r){var n,i,o,s,a;if("object"==typeof e?(n=e.account,i=e.ledger,o=e.peer,s=e.limit,a=e.marker):console.error("DEPRECATED: First argument to request constructor should be an object containing request properties"),a&&!(Number(i)>0||_.is_valid(i)))throw new Error("A ledger_index or ledger_hash must be provided when using a marker");var c=arguments[arguments.length-1];"function"==typeof c&&(r=c);var u=new f(this,t);return n&&(n=d.json_rewrite(n),u.message.account=n),u.selectLedger(i),d.is_valid(o)&&(u.message.peer=d.json_rewrite(o)),isNaN(s)||(s=Number(s),s>1e9&&(s=1e9),0>s&&(s=0),u.message.limit=s),a&&(u.message.marker=a),u.callback(r),u},n.prototype.requestAccountInfo=function(){var t=Array.prototype.concat.apply(["account_info"],arguments);return n.accountRequest.apply(this,t)},n.prototype.requestAccountCurrencies=function(){var t=Array.prototype.concat.apply(["account_currencies"],arguments);return n.accountRequest.apply(this,t)},n.prototype.requestAccountLines=function(){var t=Array.prototype.concat.apply(["account_lines"],arguments);return n.accountRequest.apply(this,t)},n.prototype.requestAccountOffers=function(){var t=Array.prototype.concat.apply(["account_offers"],arguments);return n.accountRequest.apply(this,t)},n.prototype.requestAccountTransactions=n.prototype.requestAccountTx=function(t,e){var r=new f(this,"account_tx");return t.binary=t.binary!==!1,void 0!==t.min_ledger&&(t.ledger_index_min=t.min_ledger),void 0!==t.max_ledger&&(t.ledger_index_max=t.max_ledger),t.binary&&void 0===t.parseBinary&&(t.parseBinary=!0),Object.keys(t).forEach(function(t){switch(t){case"account":case"ledger_index_min":case"ledger_index_max":case"binary":case"count":case"descending":case"offset":case"limit":case"forward":case"marker":r.message[t]=this[t]}},t),r.once("success",function(e){function i(t,e){c.setImmediate(function(){e(null,n.parseBinaryAccountTransaction(t))})}function o(t,n){t?r.emit("error",t):(e.transactions=n,r.emit("transactions",e))}return t.parseBinary?void c.mapSeries(e.transactions,i,o):void r.emit("transactions",e)}),r.callback(e,"transactions"),r},n.parseBinaryAccountTransaction=function(t){var e=new w(t.tx_blob),r=e.to_json(),n=new w(t.meta).to_json(),i={validated:t.validated};if(i.meta=n,i.tx=r,i.tx.hash=e.hash(A.HASH_TX_ID).to_hex(),i.tx.ledger_index=t.ledger_index,i.tx.inLedger=t.ledger_index,"object"==typeof n.DeliveredAmount)i.meta.delivered_amount=n.DeliveredAmount;else switch(typeof r.Amount){case"string":case"object":i.meta.delivered_amount=r.Amount}return i},n.parseBinaryTransaction=function(t){var e=new w(t.tx).to_json(),r=new w(t.meta).to_json(),n=e;if(n.date=t.date,n.hash=t.hash,n.inLedger=t.inLedger,n.ledger_index=t.ledger_index,n.meta=r,n.validated=t.validated,"string"==typeof r.DeliveredAmount||"object"==typeof r.DeliveredAmount)n.meta.delivered_amount=r.DeliveredAmount;else switch(typeof e.Amount){case"string":case"object":n.meta.delivered_amount=e.Amount}return n},n.parseBinaryLedgerData=function(t){var e=new w(t.data),r=e.to_json();return r.index=t.index,r},n.prototype.requestTransactionHistory=n.prototype.requestTxHistory=function(t,e){var r=new f(this,"tx_history");return"object"==typeof t?t=t.start:console.error("DEPRECATED: First argument to request constructor should be an object containing request properties"),r.message.start=t,r.callback(e),r},n.prototype.requestBookOffers=function(t,e,r,n){var i,o,s=arguments[arguments.length-1];if(t.hasOwnProperty("gets")||t.hasOwnProperty("taker_gets")){var a=t;n=e,r=a.taker,e=a.pays||a.taker_pays,t=a.gets||a.taker_gets,i=a.ledger,o=a.limit}else console.error("DEPRECATED: First argument to request constructor should be an object containing request properties");"function"==typeof s&&(n=s);var c=new f(this,"book_offers");return c.message.taker_gets={currency:p.json_rewrite(t.currency,{force_hex:!0})},p.from_json(c.message.taker_gets.currency).is_native()||(c.message.taker_gets.issuer=d.json_rewrite(t.issuer)),c.message.taker_pays={currency:p.json_rewrite(e.currency,{force_hex:!0})},p.from_json(c.message.taker_pays.currency).is_native()||(c.message.taker_pays.issuer=d.json_rewrite(e.issuer)),c.message.taker=r?r:d.ACCOUNT_ONE,c.selectLedger(i),isNaN(o)||(o=Number(o),o>1e9&&(o=1e9),0>o&&(o=0),c.message.limit=o),c.callback(n),c},n.prototype.requestWalletAccounts=function(t,e){x.assert(this.trusted);var r=new f(this,"wallet_accounts");return"object"==typeof t?t=t.seed:console.error("DEPRECATED: First argument to request constructor should be an object containing request properties"),r.message.seed=t,r.callback(e),r},n.prototype.requestSign=function(t,e,r){x.assert(this.trusted);var n=new f(this,"sign");return"object"==typeof t?(e=t.tx_json,t=t.secret):console.error("DEPRECATED: First argument to request constructor should be an object containing request properties"),n.message.secret=t,n.message.tx_json=e,n.callback(r),n},n.prototype.requestSubmit=function(t){return new f(this,"submit").callback(t)},n.prototype._serverPrepareSubscribe=function(t,e){function r(e){if(n._stand_alone=!!e.stand_alone,n._testnet=!!e.testnet,"string"==typeof e.random){for(var r=e.random.match(/[0-9A-F]{8}/gi);r&&r.length;)S.random.addEntropy(parseInt(r.pop(),16));n.emit("random",x.hexToArray(e.random))}n._handleLedgerClosed(e,t),n.emit("subscribed")}var n=this,i=["ledger","server"];"function"==typeof t&&(e=t),this._transaction_listeners&&i.push("transactions");var o=this.requestSubscribe(i);return o.on("error",function(t){n.trace&&T.info("Initial server subscribe failed",t)}),o.once("success",r),n.emit("prepare_subscribe",o),o.callback(e,"subscribed"),o},n.prototype.ledgerAccept=n.prototype.requestLedgerAccept=function(t){if(!this._stand_alone)return void this.emit("error",new E("notStandAlone"));var e=new f(this,"ledger_accept");return this.once("ledger_closed",function(t){e.emit("ledger_closed",t)}),e.callback(t,"ledger_closed"),e.request(),e},n.accountRootRequest=function(t,e,r,n,i){"object"==typeof r?(i=n,n=r.ledger,r=r.account):console.error("DEPRECATED: First argument to request constructor should be an object containing request properties");var o=arguments[arguments.length-1];"function"==typeof o&&(i=o);var s=this.requestLedgerEntry("account_root");return s.accountRoot(r),s.selectLedger(n),s.once("success",function(r){s.emit(t,e(r))}),s.callback(i,t),s},n.prototype.requestAccountBalance=function(){function t(t){return l.from_json(t.node.Balance)}var e=Array.prototype.concat.apply(["account_balance",t],arguments),r=n.accountRootRequest.apply(this,e);return r},n.prototype.requestAccountFlags=function(){function t(t){return t.node.Flags}var e=Array.prototype.concat.apply(["account_flags",t],arguments),r=n.accountRootRequest.apply(this,e);return r},n.prototype.requestOwnerCount=function(){function t(t){return t.node.OwnerCount}var e=Array.prototype.concat.apply(["owner_count",t],arguments),r=n.accountRootRequest.apply(this,e);return r},n.prototype.getAccount=function(t){return this._accounts[d.json_rewrite(t)]},n.prototype.addAccount=function(t){var e=new y(this,t);return e.isValid()&&(this._accounts[t]=e),e},n.prototype.account=n.prototype.findAccount=function(t){var e=this.getAccount(t);return e?e:this.addAccount(t)},n.prototype.pathFind=n.prototype.createPathFind=function(t,e,r,n){if("object"==typeof t){var i=t;n=i.src_currencies,r=i.dst_amount,e=i.dst_account,t=i.src_account}else console.error("DEPRECATED: First argument to request constructor should be an object containing request properties");var o=new b(this,t,e,r,n);return this._cur_path_find&&this._cur_path_find.notify_superceded(),o.create(),this._cur_path_find=o,o},n.prepareTrade=function(t,e){var r=p.from_json(t).is_native()?"":"/"+e;return t+r},n.prototype.book=n.prototype.createOrderBook=function(t,e,r,i){if("object"==typeof t){var o=t;i=o.issuer_pays,r=o.currency_pays,e=o.issuer_gets,t=o.currency_gets}else console.error("DEPRECATED: First argument to request constructor should be an object containing request properties");var s=n.prepareTrade(t,e),a=n.prepareTrade(r,i),c=s+":"+a;if(this._books.hasOwnProperty(c))return this._books[c];var u=new m(this,t,e,r,i,c);return u.is_valid()&&(this._books[c]=u),u},n.prototype.accountSeq=n.prototype.getAccountSequence=function(t,e){var t=d.json_rewrite(t),r=this.accounts[t];if(r){var n=r.seq,i={ADVANCE:1,REWIND:-1}[e.toUpperCase()]||0;return r.seq+=i,n}},n.prototype.setAccountSequence=n.prototype.setAccountSeq=function(t,e){var t=d.json_rewrite(t);this.accounts.hasOwnProperty(t)||(this.accounts[t]={}),this.accounts[t].seq=e},n.prototype.accountSeqCache=function(t,e,r){function n(t){delete s.caching_seq_request;var e=t.node.Sequence;s.seq=e,a.emit("success_cache",t)}function i(t){delete s.caching_seq_request,a.emit("error_cache",t)}if("object"==typeof t){var o=t;r=e,e=o.ledger,t=o.account}else console.error("DEPRECATED: First argument to request constructor should be an object containing request properties");this.accounts.hasOwnProperty(t)||(this.accounts[t]={});var s=this.accounts[t],a=s.caching_seq_request;return a||(a=this.requestLedgerEntry("account_root"),a.accountRoot(t),a.selectLedger(e),a.once("success",n),a.once("error",i),s.caching_seq_request=a),a.callback(r,"success_cache","error_cache"),a},n.prototype.dirtyAccountRoot=function(t){var t=d.json_rewrite(t);delete this.ledgers.current.account_root[t]},n.prototype.requestOffer=function(t,e){var r=this.requestLedgerEntry("offer");return t.account&&t.sequence?r.offerId(t.account,t.sequence):t.index&&r.offerIndex(t.index),r.ledgerSelect(t.ledger),r.once("success",function(t){r.emit("offer",t)}),r.callback(e,"offer"),r},n.prototype.requestRippleBalance=function(t,e,r,n,i){function o(r){var n=r.node,i=l.from_json(n.LowLimit),o=l.from_json(n.HighLimit),s=l.from_json(n.Balance),c=d.from_json(t).equals(o.issuer());a.emit("ripple_state",{account_balance:(c?s.negate():s.clone()).parse_issuer(t),peer_balance:(c?s.clone():s.negate()).parse_issuer(e),account_limit:(c?o:i).clone().parse_issuer(e),peer_limit:(c?i:o).clone().parse_issuer(t),account_quality_in:c?n.HighQualityIn:n.LowQualityIn,peer_quality_in:c?n.LowQualityIn:n.HighQualityIn,account_quality_out:c?n.HighQualityOut:n.LowQualityOut,peer_quality_out:c?n.LowQualityOut:n.HighQualityOut})}if("object"==typeof t){var s=t;i=e,n=s.ledger,r=s.currency,e=s.issuer,t=s.account}else console.error("DEPRECATED: First argument to request constructor should be an object containing request properties");var a=this.requestLedgerEntry("ripple_state");return a.rippleState(t,e,r),a.selectLedger(n),a.once("success",o),a.callback(i,"ripple_state"),a},n.prepareCurrency=n.prepareCurrencies=function(t){var e={};return t.hasOwnProperty("issuer")&&(e.issuer=d.json_rewrite(t.issuer)),t.hasOwnProperty("currency")&&(e.currency=p.json_rewrite(t.currency,{force_hex:!0})),e},n.prototype.requestRipplePathFind=function(t,e,r,i,o){if("object"==typeof t){var s=t;o=e,i=s.src_currencies,r=s.dst_amount,e=s.dst_account,t=s.src_account}else console.error("DEPRECATED: First argument to request constructor should be an object containing request properties");var a=new f(this,"ripple_path_find");return a.message.source_account=d.json_rewrite(t),a.message.destination_account=d.json_rewrite(e),a.message.destination_amount=l.json_rewrite(r),i&&(a.message.source_currencies=i.map(n.prepareCurrencies)),a.callback(o),a},n.prototype.requestPathFindCreate=function(t,e,r,i,o){if("object"==typeof t){var s=t;o=e,i=s.src_currencies,r=s.dst_amount,e=s.dst_account,t=s.src_account}else console.error("DEPRECATED: First argument to request constructor should be an object containing request properties");var a=new f(this,"path_find");return a.message.subcommand="create",a.message.source_account=d.json_rewrite(t),a.message.destination_account=d.json_rewrite(e),a.message.destination_amount=l.json_rewrite(r),i&&(a.message.source_currencies=i.map(n.prepareCurrencies)),a.callback(o),a},n.prototype.requestPathFindClose=function(t){var e=new f(this,"path_find");return e.message.subcommand="close",e.callback(t),e},n.prototype.requestUnlList=function(t){return new f(this,"unl_list").callback(t)},n.prototype.requestUnlAdd=function(t,e,r){var n=new f(this,"unl_add");return n.message.node=t,e&&(n.message.comment=void 0),n.callback(r),n},n.prototype.requestUnlDelete=function(t,e){var r=new f(this,"unl_delete");return r.message.node=t,r.callback(e),r},n.prototype.requestPeers=function(t){return new f(this,"peers").callback(t)},n.prototype.requestConnect=function(t,e,r){var n=new f(this,"connect");return n.message.ip=t,e&&(n.message.port=e),n.callback(r),n},n.prototype.transaction=n.prototype.createTransaction=function(t,e){if(0===arguments.length)return new v(this);s.strictEqual(typeof t,"string","TransactionType must be a string"),s.strictEqual(typeof e,"object","Transaction options must be an object");var r=new v(this),n={payment:"payment",accountset:"accountSet",trustset:"trustSet",offercreate:"offerCreate",offercancel:"offerCancel",setregularkey:"setRegularKey",sign:"sign"},i=n[t.toLowerCase()];if(!i)throw new Error("Invalid transaction type: "+t);return r[i](e)},n.prototype.feeTx=function(t){var e=this.getServer();if(!e)throw new Error("No connected servers");return e._feeTx(t)},n.prototype.feeTxUnit=function(){var t=this.getServer();if(!t)throw new Error("No connected servers");return t._feeTxUnit()},n.prototype.reserve=function(t){var e=this.getServer();if(!e)throw new Error("No connected servers");return e._reserve(t)},e.Remote=n},function(t,e,r){function n(t,e){i.call(this),this.remote=t,this.requested=!1,this.reconnectTimeout=3e3,this.successEvent="success",this.errorEvent="error",this.message={command:e,id:void 0}}{var i=r(39).EventEmitter,o=r(43),s=r(49),a=r(9).UInt160,c=r(6).Currency,u=r(14).RippleError;r(18).Server}o.inherits(n,i),n.prototype.request=function(t,e){return this.emit("before"),"function"==typeof t&&(e=t),this.callback(e),this.requested?this:(this.requested=!0,this.on("error",function(){}),this.emit("request",this.remote),Array.isArray(t)?t.forEach(function(t){this.setServer(t),this.remote.request(this)},this):this.remote.request(this),this)},n.prototype.filter=n.prototype.addFilter=n.prototype.broadcast=function(t){function e(r,s){function a(){clearTimeout(o[c]),o[c]=null,e(r,s)}if(r.isConnected())return n.once("proposed",function(e){i=e,s(t(e))}),r._request(n);var c=r.getServerID();o[c]=setTimeout(function(){r.removeListener("connect",a),s(!1)},n.reconnectTimeout),r.once("connect",a)}function r(t){a.call(n,t?"success":"error",i)}var n=this;if(!this.requested)return this.once("before",function(){n.requested=!0,n.broadcast(t)}),this;var t="function"==typeof t?t:Boolean,i=new Error("No servers available"),o={},a=this.emit;this.emit=function(t,e,r){switch(t){case"success":case"error":a.call(n,"proposed",e,r);break;default:a.apply(n,arguments)}};var c=this.remote._servers.filter(function(t){return!(!t.isConnected()&&!t._shouldConnect||n.message.hasOwnProperty("ledger_index")&&!t.hasLedger(n.message.ledger_index)||n.message.hasOwnProperty("ledger_index_min")&&-1!==n.message.ledger_index_min&&!t.hasLedger(n.message.ledger_index_min)||n.message.hasOwnProperty("ledger_index_max")&&-1!==n.message.ledger_index_max&&!t.hasLedger(n.message.ledger_index_max))});return s.some(c,e,r),this},n.prototype.cancel=function(){return this.removeAllListeners(),this.on("error",function(){}),this},n.prototype.setCallback=function(t){return"function"==typeof t&&this.callback(t),this},n.prototype.setReconnectTimeout=function(t){return"number"!=typeof t||isNaN(t)||(this.reconnectTimeout=t),this},n.prototype.callback=function(t,e,r){function n(e){s||(s=!0,t.call(o,null,e))}function i(e){s||(s=!0,e instanceof u||(e=new u(e)),t.call(o,e))}var o=this;if("function"!=typeof t)return this;"string"==typeof e&&(this.successEvent=e),"string"==typeof r&&(this.errorEvent=r);var s=!1;return this.once(this.successEvent,n),this.once(this.errorEvent,i),this.request(),this},n.prototype.timeout=function(t,e){function r(){n.timeout(t,e)}var n=this;if(!this.requested)return this.once("request",r);var i=this.emit,o=!1,s=setTimeout(function(){o=!0,"function"==typeof e&&e(),i.call(n,"timeout"),n.cancel()},t);return this.emit=function(){o||(clearTimeout(s),i.apply(n,arguments))},this},n.prototype.setServer=function(t){var e=null;switch(typeof t){case"object":e=t;break;case"string":for(var r,n=this.remote._servers,i=0;r=n[i];i++)if(r._url===t){e=r;break}}return this.server=e,this},n.prototype.buildPath=function(t){if(this.remote.local_signing)throw new Error("`build_path` is completely ignored when doing local signing as `Paths` is a component of the signed blob. The `tx_blob` is signed,sealed and delivered, and the txn unmodified after");return t?this.message.build_path=!0:delete this.message.build_path,this},n.prototype.ledgerChoose=function(t){return t?this.message.ledger_index=this.remote._ledger_current_index:this.message.ledger_hash=this.remote._ledger_hash,this},n.prototype.ledgerHash=function(t){return this.message.ledger_hash=t,this},n.prototype.ledgerIndex=function(t){return this.message.ledger_index=t,this},n.prototype.selectLedger=n.prototype.ledgerSelect=function(t){switch(t){case"current":case"closed":case"validated":this.message.ledger_index=t;break;default:Number(t)&&isFinite(Number(t))?this.message.ledger_index=Number(t):/^[A-F0-9]{64}$/.test(t)&&(this.message.ledger_hash=t)}return this},n.prototype.accountRoot=function(t){return this.message.account_root=a.json_rewrite(t),this},n.prototype.index=function(t){return this.message.index=t,this},n.prototype.offerId=function(t,e){return this.message.offer={account:a.json_rewrite(t),seq:e},this},n.prototype.offerIndex=function(t){return this.message.offer=t,this},n.prototype.secret=function(t){return t&&(this.message.secret=t),this},n.prototype.txHash=function(t){return this.message.tx_hash=t,this},n.prototype.txJson=function(t){return this.message.tx_json=t,this},n.prototype.txBlob=function(t){return this.message.tx_blob=t,this},n.prototype.rippleState=function(t,e,r){return this.message.ripple_state={currency:r,accounts:[a.json_rewrite(t),a.json_rewrite(e)]},this},n.prototype.setAccounts=n.prototype.accounts=function(t,e){Array.isArray(t)||(t=[t]);var r=t.map(function(t){return a.json_rewrite(t)});return e?this.message.accounts_proposed=r:this.message.accounts=r,this},n.prototype.addAccount=function(t,e){if(Array.isArray(t))return t.forEach(this.addAccount,this),this;
var r=a.json_rewrite(t),n=e===!0?"accounts_proposed":"accounts";return this.message[n]=(this.message[n]||[]).concat(r),this},n.prototype.setAccountsProposed=n.prototype.rtAccounts=n.prototype.accountsProposed=function(t){return this.accounts(t,!0)},n.prototype.addAccountProposed=function(t){return Array.isArray(t)?(t.forEach(this.addAccountProposed,this),this):this.addAccount(t,!0)},n.prototype.setBooks=n.prototype.books=function(t,e){this.message.books=[];for(var r=0,n=t.length;n>r;r++){var i=t[r];this.addBook(i,e)}return this},n.prototype.addBook=function(t,e){function r(e){if(!t[e])throw new Error("Missing "+e);var r=n[e]={currency:c.json_rewrite(t[e].currency,{force_hex:!0})};c.from_json(r.currency).is_native()||(r.issuer=a.json_rewrite(t[e].issuer))}if(Array.isArray(t))return t.forEach(this.addBook,this),this;var n={};return["taker_gets","taker_pays"].forEach(r),"boolean"!=typeof e?n.snapshot=!0:e?n.snapshot=!0:delete n.snapshot,t.both&&(n.both=!0),this.message.books=(this.message.books||[]).concat(n),this},n.prototype.addStream=function(t,e){if(Array.isArray(e))switch(t){case"accounts":this.addAccount(e);break;case"accounts_proposed":this.addAccountProposed(e);break;case"books":this.addBook(e)}else if(arguments.length>1){for(arg in arguments)this.addStream(arguments[arg]);return}return Array.isArray(this.message.streams)||(this.message.streams=[]),-1===this.message.streams.indexOf(t)&&this.message.streams.push(t),this},e.Request=n},function(t,e,r){function n(t){return parseInt(t)===t}function i(t){return n(t)?String(t)+".0":t}function o(t){return new p(t).toPower(-1)}function s(){this._value=new p(0/0),this._is_native=!0,this._currency=new l,this._issuer=new h}var a=r(40),c=r(46),u=r(17),h=r(9).UInt160,f=r(11).Seed,l=r(6).Currency,p=r(29),d={currency_xns:0,currency_one:1,xns_precision:6,bi_5:new p(5),bi_7:new p(7),bi_10:new p(10),bi_1e14:new p(1e14),bi_1e16:new p(1e16),bi_1e17:new p(1e17),bi_1e32:new p(1e32),bi_man_max_value:new p("9999999999999999"),bi_man_min_value:new p(1e15),bi_xns_max:new p(1e17),bi_xns_min:new p(-1e17),bi_xns_unit:new p(1e6),cMinOffset:-96,cMaxOffset:80,max_value:"9999999999999999e80",min_value:"-1000000000000000e-96"},_=new p(1e11),v=new p(d.max_value),y=new p(d.min_value).abs();c(s,d),e.consts=d,s.text_full_rewrite=function(t){return s.from_json(t).to_text_full()},s.json_rewrite=function(t){return s.from_json(t).to_json()},s.from_number=function(t){return(new s).parse_number(t)},s.from_json=function(t){return(new s).parse_json(t)},s.from_quality=function(t,e,r,n){return(new s).parse_quality(t,e,r,n)},s.from_human=function(t,e){return(new s).parse_human(t,e)},s.is_valid=function(t){return s.from_json(t).is_valid()},s.is_valid_full=function(t){return s.from_json(t).is_valid_full()},s.NaN=function(){var t=new s;return t._value=new p(0/0),t},s.prototype._set_value=function(t,e){a(t instanceof p),this._value=t.isZero()&&t.isNegative()?t.negated():t,this.canonicalize(e),this._check_limits()},s.prototype.abs=function(){return this.clone(this.is_negative())},s.prototype.add=function(t){var e=s.from_json(t);return this.is_comparable(e)?this._copy(this._value.plus(e._value)):s.NaN()},s.prototype.subtract=function(t){return this.add(s.from_json(t).negate())},s.prototype.multiply=function(t){var e=s.from_json(t),r=e.is_native()?e._value.times(s.bi_xns_unit):e._value;return this._copy(this._value.times(r))},s.prototype.divide=function(t){var e=s.from_json(t);if(!this.is_valid())throw new Error("Invalid dividend");if(!e.is_valid())throw new Error("Invalid divisor");if(e.is_zero())throw new Error("divide by zero");var r=e.is_native()?e._value.times(s.bi_xns_unit):e._value;return this._copy(this._value.dividedBy(r))},s.prototype.ratio_human=function(t,e){e=c({},e);var r=this;return t=s.from_json(i(t)),r.is_valid()&&t.is_valid()?t.is_zero()?s.NaN():(e.reference_date&&(t=t.applyInterest(e.reference_date)),t._is_native&&r._set_value(r._value.times(s.bi_xns_unit)),r.divide(t)):s.NaN()},s.prototype.product_human=function(t,e){if(e=e||{},t=s.from_json(i(t)),!this.is_valid()||!t.is_valid())return s.NaN();e.reference_date&&(t=t.applyInterest(e.reference_date));var r=this.multiply(t);return t._is_native&&r._set_value(r._value.dividedBy(s.bi_xns_unit)),r},s.prototype._invert=function(){return this._set_value(o(this._value)),this},s.prototype.invert=function(){return this.clone()._invert()},s.prototype.canonicalize=function(t){if(this._is_native)this._value=this._value.round(6,p.ROUND_DOWN);else if(t){var e=this._value;this._value=p.withRoundingMode(t,function(){return new p(e.toPrecision(16))})}else this._value=new p(this._value.toPrecision(16))},s.prototype._check_limits=function(){if(this._value.isNaN()||this._value.isZero())return this;var t=this._value.absoluteValue();if(this._is_native){if(t.greaterThan(_))throw new Error("Exceeding max value of "+_.toString())}else{if(t.lessThan(y))throw new Error("Exceeding min value of "+y.toString());if(t.greaterThan(v))throw new Error("Exceeding max value of "+v.toString())}return this},s.prototype.clone=function(t){return this.copyTo(new s,t)},s.prototype._copy=function(t){var e=this.clone();return e._set_value(t),e},s.prototype.compareTo=function(t){var e=s.from_json(t);return this.is_comparable(e)?this._value.comparedTo(e._value):s.NaN()},s.prototype.copyTo=function(t,e){return t._value=e?this._value.negated():this._value,t._is_native=this._is_native,t._currency=this._currency,t._issuer=this._issuer,t},s.prototype.currency=function(){return this._currency},s.prototype.equals=function(t,e){return t instanceof s?this.is_valid()&&t.is_valid()&&this._is_native===t._is_native&&this._value.equals(t._value)&&(this._is_native||this._currency.equals(t._currency)&&(e||this._issuer.equals(t._issuer))):this.equals(s.from_json(t))},s.prototype.is_comparable=function(t){return this.is_valid()&&t.is_valid()&&this._is_native===t._is_native},s.prototype.is_native=function(){return this._is_native},s.prototype.is_negative=function(){return this._value.isNegative()},s.prototype.is_positive=function(){return!this.is_zero()&&!this.is_negative()},s.prototype.is_valid=function(){return!this._value.isNaN()},s.prototype.is_valid_full=function(){return this.is_valid()&&this._currency.is_valid()&&this._issuer.is_valid()},s.prototype.is_zero=function(){return this._value.isZero()},s.prototype.issuer=function(){return this._issuer},s.prototype.negate=function(){return this.clone("NEGATE")},s.prototype.parse_human=function(t,e){function r(t){return isFinite(t)&&""!==t&&null!==t}e=e||{};var n,i,o=/^[a-fA-F0-9]{40}$/,a=/^([a-zA-Z]{3}|[0-9]{3})$/,c=t.split(" ").filter(function(t){return""!==t});if(1===c.length){if(r(c[0]))n=c[0],i="XRP";else if(n=c[0].slice(0,-3),i=c[0].slice(-3),!r(n)||!i.match(a))return s.NaN()}else{if(2!==c.length)return s.NaN();if(r(c[0])&&c[1].match(o))n=c[0],i=c[1];else if(c[0].match(a)&&r(c[1]))n=c[1],i=c[0];else{if(!r(c[0])||!c[1].match(a))return s.NaN();n=c[0],i=c[1]}}if(i=i.toUpperCase(),this.set_currency(i),this._is_native="XRP"===i,this._set_value(new p(n)),e.reference_date&&this._currency.has_interest()){var u=this._currency.get_interest_at(e.reference_date);this._set_value(this._value.dividedBy(u.toString()))}return this},s.prototype.parse_issuer=function(t){return this._issuer=h.from_json(t),this},s.prototype.parse_quality=function(t,e,r,n){n=n||{};var i=l.from_json(n.base_currency),a=t.substring(t.length-14),c=t.substring(t.length-16,t.length-14),u=new p(a,16),f=parseInt(c,16)-100,d=new p(u.toString()+"e"+f.toString());if(this._currency=l.from_json(e),this._issuer=h.from_json(r),this._is_native=this._currency.is_native(),this._is_native&&i.is_native())throw new Error("XRP/XRP quality is not allowed");var _=n.inverse?o(d):d,v=_;if(n.xrp_as_drops||(this._is_native?v=_.div(s.bi_xns_unit):i.is_valid()&&i.is_native()&&(v=_.times(s.bi_xns_unit))),this._set_value(v),n.reference_date&&i.is_valid()&&i.has_interest()){var y=i.get_interest_at(n.reference_date);this._set_value(this._value.dividedBy(y.toString()))}return this},s.prototype.parse_number=function(t){return this._is_native=!1,this._currency=l.from_json(1),this._issuer=h.from_json(1),this._set_value(new p(t)),this},s.prototype.parse_json=function(t){switch(typeof t){case"string":var e=t.match(/^([^/]+)\/([^/]+)(?:\/(.+))?$/);e?(this._currency=l.from_json(e[2]),this._issuer=h.from_json(e[3]?e[3]:"1"),this.parse_value(e[1])):(this.parse_native(t),this._currency=l.from_json("0"),this._issuer=h.from_json("0"));break;case"number":this.parse_json(String(t));break;case"object":if(null===t)break;t instanceof s?t.copyTo(this):t.hasOwnProperty("value")&&(this._currency.parse_json(t.currency,!0),"string"==typeof t.issuer&&this._issuer.parse_json(t.issuer),this.parse_value(t.value));break;default:this._set_value(new p(0/0))}return this},s.prototype.parse_native=function(t){if("string"==typeof t&&t.match(/^-?\d*(\.\d{0,6})?$/)){var e=new p(t);this._is_native=!0,this._set_value(t.indexOf(".")>=0?e:e.dividedBy(s.bi_xns_unit))}else this._set_value(new p(0/0));return this},s.prototype.parse_value=function(t){return this._is_native=!1,this._set_value(new p(t),p.ROUND_DOWN),this},s.prototype.set_currency=function(t){return this._currency=l.from_json(t),this._is_native=this._currency.is_native(),this},s.prototype.set_issuer=function(t){return this._issuer=t instanceof h?t:h.from_json(t),this},s.prototype.to_number=function(){return Number(this.to_text())},s.prototype.to_text=function(){if(!this.is_valid())return"NaN";if(this._is_native)return this._value.times(s.bi_xns_unit).toString();var t=this._value.e-15,e=this._value.isNegative()?"-":"",r=u.getMantissaDecimalString(this._value.absoluteValue());if(0!==t&&(-25>t||t>-4))return e+r.toString()+"e"+t.toString();var n="000000000000000000000000000"+r.toString()+"00000000000000000000000",i=n.substring(0,t+43),o=n.substring(t+43),a=i.match(/[1-9].*$/),c=o.match(/[1-9]0*$/);return e+(a?a[0]:"0")+(c?"."+o.substring(0,1+o.length-c[0].length):"")},s.prototype.applyInterest=function(t){if(!this._currency.has_interest())return this;var e=this._currency.get_interest_at(t);return this._copy(this._value.times(e.toString()))},s.prototype.to_human=function(t){if(t=t||{},!this.is_valid())return"NaN";var e=this;t.reference_date&&(e=this.applyInterest(t.reference_date));var r=e._value.isNegative(),n=e._value.abs().toString(),i=n.split("."),o=i[0],s=2===i.length?i[1]:"";if(o=o.replace(/^0*/,""),s=s.replace(/0*$/,""),s.length||!t.skip_empty_fraction){if("number"==typeof t.precision){var a=Math.max(0,t.precision);a=Math.min(a,s.length);var c=Number("0."+s).toFixed(a);for(1>c?s=c.substring(2):(o=(Number(o)+1).toString(),s="");s.length<a;)s="0"+s}if("number"==typeof t.max_sig_digits){var h=0===Number(o),f=h?0:o.length,l=h?s.replace(/^0*/,""):s;f+=l.length;var p=f-t.max_sig_digits;p=Math.max(p,0),p=Math.min(p,s.length),p>0&&(s=s.slice(0,-p))}if("number"==typeof t.min_precision)for(t.min_precision=Math.max(0,t.min_precision);s.length<t.min_precision;)s+="0"}if(t.group_sep!==!1){var d="string"==typeof t.group_sep?t.group_sep:",",_=u.chunkString(o,t.group_width||3,!0);o=_.join(d)}var v="";return r&&t.signed!==!1&&(v+="-"),v+=o.length?o:"0",v+=s.length?"."+s:""},s.prototype.to_human_full=function(t){t=t||{};var e=this.to_human(t),r=this._currency.to_human(),n=this._issuer.to_json(t),i=e+"/"+r;return this.is_native()?i:i+"/"+n},s.prototype.to_json=function(){if(this._is_native)return this.to_text();var t={value:this.to_text(),currency:this._currency.has_interest()?this._currency.to_hex():this._currency.to_json()};return this._issuer.is_valid()&&(t.issuer=this._issuer.to_json()),t},s.prototype.to_text_full=function(t){return this.is_valid()?this._is_native?this.to_human()+"/XRP":this.to_text()+"/"+this._currency.to_json()+"/"+this._issuer.to_json(t):"NaN"},s.prototype.not_equals_why=function(t,e){if("string"==typeof t)return this.not_equals_why(s.from_json(t));if(!(t instanceof s))return"Not an Amount";if(!this.is_valid()||!t.is_valid())return"Invalid amount.";if(this._is_native!==t._is_native)return"Native mismatch.";var r=this._is_native?"XRP":"Non-XRP";if(!this._value.isZero()&&this._value.negated().equals(t._value))return r+" sign differs.";if(!this._value.equals(t._value))return r+" value differs.";if(!this._is_native){if(!this._currency.equals(t._currency))return"Non-XRP currency differs.";if(!e&&!this._issuer.equals(t._issuer))return"Non-XRP issuer differs: "+t._issuer.to_json()+"/"+this._issuer.to_json()}},e.Amount=s,e.Currency=l,e.Seed=f,e.UInt160=h},function(t,e,r){function n(t,e){function r(t){~n.subscribeEvents.indexOf(t)&&(!f._subs&&f._remote._connected&&f._remote.request_subscribe().add_account(f._account_id).broadcast().request(),f._subs+=1)}function i(t){~n.subscribeEvents.indexOf(t)&&(f._subs-=1,!f._subs&&f._remote._connected&&f._remote.request_unsubscribe().add_account(f._account_id).broadcast().request())}function o(t){f._account.is_valid()&&f._subs&&t.add_account(f._account_id)}function h(t){if(t.mmeta){var e=!1;t.mmeta.each(function(t){var r=t.fields.Account===f._account_id,n=r&&"AccountRoot"===t.entryType;n&&(s(f._entry,t.fieldsNew,t.fieldsFinal),e=!0)}),e&&f.emit("entry",f._entry)}}a.call(this);var f=this;return this._remote=t,this._account=c.from_json(e),this._account_id=this._account.to_json(),this._subs=0,this._entry={},this.on("newListener",r),this.on("removeListener",i),this._remote.on("prepare_subscribe",o),this.on("transaction",h),this._transactionManager=new u(this),this}var i=r(49),o=r(43),s=r(46),a=r(39).EventEmitter,c=(r(3).Amount,r(9).UInt160),u=r(30).TransactionManager,h=r(17).sjcl,f=r(7).Base;o.inherits(n,a),n.subscribeEvents=["transaction","entry"],n.prototype.toJson=function(){return this._account.to_json()},n.prototype.isValid=function(){return this._account.is_valid()},n.prototype.getInfo=function(t){return this._remote.requestAccountInfo({account:this._account_id},t)},n.prototype.entry=function(t){function e(e,n){e?t(e):(s(r._entry,n.account_data),r.emit("entry",r._entry),t(null,n))}var r=this,t="function"==typeof t?t:function(){};return this.getInfo(e),this},n.prototype.getNextSequence=function(t){function e(t){return t&&"object"==typeof t&&"object"==typeof t.remote&&"actNotFound"===t.remote.error}function r(r,n){e(r)?t(null,1):r?t(r):t(null,n.account_data.Sequence)}var t="function"==typeof t?t:function(){};return this.getInfo(r),this},n.prototype.lines=function(t){function e(e,n){e?t(e):(r._lines=n.lines,r.emit("lines",r._lines),t(null,n))}var r=this,t="function"==typeof t?t:function(){};return this._remote.requestAccountLines({account:this._account_id},e),this},n.prototype.line=function(t,e,r){var n=this,r="function"==typeof r?r:function(){};return n.lines(function(n,i){if(n)return r(n);var o;t:for(var s=0;s<i.lines.length;s++){var a=i.lines[s];if(a.account===e&&a.currency===t){o=a;break t}}r(null,o)}),this},n.prototype.notify=n.prototype.notifyTx=function(t){if(this._subs){this.emit("transaction",t);var e=t.transaction.Account;if(e){var r=e===this._account_id;this.emit(r?"transaction-outbound":"transaction-inbound",t)}}},n.prototype.submit=function(t){this._transactionManager.submit(t)},n.prototype.publicKeyIsActive=function(t,e){function r(t){a.getInfo(function(e,r){e&&e.remote&&"actNotFound"===e.remote.error?t(null,null):t(e,r)})}function o(t,e){if(!t)return void(s===a._account_id?e(null,!0):e(null,!1));var r=t.account_data;r.RegularKey&&r.RegularKey===s?e(null,!0):r.Account===s&&0===(1048576&r.Flags)?e(null,!0):e(null,!1)}var s,a=this;try{s=n._publicKeyToAddress(t)}catch(c){return e(c)}var u=[r,o];i.waterfall(u,e)},n._publicKeyToAddress=function(t){function e(t){var e=h.codec.hex.toBits(t),r=h.hash.ripemd160.hash(h.hash.sha256.hash(e)),n=c.from_bits(r);return n.set_version(f.VER_ACCOUNT_ID),n.to_json()}if(c.is_valid(t))return t;if(/^[0-9a-fA-F]+$/.test(t))return e(t);throw new Error("Public key is invalid. Must be a UInt160 or a hex string")},e.Account=n},function(t,e,r){function n(t){o.call(this);var e=this,r="object"==typeof t;this.remote=t,this.tx_json={Flags:0},this._secret=void 0,this._build_path=!1,this._maxFee=r?this.remote.max_fee:void 0,this.state="unsubmitted",this.finalized=!1,this.previousSigningHash=void 0,this.submitIndex=void 0,this.canonical=r?this.remote.canonical_signing:!0,this.submittedIDs=[],this.attempts=0,this.submissions=0,this.responses=0,this.once("success",function(t){e.setState("validated"),e.finalize(t),e._successHandler&&e._successHandler(t)}),this.once("error",function(t){e.setState("failed"),e.finalize(t),e._errorHandler&&e._errorHandler(t)}),this.once("submitted",function(){e.setState("submitted")}),this.once("proposed",function(){e.setState("pending")})}var i=r(43),o=(r(40),r(39).EventEmitter),s=r(17),a=r(17).sjcl,c=r(3).Amount,u=r(3).Currency,h=r(3).UInt160,f=r(11).Seed,l=r(13).SerializedObject,p=r(14).RippleError,d=r(27),_=r(24),v=r(28).internal.sub("transaction");i.inherits(n,o),n.fee_units={"default":10},n.flags={Universal:{FullyCanonicalSig:2147483648},AccountSet:{RequireDestTag:65536,OptionalDestTag:131072,RequireAuth:262144,OptionalAuth:524288,DisallowXRP:1048576,AllowXRP:2097152},TrustSet:{SetAuth:65536,NoRipple:131072,SetNoRipple:131072,ClearNoRipple:262144,SetFreeze:1048576,ClearFreeze:2097152},OfferCreate:{Passive:65536,ImmediateOrCancel:131072,FillOrKill:262144,Sell:524288},Payment:{NoRippleDirect:65536,PartialPayment:131072,LimitQuality:262144}},n.set_clear_flags={AccountSet:{asfRequireDest:1,asfRequireAuth:2,asfDisallowXRP:3,asfDisableMaster:4,asfAccountTxnID:5,asfNoFreeze:6,asfGlobalFreeze:7}},n.MEMO_TYPES={},n.ASCII_REGEX=/^[\x00-\x7F]*$/,n.formats=r(16).tx,n.prototype.consts={telLOCAL_ERROR:-399,temMALFORMED:-299,tefFAILURE:-199,terRETRY:-99,tesSUCCESS:0,tecCLAIMED:100},n.prototype.isTelLocal=function(t){return t>=this.consts.telLOCAL_ERROR&&t<this.consts.temMALFORMED},n.prototype.isTemMalformed=function(t){return t>=this.consts.temMALFORMED&&t<this.consts.tefFAILURE},n.prototype.isTefFailure=function(t){return t>=this.consts.tefFAILURE&&t<this.consts.terRETRY},n.prototype.isTerRetry=function(t){return t>=this.consts.terRETRY&&t<this.consts.tesSUCCESS},n.prototype.isTepSuccess=function(t){return t>=this.consts.tesSUCCESS},n.prototype.isTecClaimed=function(t){return t>=this.consts.tecCLAIMED},n.prototype.isRejected=function(t){return this.isTelLocal(t)||this.isTemMalformed(t)||this.isTefFailure(t)},n.from_json=function(t){return(new n).parseJson(t)},n.prototype.parseJson=function(t){return this.tx_json=t,this},n.prototype.setState=function(t){this.state!==t&&(this.state=t,this.emit("state",t))},n.prototype.finalize=function(t){return this.finalized=!0,this.result?(this.result.ledger_index=t.ledger_index,this.result.ledger_hash=t.ledger_hash):(this.result=t,this.result.tx_json=this.tx_json),this.emit("cleanup"),this.emit("final",t),this.remote&&this.remote.trace&&v.info("transaction finalized:",this.tx_json,this.getManager()._pending.getLength()),this},n.prototype.getAccount=function(){return this.tx_json.Account},n.prototype.getTransactionType=function(){return this.tx_json.TransactionType},n.prototype.getManager=function(t){return this.remote?(t||(t=this.tx_json.Account),this.remote.account(t)._transactionManager):void 0},n.prototype.getSecret=n.prototype._accountSecret=function(t){return this.remote?(t||(t=this.tx_json.Account),this.remote.secrets[t]):void 0},n.prototype._getFeeUnits=n.prototype.feeUnits=function(){return n.fee_units["default"]},n.prototype._computeFee=function(){if(!this.remote)return void 0;for(var t=this.remote._servers,e=[],r=0;r<t.length;r++){var n=t[r];n._connected&&e.push(Number(n._computeFee(this._getFeeUnits())))}switch(e.length){case 0:return;case 1:return String(e[0])}e.sort(function(t,e){return t>e?1:e>t?-1:0});var i=Math.floor(e.length/2),o=e.length%2===0?Math.floor(.5+(e[i]+e[i-1])/2):e[i];return String(o)},n.prototype.complete=function(){if(this.remote&&!this.remote.trusted&&!this.remote.local_signing)return this.emit("error",new p("tejServerUntrusted","Attempt to give secret to untrusted server")),!1;if(!this._secret&&!(this._secret=this.getSecret()))return this.emit("error",new p("tejSecretUnknown","Missing secret")),!1;if("undefined"==typeof this.tx_json.SigningPubKey)try{var t=f.from_json(this._secret),e=t.get_key(this.tx_json.Account);this.tx_json.SigningPubKey=e.to_hex_pub()}catch(r){return this.emit("error",new p("tejSecretInvalid","Invalid secret")),!1}return!this.remote||"undefined"!=typeof this.tx_json.Fee||!this.remote.local_fee&&this.remote.trusted||(this.tx_json.Fee=this._computeFee())?Number(this.tx_json.Fee)>this._maxFee?(this.emit("error",new p("tejMaxFeeExceeded","Max fee exceeded")),!1):(this.remote&&this.remote.local_signing&&this.canonical&&(this.tx_json.Flags|=n.flags.Universal.FullyCanonicalSig,this.tx_json.Flags=this.tx_json.Flags>>>0),this.tx_json):(this.emit("error",new p("tejUnconnected")),!1)},n.prototype.serialize=function(){return l.from_json(this.tx_json)},n.prototype.signingHash=function(){return this.hash(_.testnet?"HASH_TX_SIGN_TESTNET":"HASH_TX_SIGN")},n.prototype.hash=function(t,e,r){if("string"==typeof t){if("undefined"==typeof d[t])throw new Error("Unknown hashing prefix requested.");t=d[t]}else t||(t=d.HASH_TX_ID);var n=(r||this.serialize()).hash(t);return e?n:n.to_hex()},n.prototype.sign=function(){var t=f.from_json(this._secret),e=this.tx_json.TxnSignature;delete this.tx_json.TxnSignature;var r=this.signingHash();if(e&&r===this.previousSigningHash)return this.tx_json.TxnSignature=e,this;var n=t.get_key(this.tx_json.Account),i=n.sign(r,0),o=a.codec.hex.fromBits(i).toUpperCase();return this.tx_json.TxnSignature=o,this.previousSigningHash=r,this},n.prototype.addId=function(t){-1===this.submittedIDs.indexOf(t)&&this.submittedIDs.unshift(t)},n.prototype.findId=function(t){for(var e,r=0;r<this.submittedIDs.length;r++){var n=this.submittedIDs[r];if(e=t[n])break}return e},n.prototype.setBuildPath=n.prototype.buildPath=function(t){return this._build_path=t,this},n.prototype.sourceTag=function(t){return"number"==typeof t&&isFinite(t)&&(this.tx_json.SourceTag=t),this},n.prototype.setDestinationTag=n.prototype.destinationTag=function(t){return"number"==typeof t&&isFinite(t)&&(this.tx_json.DestinationTag=t),this},n.prototype.setInvoiceID=n.prototype.invoiceID=function(t){if("string"==typeof t){for(;t.length<64;)t+="0";this.tx_json.InvoiceID=t}return this},n.prototype.setClientID=n.prototype.clientID=function(t){return"string"==typeof t&&(this._clientID=t),this},n.prototype.setLastLedger=n.prototype.lastLedger=function(t){return"number"==typeof t&&isFinite(t)&&(this._setLastLedger=!0,this.tx_json.LastLedgerSequence=t),this},n.prototype.maxFee=function(t){return"number"==typeof t&&t>=0&&(this._setMaxFee=!0,this._maxFee=t),this},n.prototype.setFixedFee=function(t){return"number"==typeof t&&t>=0&&(this._setFixedFee=!0,this.tx_json.Fee=String(t)),this},n._rewritePath=function(t){if(!Array.isArray(t))throw new Error("Path must be an array");var e=t.map(function(t){var e={};return t.hasOwnProperty("account")&&(e.account=h.json_rewrite(t.account)),t.hasOwnProperty("issuer")&&(e.issuer=h.json_rewrite(t.issuer)),t.hasOwnProperty("currency")&&(e.currency=u.json_rewrite(t.currency)),t.hasOwnProperty("type_hex")&&(e.type_hex=t.type_hex),e});return e},n.prototype.addPath=n.prototype.pathAdd=function(t){return Array.isArray(t)&&(this.tx_json.Paths=this.tx_json.Paths||[],this.tx_json.Paths.push(n._rewritePath(t))),this},n.prototype.setPaths=n.prototype.paths=function(t){if(Array.isArray(t))for(var e=0,r=t.length;r>e;e++)this.addPath(t[e]);return this},n.prototype.setSecret=n.prototype.secret=function(t){return"string"==typeof t&&(this._secret=t),this},n.prototype.setSendMax=n.prototype.sendMax=function(t){return t&&(this.tx_json.SendMax=c.json_rewrite(t)),this},n.prototype.transferRate=function(t){return"number"==typeof t&&t>=1e9&&(this.tx_json.TransferRate=t),this},n.prototype.setFlags=function(t){if(void 0===t)return this;if("number"==typeof t)return this.tx_json.Flags=t,this;for(var e=n.flags[this.getTransactionType()]||{},r=Array.isArray(t)?t:[].slice.call(arguments),i=0,o=r.length;o>i;i++){var s=r[i];if(!e.hasOwnProperty(s))return this.emit("error",new p("tejInvalidFlag"));this.tx_json.Flags+=e[s]}return this},n.prototype.addMemo=function(t,e,r){if("object"==typeof t){var i=t;t=i.memoType,e=i.memoFormat,r=i.memoData}if(!/(undefined|string)/.test(typeof t))throw new Error("MemoType must be a string");if(!n.ASCII_REGEX.test(t))throw new Error("MemoType must be valid ASCII");if(!/(undefined|string)/.test(typeof e))throw new Error("MemoFormat must be a string");if(!n.ASCII_REGEX.test(e))throw new Error("MemoFormat must be valid ASCII");var o={};return t&&(o.MemoType=n.MEMO_TYPES[t]?n.MEMO_TYPES[t]:t),e&&(o.MemoFormat=e),r&&(o.MemoData=r),this.tx_json.Memos=(this.tx_json.Memos||[]).concat({Memo:o}),this},n.prototype.setAccountTxnID=n.prototype.accountTxnID=function(t){return"string"==typeof t&&(this.tx_json.AccountTxnID=t),this},n.prototype.accountSet=function(t,e,r){function i(t){return"number"==typeof t?t:s[t]||s["asf"+t]}if("object"==typeof t){var o=t;t=o.source||o.from||o.account,e=o.set_flag||o.set,r=o.clear_flag||o.clear}if(!h.is_valid(t))throw new Error("Source address invalid");this.tx_json.TransactionType="AccountSet",this.tx_json.Account=h.json_rewrite(t);var s=n.set_clear_flags.AccountSet;return e&&(e=i(e))&&(this.tx_json.SetFlag=e),r&&(r=i(r))&&(this.tx_json.ClearFlag=r),this},n.prototype.claim=function(t,e,r,n){if("object"==typeof t){var i=t;n=i.signature,r=i.public_key,e=i.generator,t=i.source||i.from||i.account}return this.tx_json.TransactionType="Claim",this.tx_json.Generator=e,this.tx_json.PublicKey=r,this.tx_json.Signature=n,this},n.prototype.offerCancel=function(t,e){if("object"==typeof t){var r=t;e=r.sequence,t=r.source||r.from||r.account}if(!h.is_valid(t))throw new Error("Source address invalid");return this.tx_json.TransactionType="OfferCancel",this.tx_json.Account=h.json_rewrite(t),this.tx_json.OfferSequence=Number(e),this},n.prototype.offerCreate=function(t,e,r,n,i){if("object"==typeof t){var o=t;i=o.cancel_sequence||o.sequence,n=o.expiration,r=o.taker_gets||o.sell,e=o.taker_pays||o.buy,t=o.source||o.from||o.account}if(!h.is_valid(t))throw new Error("Source address invalid");return this.tx_json.TransactionType="OfferCreate",this.tx_json.Account=h.json_rewrite(t),this.tx_json.TakerPays=c.json_rewrite(e),this.tx_json.TakerGets=c.json_rewrite(r),n&&(this.tx_json.Expiration=s.time.toRipple(n)),i&&(this.tx_json.OfferSequence=Number(i)),this},n.prototype.setRegularKey=function(t,e){if("object"==typeof t){var r=t;t=r.address||r.account||r.from,e=r.regular_key}if(!h.is_valid(t))throw new Error("Source address invalid");if(!h.is_valid(e))throw new Error("RegularKey must be a valid Ripple Address");return this.tx_json.TransactionType="SetRegularKey",this.tx_json.Account=h.json_rewrite(t),this.tx_json.RegularKey=h.json_rewrite(e),this},n.prototype.payment=function(t,e,r){if("object"==typeof t){var n=t;r=n.amount,e=n.destination||n.to,t=n.source||n.from||n.account}if(!h.is_valid(t))throw new Error("Payment source address invalid");if(!h.is_valid(e))throw new Error("Payment destination address invalid");return this.tx_json.TransactionType="Payment",this.tx_json.Account=h.json_rewrite(t),this.tx_json.Amount=c.json_rewrite(r),this.tx_json.Destination=h.json_rewrite(e),this},n.prototype.trustSet=n.prototype.rippleLineSet=function(t,e,r,n){if("object"==typeof t){var i=t;n=i.quality_out,r=i.quality_in,e=i.limit,t=i.source||i.from||i.account}if(!h.is_valid(t))throw new Error("Source address invalid");return this.tx_json.TransactionType="TrustSet",this.tx_json.Account=h.json_rewrite(t),void 0!==e&&(this.tx_json.LimitAmount=c.json_rewrite(e)),r&&(this.tx_json.QualityIn=r),n&&(this.tx_json.QualityOut=n),this},n.prototype.submit=function(t){var e=this;return this.callback="function"==typeof t?t:function(){},this._errorHandler=function(t,r){t instanceof p||(t=new p(t,r)),e.callback(t)},this._successHandler=function(t){e.callback(null,t)},this.remote?(this.getManager().submit(this),this):void this.emit("error",new Error("No remote found"))},n.prototype.abort=function(){this.finalized||this.emit("error",new p("tejAbort","Transaction aborted"))},n.prototype.summary=function(){var t={tx_json:this.tx_json,clientID:this._clientID,submittedIDs:this.submittedIDs,submissionAttempts:this.attempts,submitIndex:this.submitIndex,initialSubmitIndex:this.initialSubmitIndex,lastLedgerSequence:this.lastLedgerSequence,state:this.state,server:this._server?this._server._opts.url:void 0,finalized:this.finalized};return this.result&&(t.result={engine_result:this.result.engine_result,engine_result_message:this.result.engine_result_message,ledger_hash:this.result.ledger_hash,ledger_index:this.result.ledger_index,transaction_hash:this.result.tx_json.hash}),t},e.Transaction=n},function(t,e,r){var n=r(46),i=r(9).UInt160,o=r(17),s=r(31).Float,a=n(function(){this._value=0/0,this._update()},i);a.prototype=n({},i.prototype),a.prototype.constructor=a,a.HEX_CURRENCY_BAD="0000000000000000000000005852500000000000",a.prototype.human_RE=/^\s*([a-zA-Z0-9]{3})(\s*-\s*[- \w]+)?(\s*\(-?\d+\.?\d*%pa\))?\s*$/,a.from_json=function(t,e){return(new a).parse_json(t,e)},a.from_human=function(t,e){return(new a).parse_human(t,e)},a.prototype.parse_json=function(t,e){switch(this._value=0/0,typeof t){case"string":if(!t||"0"===t){this.parse_hex(e?a.HEX_CURRENCY_BAD:a.HEX_ZERO);break}var r=String(t).match(this.human_RE);if(r){var n=r[1];if(!n||/^(0|XRP)$/.test(n)){this.parse_hex(e?a.HEX_CURRENCY_BAD:a.HEX_ZERO);break}var i=r[3]||"",c=i.match(/(-?\d+\.?\d+)/);n=n.toUpperCase();var u=o.arraySet(20,0);if(c){u[0]=1,u[1]=255&n.charCodeAt(0),u[2]=255&n.charCodeAt(1),u[3]=255&n.charCodeAt(2),c=parseFloat(c[0]);for(var h=31536e3,f=h/Math.log(1+c/100),l=s.toIEEE754Double(f),p=0;p<=l.length;p++)u[8+p]=255&l[p]}else u[12]=255&n.charCodeAt(0),u[13]=255&n.charCodeAt(1),u[14]=255&n.charCodeAt(2);this.parse_bytes(u)}else this.parse_hex(t);break;case"number":isNaN(t)||this.parse_number(t);break;case"object":t instanceof a&&(this._value=t.copyTo({})._value,this._update())}return this},a.prototype.parse_human=function(t){return this.parse_json(t)},a.prototype._update=function(){var t=this.to_bytes(),e=!0;if(!t)return"XRP";this._native=!1,this._type=-1,this._interest_start=0/0,this._interest_period=0/0,this._iso_code="";for(var r=0;20>r;r++)e=e&&(12===r||13===r||14===r||0===t[r]);e?(this._iso_code=String.fromCharCode(t[12])+String.fromCharCode(t[13])+String.fromCharCode(t[14]),"\x00\x00\x00"===this._iso_code&&(this._native=!0,this._iso_code="XRP"),this._type=0):1===t[0]&&(this._iso_code=String.fromCharCode(t[1])+String.fromCharCode(t[2])+String.fromCharCode(t[3]),this._type=1,this._interest_start=(t[4]<<24)+(t[5]<<16)+(t[6]<<8)+t[7],this._interest_period=s.fromIEEE754Double(t.slice(8,16)))},a.prototype.is_native=function(){return this._native},a.prototype.has_interest=function(){return 1===this._type&&!isNaN(this._interest_start)&&!isNaN(this._interest_period)},a.prototype.get_interest_at=function(t){return this.has_interest()?(t||(t=this._interest_start+31536e3),t instanceof Date&&(t=o.fromTimestamp(t.getTime())),Math.exp((t-this._interest_start)/this._interest_period)):0},a.prototype.get_interest_percentage_at=function(t,e){var r=this.get_interest_at(t,e),r=100*r-100,n=e?Math.pow(10,e):100;return Math.round(r*n)/n},a.prototype.to_json=function(t){if(!this.is_valid())return"XRP";var e,t=t||{},r=t&&t.full_name?" - "+t.full_name:"";if(t.show_interest=void 0!==t.show_interest?t.show_interest:this.has_interest(),!t.force_hex&&/^[A-Z0-9]{3}$/.test(this._iso_code)){if(e=this._iso_code+r,t.show_interest){var n=isNaN(t.decimals)?void 0:t.decimals,i=this.has_interest()?this.get_interest_percentage_at(this._interest_start+31536e3,n):0;e+=" ("+i+"%pa)"}}else e=this.to_hex(),e===a.HEX_ONE&&(e=1);return e},a.prototype.to_human=function(t){return this.to_json(t)},a.prototype.get_iso=function(){return this._iso_code},e.Currency=a
},function(t,e,r){function n(t){return h.codec.bytes.fromBits(h.hash.sha256.hash(h.codec.bytes.toBits(t)))}function i(t){return n(n(t))}function o(t,e){for(var r=0,n=e;n<t.length;n++){var i=255&t[n],o=256*r+i;t[n]=o/58,r=o%58}return r}function s(t,e){for(var r=0,n=e;n<t.length;n++){var i=255&t[n],o=58*r+i;t[n]=o/256,r=o%256}return r}function a(t,e){if(0==e.length)return[];scratch=e.slice();for(var r=0;r<scratch.length&&0==scratch[r];)++r;for(var n=new Array(2*scratch.length),i=n.length,s=r;s<scratch.length;){var a=o(scratch,s);0==scratch[s]&&++s,n[--i]=t[a]}for(;i<n.length&&n[i]==t[0];)++i;for(;--r>=0;)n[--i]=t[0];for(;i--;)n.shift();return n.join("")}function c(t,e){var r="string"==typeof e;if(0==e.length)return[];input58=new Array(e.length);for(var n=0;n<e.length;++n){if(r)var i=e.charCodeAt(n);var o=-1;if(i>=0&&128>i&&(o=t[i]),0>o)throw new Error("Illegal character "+i+" at "+n);input58[n]=o}for(var a=0;a<input58.length&&0==input58[a];)++a;out=f.arraySet(e.length,0);for(var c=out.length,u=a;u<input58.length;){var h=s(input58,u);0==input58[u]&&++u,out[--c]=h}for(;c<out.length&&0==out[c];)++c;for(c-=a;c--;)out.shift();return out}function u(t){for(var e=f.arraySet(128,-1),r=0;r<t.length;r++)e[t.charCodeAt(r)]=r;return{decode:c.bind(null,e),encode:a.bind(null,t)}}var h=r(17).sjcl,f=r(17),l=r(46),p={},d=p.alphabets={ripple:"rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz",tipple:"RPShNAF39wBUDnEGHJKLM4pQrsT7VWXYZ2bcdeCg65jkm8ofqi1tuvaxyz",bitcoin:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"};l(p,{VER_NONE:1,VER_NODE_PUBLIC:28,VER_NODE_PRIVATE:32,VER_ACCOUNT_ID:0,VER_ACCOUNT_PUBLIC:35,VER_ACCOUNT_PRIVATE:34,VER_FAMILY_GENERATOR:41,VER_FAMILY_SEED:33}),p.encoders={},Object.keys(d).forEach(function(t){p.encoders[t]=u(d[t])}),p.encode=function(t,e){return this.encoders[e||"ripple"].encode(t)},p.decode=function(t,e){if("string"!=typeof t)return void 0;try{return this.encoders[e||"ripple"].decode(t)}catch(r){return void 0}},p.verify_checksum=function(t){for(var e=i(t.slice(0,-4)).slice(0,4),r=t.slice(-4),n=!0,o=0;4>o;o++)if(e[o]!==r[o]){n=!1;break}return n},p.encode_check=function(t,e,r){var i=[].concat(t,e),o=n(n(i)).slice(0,4);return p.encode([].concat(i,o),r)},p.decode_check=function(t,e,r){var n=p.decode(e,r);if(!n||n.length<5)return 0/0;if("number"==typeof t&&n[0]!==t)return 0/0;if(Array.isArray(t)){for(var i=!1,o=0,s=t.length;s>o;o++)i|=t[o]===n[0];if(!i)return 0/0}return p.verify_checksum(n)?(n[0]=0,h.bn.fromBits(h.codec.bytes.toBits(n.slice(0,-4)))):0/0},e.Base=p},function(t,e,r){var n=r(17),i=r(46),o=r(32).UInt,s=i(function(){this._value=0/0},o);s.width=16,s.prototype=i({},o.prototype),s.prototype.constructor=s;{var a=s.HEX_ZERO="00000000000000000000000000000000",c=s.HEX_ONE="00000000000000000000000000000000";s.STR_ZERO=n.hexToString(a),s.STR_ONE=n.hexToString(c)}e.UInt128=s},function(t,e,r){var n=r(17),i=r(24),o=r(46),s=r(32).UInt,a=r(7).Base,c=o(function(){this._value=0/0,this._version_byte=void 0,this._update()},s);c.width=20,c.prototype=o({},s.prototype),c.prototype.constructor=c;{var u=(c.ACCOUNT_ZERO="rrrrrrrrrrrrrrrrrrrrrhoLvTp",c.ACCOUNT_ONE="rrrrrrrrrrrrrrrrrrrrBZbvji",c.HEX_ZERO="0000000000000000000000000000000000000000"),h=c.HEX_ONE="0000000000000000000000000000000000000001";c.STR_ZERO=n.hexToString(u),c.STR_ONE=n.hexToString(h)}c.prototype.set_version=function(t){return this._version_byte=t,this},c.prototype.get_version=function(){return this._version_byte},c.prototype.parse_json=function(t){return i.accounts&&t in i.accounts&&(t=i.accounts[t].account),"number"!=typeof t||isNaN(t)?"string"!=typeof t?this._value=0/0:"r"===t[0]?(this._value=a.decode_check(a.VER_ACCOUNT_ID,t),this._version_byte=a.VER_ACCOUNT_ID):this.parse_hex(t):(this.parse_number(t),this._version_byte=a.VER_ACCOUNT_ID),this._update(),this},c.prototype.parse_generic=function(t){return s.prototype.parse_generic.call(this,t),isNaN(this._value)&&"string"==typeof t&&"r"===t[0]&&(this._value=a.decode_check(a.VER_ACCOUNT_ID,t)),this._update(),this},c.prototype.to_json=function(t){if(t=t||{},this.is_valid()){if("number"==typeof this._version_byte){var e=a.encode_check(this._version_byte,this.to_bytes());return t.gateways&&e in t.gateways&&(e=t.gateways[e]),e}return this.to_hex()}return 0/0},e.UInt160=c},function(t,e,r){var n=r(17),i=r(46),o=r(32).UInt,s=i(function(){this._value=0/0},o);s.width=32,s.prototype=i({},o.prototype),s.prototype.constructor=s;{var a=s.HEX_ZERO="0000000000000000000000000000000000000000000000000000000000000000",c=s.HEX_ONE="0000000000000000000000000000000000000000000000000000000000000001";s.STR_ZERO=n.hexToString(a),s.STR_ONE=n.hexToString(c)}e.UInt256=s},function(t,e,r){function n(t,e){return[].concat(t,e>>24,e>>16&255,e>>8&255,255&e)}function i(t){return a.bitArray.bitSlice(a.hash.sha512.hash(a.codec.bytes.toBits(t)),0,256)}var o=r(46),s=r(17),a=s.sjcl,c=r(7).Base,u=r(32).UInt,h=(r(10).UInt256,r(9).UInt160),f=r(33).KeyPair,l=o(function(){this._curve=a.ecc.curves.k256,this._value=0/0},u);l.width=16,l.prototype=o({},u.prototype),l.prototype.constructor=l,l.prototype.parse_json=function(t){return"string"==typeof t&&t.length?"s"===t[0]?this._value=c.decode_check(c.VER_FAMILY_SEED,t):/^[0-9a-fA-f]{32}$/.test(t)?this.parse_hex(t):this.parse_passphrase(t):this._value=0/0,this},l.prototype.parse_passphrase=function(t){if("string"!=typeof t)throw new Error("Passphrase must be a string");var e=a.hash.sha512.hash(a.codec.utf8String.toBits(t)),r=a.bitArray.bitSlice(e,0,128);return this.parse_bits(r),this},l.prototype.to_json=function(){if(!this.is_valid())return 0/0;var t=c.encode_check(c.VER_FAMILY_SEED,this.to_bytes());return t},l.prototype.get_key=function(t,e){var r,o=0,s=e||1;if(!this.is_valid())throw new Error("Cannot generate keys from invalid seed!");t&&("number"==typeof t?(o=t,s=o+1):r=h.from_json(t));var c,u,l=this._curve,p=0;do c=a.bn.fromBits(i(n(this.to_bytes(),p))),p++;while(!l.r.greaterEquals(c));u=l.G.mult(c);var d,_;do{p=0;do d=a.bn.fromBits(i(n(n(u.toBytesCompressed(),o),p))),p++;while(!l.r.greaterEquals(d));if(o++,d=d.add(c).mod(l.r),_=f.from_bn_secret(d),s--<=0)throw new Error("Too many loops looking for KeyPair yielding "+r.to_json()+" from "+this.to_json())}while(r&&!_.get_address().equals(r));return _},e.Seed=l},function(t,e,r){function n(t){if(this.nodes=[],"object"!=typeof t)throw new TypeError("Missing metadata");if(!Array.isArray(t.AffectedNodes))throw new TypeError("Metadata missing AffectedNodes");t.AffectedNodes.forEach(this.addNode,this)}var i=r(46),o=r(17),s=r(9).UInt160,a=r(3).Amount;n.NODE_TYPES=["CreatedNode","ModifiedNode","DeletedNode"],n.AMOUNT_FIELDS_AFFECTING_ISSUER=["LowLimit","HighLimit","TakerPays","TakerGets"],n.ACCOUNT_FIELDS=["Account","Owner","Destination","Issuer","Target"],n.prototype.getNodeType=function(t){for(var e=null,r=0;r<n.NODE_TYPES.length;r++){var i=n.NODE_TYPES[r];if(t.hasOwnProperty(i)){e=i;break}}return e},n.prototype.isAccountField=function(t){return-1!==n.ACCOUNT_FIELDS.indexOf(t)},n.prototype.addNode=function(t){this._affectedAccounts=void 0,this._affectedBooks=void 0;var e={};(e.nodeType=this.getNodeType(t))&&(t=t[e.nodeType],e.diffType=e.nodeType,e.entryType=t.LedgerEntryType,e.ledgerIndex=t.LedgerIndex,e.fields=i({},t.PreviousFields,t.NewFields,t.FinalFields),e.fieldsPrev=t.PreviousFields||{},e.fieldsNew=t.NewFields||{},e.fieldsFinal=t.FinalFields||{},this.nodes.push(e))},n.prototype.getNodes=function(t){return"object"==typeof t?this.nodes.filter(function(e){return t.nodeType&&t.nodeType!==e.nodeType?!1:t.entryType&&t.entryType!==e.entryType?!1:t.bookKey&&t.bookKey!==e.bookKey?!1:!0}):this.nodes},n.prototype.getAffectedAccounts=function(){if(this._affectedAccounts)return this._affectedAccounts;for(var t=[],e=0;e<this.nodes.length;e++){var r=this.nodes[e],i="CreatedNode"===r.nodeType?r.fieldsNew:r.fieldsFinal;for(var c in i){var u=i[c];if(this.isAccountField(c)&&s.is_valid(u))t.push(u);else if(~n.AMOUNT_FIELDS_AFFECTING_ISSUER.indexOf(c)){var h=a.from_json(u),f=h.issuer();f.is_valid()&&!f.is_zero()&&t.push(f.to_json())}}}return this._affectedAccounts=o.arrayUnique(t),this._affectedAccounts},n.prototype.getAffectedBooks=function(){if(this._affectedBooks)return this._affectedBooks;for(var t=[],e=0;e<this.nodes.length;e++){var r=this.nodes[e];if("Offer"===r.entryType){var n=a.from_json(r.fields.TakerGets),i=a.from_json(r.fields.TakerPays),s=n.currency().to_json(),c=i.currency().to_json();"XRP"!==s&&(s+="/"+n.issuer().to_json()),"XRP"!==c&&(c+="/"+i.issuer().to_json());var u=s+":"+c;r.bookKey=u,t.push(u)}}return this._affectedBooks=o.arrayUnique(t),this._affectedBooks},["forEach","map","filter","every","some","reduce"].forEach(function(t){n.prototype[t]=function(){return Array.prototype[t].apply(this.nodes,arguments)}}),n.prototype.each=n.prototype.forEach,e.Meta=n},function(t,e,r){(function(t){function n(t){var e=t.slice(2),r=s.findIndex(e,function(t){return"0"!==t});return r>=0?e.slice(r):"0"}function i(e){if(Array.isArray(e)||t&&t.isBuffer(e))this.buffer=e;else if("string"==typeof e)this.buffer=p.codec.bytes.fromBits(p.codec.hex.toBits(e));else{if(e)throw new Error("Invalid buffer passed.");this.buffer=[]}this.pointer=0}function o(t){return function(e){var r=this.pointer,n=r+e;if(n>this.buffer.length)throw new Error("Buffer length exceeded");var i=this.buffer.slice(r,n);return t&&(this.pointer=n),i}}var s=r(45),a=r(40),c=r(46),u=r(16),h=r(23),f=r(34).Crypt,l=r(17),p=l.sjcl,d={};Object.keys(u.tx).forEach(function(t){d[u.tx[t][0]]=t});var _={};Object.keys(u.ledger).forEach(function(t){_[u.ledger[t][0]]=t});var v={};Object.keys(u.ter).forEach(function(t){v[u.ter[t]]=t}),i.from_json=function(t){t=c(!0,{},t);var e,r=new i;if("number"==typeof t.TransactionType&&(t.TransactionType=i.lookup_type_tx(t.TransactionType),!t.TransactionType))throw new Error("Transaction type ID is invalid.");if("number"==typeof t.LedgerEntryType&&(t.LedgerEntryType=i.lookup_type_le(t.LedgerEntryType),!t.LedgerEntryType))throw new Error("LedgerEntryType ID is invalid.");if("string"==typeof t.TransactionType){if(e=u.tx[t.TransactionType],!Array.isArray(e))throw new Error("Transaction type is invalid");e=e.slice(),t.TransactionType=e.shift()}else if("string"==typeof t.LedgerEntryType){if(e=u.ledger[t.LedgerEntryType],!Array.isArray(e))throw new Error("LedgerEntryType is invalid");e=e.slice(),t.LedgerEntryType=e.shift()}else{if("object"!=typeof t.AffectedNodes)throw new Error("Object to be serialized must contain either TransactionType, LedgerEntryType or AffectedNodes.");e=u.metadata}return i.check_no_missing_fields(e,t),r.serialize(e,t),r},i.check_no_missing_fields=function(t,e){for(var r=[],n=t.length-1;n>=0;n--){var o=t[n],s=o[0],a=o[1];u.REQUIRED===a&&void 0===e[s]&&r.push(s)}if(r.length>0){var c;throw c=void 0!==e.TransactionType?i.lookup_type_tx(e.TransactionType):null!=e.LedgerEntryType?i.lookup_type_le(e.LedgerEntryType):"TransactionMetaData",new Error(c+" is missing fields: "+JSON.stringify(r))}},i.prototype.append=function(t){t instanceof i&&(t=t.buffer),this.buffer=this.buffer.concat(t),this.pointer+=t.length},i.prototype.resetPointer=function(){this.pointer=0},i.prototype.read=o(!0),i.prototype.peek=o(!1),i.prototype.to_bits=function(){return p.codec.bytes.toBits(this.buffer)},i.prototype.to_hex=function(){return p.codec.hex.fromBits(this.to_bits()).toUpperCase()},i.prototype.to_json=function(){var t=this.pointer;this.resetPointer();for(var e={};this.pointer<this.buffer.length;){var r=h.parse(this),n=r[0],o=r[1];e[n]=i.jsonify_structure(o,n)}return this.pointer=t,e},i.jsonify_structure=function(t,e){var r;switch(typeof t){case"number":switch(e){case"LedgerEntryType":r=_[t];break;case"TransactionResult":r=v[t];break;case"TransactionType":r=d[t];break;default:r=t}break;case"object":if(null===t)break;if("function"==typeof t.to_json)r=t.to_json();else if(t instanceof p.bn)r=("0000000000000000"+n(t.toString()).toUpperCase()).slice(-16);else{r=new t.constructor;for(var o=Object.keys(t),s=0,a=o.length;a>s;s++){var c=o[s];r[c]=i.jsonify_structure(t[c],c)}}break;default:r=t}return r},i.prototype.serialize=function(t,e){h.Object.serialize(this,e,!0)},i.prototype.hash=function(t){var e=new i;"undefined"!=typeof t&&h.Int32.serialize(e,t),e.append(this.buffer);var r=p.codec.bytes.toBits(e.buffer);return f.hashSha512Half(r)},i.prototype.signing_hash=i.prototype.hash,i.prototype.serialize_field=function(t,e){{var r=t[0],n=t[1];t[2],h[t[3]]}if("undefined"!=typeof e[r])try{h.serialize(this,r,e[r])}catch(i){throw i.message='Error serializing "'+r+'": '+i.message,i}else if(n===u.REQUIRED)throw new Error("Missing required field "+r)},i.get_field_header=function(t,e){var r=[0];return t>15?r.push(255&t):r[0]+=(15&t)<<4,e>15?r.push(255&e):r[0]+=15&e,r},i.sort_typedef=function(t){function e(t,e){return t[3]!==e[3]?h[t[3]].id-h[e[3]].id:t[2]-e[2]}return a(Array.isArray(t)),t.sort(e)},i.lookup_type_tx=function(t){return a.strictEqual(typeof t,"number"),d[t]},i.lookup_type_le=function(t){return a("number"==typeof t),_[t]},e.SerializedObject=i}).call(e,r(41).Buffer)},function(t,e,r){function n(t,e){switch(typeof t){case"object":o(this,t);break;case"string":this.result=t,this.result_message=e}this.engine_result=this.result=this.result||this.engine_result||this.error||"Error",this.engine_result_message=this.result_message=this.result_message||this.engine_result_message||this.error_message||"Error",this.result_message=this.message=this.result_message;var r;Error.captureStackTrace?Error.captureStackTrace(this,t||this):(r=(new Error).stack)&&(this.stack=r)}var i=r(43),o=r(46);i.inherits(n,Error),n.prototype.name="RippleError",e.RippleError=n},function(t,e,r){var n=r(49),i=(r(42),r(17).sjcl),o=r(1).Remote,s=r(11).Seed,a=r(33).KeyPair,c=r(4).Account,u=r(9).UInt160,h={};h.HASH_FUNCTION=i.hash.sha512.hash,h.MAGIC_BYTES="Ripple Signed Message:\n";var f=/^[0-9a-fA-F]+$/,l=/^([A-Za-z0-9\+]{4})*([A-Za-z0-9\+]{2}==)|([A-Za-z0-9\+]{3}=)?$/;h.signMessage=function(t,e,r){return h.signHash(h.HASH_FUNCTION(h.MAGIC_BYTES+t),e,r)},h.signHash=function(t,e,r){if("string"==typeof t&&/^[0-9a-fA-F]+$/.test(t)&&(t=i.codec.hex.toBits(t)),"object"!=typeof t||t.length<=0||"number"!=typeof t[0])throw new Error("Hash must be a bitArray or hex-encoded string");e instanceof i.ecc.ecdsa.secretKey||(e=s.from_json(e).get_key(r)._secret);var n=e.signWithRecoverablePublicKey(t),o=i.codec.base64.fromBits(n);return o},h.verifyMessageSignature=function(t,e,r){return"string"!=typeof t.message?r(new Error("Data object must contain message field to verify signature")):(t.hash=h.HASH_FUNCTION(h.MAGIC_BYTES+t.message),h.verifyHashSignature(t,e,r))},h.verifyHashSignature=function(t,e,r){function s(t){var e;try{e=i.ecc.ecdsa.publicKey.recoverFromSignature(p,_)}catch(r){return t(r)}e?t(null,e):t(new Error("Could not recover public key from signature"))}function h(t,r){var n=new a;n._pubkey=t;var i=n.to_hex_pub(),o=new c(e,d);o.publicKeyIsActive(i,r)}var p,d,_;if("function"!=typeof r)throw new Error("Must supply callback function");if(p=t.hash,p&&"string"==typeof p&&f.test(p)&&(p=i.codec.hex.toBits(p)),"object"!=typeof p||p.length<=0||"number"!=typeof p[0])return r(new Error("Hash must be a bitArray or hex-encoded string"));if(d=t.account||t.address,!d||!u.from_json(d).is_valid())return r(new Error("Account must be a valid ripple address"));if(_=t.signature,"string"!=typeof _||!l.test(_))return r(new Error("Signature must be a Base64-encoded string"));if(_=i.codec.base64.toBits(_),!(e instanceof o)||"online"!==e.state)return r(new Error("Must supply connected Remote to verify signature"));var v=[s,h];n.waterfall(v,r)},e.Message=h},function(t,e){var r=(e.types=[void 0,"Int16","Int32","Int64","Hash128","Hash256","Amount","VL","Account",void 0,void 0,void 0,void 0,void 0,"Object","Array","Int8","Hash160","PathSet","Vector256"],e.fields={1:{1:"LedgerEntryType",2:"TransactionType"},2:{2:"Flags",3:"SourceTag",4:"Sequence",5:"PreviousTxnLgrSeq",6:"LedgerSequence",7:"CloseTime",8:"ParentCloseTime",9:"SigningTime",10:"Expiration",11:"TransferRate",12:"WalletSize",13:"OwnerCount",14:"DestinationTag",16:"HighQualityIn",17:"HighQualityOut",18:"LowQualityIn",19:"LowQualityOut",20:"QualityIn",21:"QualityOut",22:"StampEscrow",23:"BondAmount",24:"LoadFee",25:"OfferSequence",26:"FirstLedgerSequence",27:"LastLedgerSequence",28:"TransactionIndex",29:"OperationLimit",30:"ReferenceFeeUnits",31:"ReserveBase",32:"ReserveIncrement",33:"SetFlag",34:"ClearFlag"},3:{1:"IndexNext",2:"IndexPrevious",3:"BookNode",4:"OwnerNode",5:"BaseFee",6:"ExchangeRate",7:"LowNode",8:"HighNode"},4:{1:"EmailHash"},5:{1:"LedgerHash",2:"ParentHash",3:"TransactionHash",4:"AccountHash",5:"PreviousTxnID",6:"LedgerIndex",7:"WalletLocator",8:"RootIndex",9:"AccountTxnID",16:"BookDirectory",17:"InvoiceID",18:"Nickname",19:"Amendment",20:"TicketID"},6:{1:"Amount",2:"Balance",3:"LimitAmount",4:"TakerPays",5:"TakerGets",6:"LowLimit",7:"HighLimit",8:"Fee",9:"SendMax",16:"MinimumOffer",17:"RippleEscrow",18:"DeliveredAmount"},7:{1:"PublicKey",2:"MessageKey",3:"SigningPubKey",4:"TxnSignature",5:"Generator",6:"Signature",7:"Domain",8:"FundCode",9:"RemoveCode",10:"ExpireCode",11:"CreateCode",12:"MemoType",13:"MemoData",14:"MemoFormat"},8:{1:"Account",2:"Owner",3:"Destination",4:"Issuer",7:"Target",8:"RegularKey"},14:{1:void 0,2:"TransactionMetaData",3:"CreatedNode",4:"DeletedNode",5:"ModifiedNode",6:"PreviousFields",7:"FinalFields",8:"NewFields",9:"TemplateEntry",10:"Memo"},15:{1:void 0,2:"SigningAccounts",3:"TxnSignatures",4:"Signatures",5:"Template",6:"Necessary",7:"Sufficient",8:"AffectedNodes",9:"Memos"},16:{1:"CloseResolution",2:"TemplateEntryType",3:"TransactionResult"},17:{1:"TakerPaysCurrency",2:"TakerPaysIssuer",3:"TakerGetsCurrency",4:"TakerGetsIssuer"},18:{1:"Paths"},19:{1:"Indexes",2:"Hashes",3:"Amendments"}}),n=e.fieldsInverseMap={};Object.keys(r).forEach(function(t){Object.keys(r[t]).forEach(function(e){n[r[t][e]]=[Number(t),Number(e)]})});var i=e.REQUIRED=0,o=e.OPTIONAL=1,s=e.DEFAULT=2,a=[["TransactionType",i],["Flags",o],["SourceTag",o],["LastLedgerSequence",o],["Account",i],["Sequence",i],["Fee",i],["OperationLimit",o],["SigningPubKey",i],["TxnSignature",o]];e.tx={AccountSet:[3].concat(a,[["EmailHash",o],["WalletLocator",o],["WalletSize",o],["MessageKey",o],["Domain",o],["TransferRate",o]]),TrustSet:[20].concat(a,[["LimitAmount",o],["QualityIn",o],["QualityOut",o]]),OfferCreate:[7].concat(a,[["TakerPays",i],["TakerGets",i],["Expiration",o]]),OfferCancel:[8].concat(a,[["OfferSequence",i]]),SetRegularKey:[5].concat(a,[["RegularKey",i]]),Payment:[0].concat(a,[["Destination",i],["Amount",i],["SendMax",o],["Paths",s],["InvoiceID",o],["DestinationTag",o]]),Contract:[9].concat(a,[["Expiration",i],["BondAmount",i],["StampEscrow",i],["RippleEscrow",i],["CreateCode",o],["FundCode",o],["RemoveCode",o],["ExpireCode",o]]),RemoveContract:[10].concat(a,[["Target",i]]),EnableFeature:[100].concat(a,[["Feature",i]]),SetFee:[101].concat(a,[["Features",i],["BaseFee",i],["ReferenceFeeUnits",i],["ReserveBase",i],["ReserveIncrement",i]])};var c=[["LedgerIndex",o],["LedgerEntryType",i],["Flags",i]];e.ledger={AccountRoot:[97].concat(c,[["Sequence",i],["PreviousTxnLgrSeq",i],["TransferRate",o],["WalletSize",o],["OwnerCount",i],["EmailHash",o],["PreviousTxnID",i],["AccountTxnID",o],["WalletLocator",o],["Balance",i],["MessageKey",o],["Domain",o],["Account",i],["RegularKey",o]]),Contract:[99].concat(c,[["PreviousTxnLgrSeq",i],["Expiration",i],["BondAmount",i],["PreviousTxnID",i],["Balance",i],["FundCode",o],["RemoveCode",o],["ExpireCode",o],["CreateCode",o],["Account",i],["Owner",i],["Issuer",i]]),DirectoryNode:[100].concat(c,[["IndexNext",o],["IndexPrevious",o],["ExchangeRate",o],["RootIndex",i],["Owner",o],["TakerPaysCurrency",o],["TakerPaysIssuer",o],["TakerGetsCurrency",o],["TakerGetsIssuer",o],["Indexes",i]]),EnabledFeatures:[102].concat(c,[["Features",i]]),FeeSettings:[115].concat(c,[["ReferenceFeeUnits",i],["ReserveBase",i],["ReserveIncrement",i],["BaseFee",i],["LedgerIndex",o]]),GeneratorMap:[103].concat(c,[["Generator",i]]),LedgerHashes:[104].concat(c,[["LedgerEntryType",i],["Flags",i],["FirstLedgerSequence",o],["LastLedgerSequence",o],["LedgerIndex",o],["Hashes",i]]),Nickname:[110].concat(c,[["LedgerEntryType",i],["Flags",i],["LedgerIndex",o],["MinimumOffer",o],["Account",i]]),Offer:[111].concat(c,[["LedgerEntryType",i],["Flags",i],["Sequence",i],["PreviousTxnLgrSeq",i],["Expiration",o],["BookNode",i],["OwnerNode",i],["PreviousTxnID",i],["LedgerIndex",o],["BookDirectory",i],["TakerPays",i],["TakerGets",i],["Account",i]]),RippleState:[114].concat(c,[["LedgerEntryType",i],["Flags",i],["PreviousTxnLgrSeq",i],["HighQualityIn",o],["HighQualityOut",o],["LowQualityIn",o],["LowQualityOut",o],["LowNode",o],["HighNode",o],["PreviousTxnID",i],["LedgerIndex",o],["Balance",i],["LowLimit",i],["HighLimit",i]])},e.metadata=[["TransactionIndex",i],["TransactionResult",i],["AffectedNodes",i]],e.ter={tesSUCCESS:0,tecCLAIM:100,tecPATH_PARTIAL:101,tecUNFUNDED_ADD:102,tecUNFUNDED_OFFER:103,tecUNFUNDED_PAYMENT:104,tecFAILED_PROCESSING:105,tecDIR_FULL:121,tecINSUF_RESERVE_LINE:122,tecINSUF_RESERVE_OFFER:123,tecNO_DST:124,tecNO_DST_INSUF_XRP:125,tecNO_LINE_INSUF_RESERVE:126,tecNO_LINE_REDUNDANT:127,tecPATH_DRY:128,tecUNFUNDED:129,tecMASTER_DISABLED:130,tecNO_REGULAR_KEY:131,tecOWNERS:132,tecNO_ISSUER:133,tecNO_AUTH:134,tecNO_LINE:135,tecINSUFF_FEE:136,tecFROZEN:137,tecNO_TARGET:138,tecNO_PERMISSION:139,tecNO_ENTRY:140,tecINSUFFICIENT_RESERVE:141}},function(t,e,r){function n(t){for(var e=t.toPrecision(16).replace(/\./,"").replace(/e.*/,"").replace(/^0*/,"");e.length<16;)e+="0";return e}function i(t,e){return function(){console.log("%s: %s",i,arguments.toString),e(arguments)}}function o(t,e){for(var r=new Array(t),n=0;t>n;n++)r[n]=e;return r}function s(t){var e=[],r=0;for(t.length%2&&(e.push(String.fromCharCode(parseInt(t.substring(0,1),16))),r=1);r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substring(r,r+2),16)));return e.join("")}function a(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);e+=16>n?"0"+n.toString(16):n.toString(16)}return e}function c(t){for(var e=new Array(t.length),r=0;r<e.length;r+=1)e[r]=t.charCodeAt(r);return e}function u(t){return c(s(t))}function h(t){return t.map(function(t){var e=t.toString(16);return e.length>1?e:"0"+e}).join("")}function f(t,e,r){var n=[],i=0,o=t.length;for(r&&(i=t.length%e,i&&n.push(t.slice(0,i)));o>i;i+=e)n.push(t.slice(i,e+i));return n}function l(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:"."))}function p(t){for(var e={},r=[],n=0,i=t.length;i>n;n++){var o=t[n];e[o]||(r.push(o),e[o]=!0)}return r}function d(t){return 1e3*(t+946684800)}function _(t){return t instanceof Date&&(t=t.getTime()),Math.round(t/1e3)-946684800}e.time={fromRipple:d,toRipple:_},e.trace=i,e.arraySet=o,e.hexToString=s,e.hexToArray=u,e.stringToArray=c,e.stringToHex=a,e.arrayToHex=h,e.chunkString=f,e.assert=l,e.arrayUnique=p,e.toTimestamp=d,e.fromTimestamp=_,e.getMantissaDecimalString=n,e.sjcl=r(35)},function(t,e,r){function n(t,e){function r(){var t=i._checkActivity.bind(i);i._activityInterval=setInterval(t,1e3)}a.call(this);var i=this;if("string"==typeof e){var c=o.parse(e);e={host:c.hostname,port:c.port,secure:"ws:"===c.protocol?!1:!0}}if("object"!=typeof e)throw new TypeError("Server configuration is not an Object");if(!n.DOMAIN_RE.test(e.host))throw new Error('Server host is malformed, use "host" and "port" server configuration');if(!(e.port=Number(e.port)))throw new TypeError("Server port must be a number");if(e.port<1||e.port>65535)throw new TypeError('Server "port" must be an integer in range 1-65535');"boolean"!=typeof e.secure&&(e.secure=!0),this._remote=t,this._opts=e,this._ws=void 0,this._connected=!1,this._shouldConnect=!1,this._state="offline",this._ledgerRanges=new u,this._ledgerMap=s({max:200}),this._id=0,this._retry=0,this._requests={},this._load_base=256,this._load_factor=256,this._fee=10,this._fee_ref=10,this._fee_base=10,this._reserve_base=void 0,this._reserve_inc=void 0,this._fee_cushion=this._remote.fee_cushion,this._lastLedgerIndex=0/0,this._lastLedgerClose=0/0,this._score=0,this._scoreWeights={ledgerclose:5,response:1},this._pubkey_node="",this._url=this._opts.url=(this._opts.secure?"wss://":"ws://")+this._opts.host+":"+this._opts.port,this.on("message",function(t){i._handleMessage(t)}),this.on("response_subscribe",function(t){i._handleResponseSubscribe(t)}),this.on("disconnect",function(){clearInterval(i._activityInterval),i.once("ledger_closed",r)}),this.once("ledger_closed",r),this._remote.on("ledger_closed",function(t){i._updateScore("ledgerclose",t)}),this.on("response_ping",function(t,e){i._updateScore("response",e)}),this.on("load_changed",function(t){i._updateScore("loadchange",t)}),this.on("connect",function(){i.requestServerID()})}var i=r(43),o=r(44),s=r(48),a=r(39).EventEmitter,c=r(3).Amount,u=r(22).RangeSet,h=r(28).internal.sub("server");i.inherits(n,a),n.DOMAIN_RE=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|[-_]){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|[-_]){0,61}[0-9A-Za-z])?)*\.?$/,n.TLS_ERRORS=["UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"],n.onlineStates=["syncing","tracking","proposing","validating","full"],n.websocketConstructor=function(){return r(38)},n.prototype._setState=function(t){if(t!==this._state)switch(this._remote.trace&&h.info(this.getServerID(),"set_state:",t),this._state=t,this.emit("state",t),t){case"online":this._connected=!0,this._retry=0,this.emit("connect");break;case"offline":this._connected=!1,this.emit("disconnect")}},n.prototype._checkActivity=function(){if(this.isConnected()&&!isNaN(this._lastLedgerClose)){var t=Date.now()-this._lastLedgerClose;t>25e3&&(this._remote.trace&&h.info(this.getServerID(),"reconnect: activity delta:",t),this.reconnect())}},n.prototype.requestServerID=function(){var t=this;if(!this._pubkey_node){this.on("response_server_info",function(e){try{t._pubkey_node=e.info.pubkey_node}catch(r){}});var e=this._remote.requestServerInfo();e.on("error",function(){}),this._request(e)}},n.prototype._updateScore=function(t,e){if(this.isConnected()){var r=this._scoreWeights[t]||1;switch(t){case"ledgerclose":var n=e.ledger_index-this._lastLedgerIndex;n>0&&(this._score+=r*n);break;case"response":var n=Math.floor((Date.now()-e.time)/200);this._score+=r*n;break;case"loadchange":this._fee=Number(this._computeFee(10))}this._score>1e3&&(this._remote.trace&&h.info(this.getServerID(),"reconnect: score:",this._score),this.reconnect())}},n.prototype.getRemoteAddress=n.prototype._remoteAddress=function(){var t;try{t=this._ws._socket.remoteAddress}catch(e){}return t},n.prototype.getHostID=n.prototype.getServerID=function(){return this._url+" ("+(this._pubkey_node?this._pubkey_node:"")+")"},n.prototype.disconnect=function(){var t=this;return this.isConnected()?(this._lastLedgerIndex=0/0,this._lastLedgerClose=0/0,this._score=0,this._shouldConnect=!1,this._ledgerRanges.reset(),this._ledgerMap.reset(),this._setState("offline"),void(this._ws&&this._ws.close())):void this.once("socket_open",function(){t.disconnect()})},n.prototype.reconnect=function(){function t(){e._shouldConnect=!0,e._retry=0,e.connect()}var e=this;this._ws&&this._shouldConnect&&(this.isConnected()?(this.once("disconnect",t),this.disconnect()):t())},n.prototype.connect=function(){var t=this,e=n.websocketConstructor();if(!e)throw new Error("No websocket support detected!");if(!this.isConnected()){this._ws&&this._ws.close(),this._remote.trace&&h.info(this.getServerID(),"connect");var r=this._ws=new e(this._opts.url);this._shouldConnect=!0,t.emit("connecting"),r.onmessage=function(e){t.emit("message",e.data)},r.onopen=function(){r===t._ws&&(t.emit("socket_open"),t._request(t._remote._serverPrepareSubscribe(t)))},r.onerror=function(e){if(r===t._ws){if(t.emit("socket_error"),t._remote.trace&&h.info(t.getServerID(),"onerror:",e.data||e),-1!==n.TLS_ERRORS.indexOf(e.message))throw e;t._handleClose()}},r.onclose=function(){r===t._ws&&(t._remote.trace&&h.info(t.getServerID(),"onclose:",r.readyState),t._handleClose())}}},n.prototype._retryConnect=function(){function t(){e._shouldConnect&&(e._remote.trace&&h.info(e.getServerID(),"retry",e._retry),e.connect())}var e=this;this._retry+=1;var r=this._retry<40?50:this._retry<100?1e3:this._retry<160?1e4:3e4;this._retryTimer=setTimeout(t,r)},n.prototype._handleClose=function(){function t(){}var e=this._ws;e.onopen=e.onerror=e.onclose=e.onmessage=t,this.emit("socket_close"),this._setState("offline"),this._shouldConnect&&this._retryConnect()},n.prototype._handleMessage=function(t){try{t=JSON.parse(t)}catch(e){}if(!n.isValidMessage(t))return void this.emit("unexpected",t);switch(t.type){case"ledgerClosed":this._handleLedgerClosed(t);break;case"serverStatus":this._handleServerStatus(t);break;case"response":this._handleResponse(t);break;case"path_find":this._handlePathFind(t)}},n.prototype._handleLedgerClosed=function(t){this._lastLedgerIndex=t.ledger_index,this._lastLedgerClose=Date.now(),this._ledgerRanges.add(t.ledger_index),this._ledgerMap.set(t.ledger_hash,t.ledger_index),this.emit("ledger_closed",t)},n.prototype._handleServerStatus=function(t){var e=~n.onlineStates.indexOf(t.server_status);if(this._setState(e?"online":"offline"),n.isLoadStatus(t)){this.emit("load",t,this),this._remote.emit("load",t,this);var r=t.load_base!==this._load_base||t.load_factor!==this._load_factor;r&&(this._load_base=t.load_base,this._load_factor=t.load_factor,this.emit("load_changed",t,this),this._remote.emit("load_changed",t,this))}},n.prototype._handleResponse=function(t){var e=this._requests[t.id];if(delete this._requests[t.id],!e)return void(this._remote.trace&&h.info(this.getServerID(),"UNEXPECTED:",t));if("success"===t.status){this._remote.trace&&h.info(this.getServerID(),"response:",t);var r=e.message.command,n=t.result,i="response_"+r;e.emit("success",n),[this,this._remote].forEach(function(r){r.emit(i,n,e,t)})}else t.error&&(this._remote.trace&&h.info(this.getServerID(),"error:",t),e.emit("error",{error:"remoteError",error_message:"Remote reported an error.",remote:t}))},n.prototype._handlePathFind=function(t){this._remote.trace&&h.info(this.getServerID(),"path_find:",t)},n.prototype._handleResponseSubscribe=function(t){if(!this.isConnected()){if(!this._remote.allow_partial_history&&!n.hasFullLedgerHistory(t))return this.reconnect();t.pubkey_node&&(this._pubkey_node=t.pubkey_node),n.isLoadStatus(t)&&(this._load_base=t.load_base||256,this._load_factor=t.load_factor||256,this._fee_ref=t.fee_ref||10,this._fee_base=t.fee_base||10,this._reserve_base=t.reserve_base,this._reserve_inc=t.reserve_inc),t.validated_ledgers&&this._ledgerRanges.add(t.validated_ledgers),~n.onlineStates.indexOf(t.server_status)&&this._setState("online")}},n.hasFullLedgerHistory=function(t){return"object"==typeof t&&"full"===t.server_status&&"string"==typeof t.validated_ledgers&&2===t.validated_ledgers.split("-").length},n.isValidMessage=function(t){return"object"==typeof t&&"string"==typeof t.type},n.isLoadStatus=function(t){return"object"==typeof t&&"number"==typeof t.load_base&&"number"==typeof t.load_factor},n.prototype._sendMessage=function(t){this._ws&&(this._remote.trace&&h.info(this.getServerID(),"request:",t),this._ws.send(JSON.stringify(t)))},n.prototype._request=function(t){function e(){r._sendMessage(t.message)}var r=this;if(!this._ws)return void(this._remote.trace&&h.info(this.getServerID(),"request: DROPPING:",t.message));
t.server=this,t.message.id=this._id,t.time=Date.now(),this._requests[t.message.id]=t,this._id++;var n=1===this._ws.readyState,i=t&&"subscribe"===t.message.command;this.isConnected()||n&&i?e():this.once("connect",e)},n.prototype.isConnected=n.prototype._isConnected=function(){return this._connected},n.prototype._computeFee=function(t){if(isNaN(t))throw new Error("Invalid argument");return this._feeTx(Number(t)).to_json()},n.prototype._feeTx=function(t){var e=this._feeTxUnit();return c.from_json(String(Math.ceil(t*e)))},n.prototype._feeTxUnit=function(){var t=this._fee_base/this._fee_ref;return t*=this._load_factor/this._load_base,t*=this._fee_cushion},n.prototype._reserve=function(t){var e=c.from_json(String(this._reserve_base)),r=c.from_json(String(this._reserve_inc)),n=t||0;if(0>n)throw new Error("Owner count must not be negative.");return e.add(r.product_human(n))},n.prototype.hasLedger=function(t){var e=!1;return"string"==typeof t&&/^[A-F0-9]{64}$/.test(t)?e=this._ledgerMap.has(t):null==t||isNaN(t)||(e=this._ledgerRanges.has(t)),e},n.prototype.getLastLedger=n.prototype.getLastLedgerIndex=function(){return this._lastLedgerIndex},e.Server=n},function(t,e,r){var n=r(17).sjcl,i=r(50)({sjcl:n});t.exports=i},function(t,e,r){function n(){this.ledger_json={}}{var i=r(5).Transaction,o=r(36).SHAMap,s=r(36).SHAMapTreeNode,a=r(13).SerializedObject,c=r(23),u=r(9).UInt160,h=r(6).Currency,c=r(23);r(17).sjcl,r(34).Crypt}n.from_json=function(t){var e=new n;return e.parse_json(t),e},n.space=r(37),n.calcAccountRootEntryHash=n.prototype.calcAccountRootEntryHash=function(t){t=u.from_json(t);var e=new a;return e.append([0,n.space.account.charCodeAt(0)]),e.append(t.to_bytes()),e.hash()},n.calcOfferEntryHash=n.prototype.calcOfferEntryHash=function(t,e){t=u.from_json(t),e=parseInt(e);var r=new a;return r.append([0,n.space.offer.charCodeAt(0)]),r.append(t.to_bytes()),c.Int32.serialize(r,e),r.hash()},n.calcRippleStateEntryHash=n.prototype.calcRippleStateEntryHash=function(t,e,r){if(r=h.from_json(r),t=u.from_json(t),e=u.from_json(e),!t.is_valid())throw new Error("Invalid first account");if(!e.is_valid())throw new Error("Invalid second account");if(!r.is_valid())throw new Error("Invalid currency");if(t.to_bn().greaterEquals(e.to_bn())){var i=e;e=t,t=i}var o=new a;return o.append([0,n.space.rippleState.charCodeAt(0)]),o.append(t.to_bytes()),o.append(e.to_bytes()),o.append(r.to_bytes()),o.hash()},n.prototype.parse_json=function(t){this.ledger_json=t},n.prototype.calc_tx_hash=function(){var t=new o;return this.ledger_json.transactions.forEach(function(e){var r=i.from_json(e),n=a.from_json(e.metaData),o=new a;c.VariableLength.serialize(o,r.serialize().to_hex()),c.VariableLength.serialize(o,n.to_hex()),t.add_item(r.hash(),o,s.TYPE_TRANSACTION_MD)}),t.hash()},n.prototype.calc_account_hash=function(t){var e,r=new o;if(this.ledger_json.accountState.forEach(function(n){var i=a.from_json(n);if(null!=t&&t.sanity_test)try{var o=i.to_json();i=a.from_json(o)}catch(c){console.log("account state item: ",n),console.log("to_json() ",o),console.log("exception: ",c),e=!0}r.add_item(n.index,i,s.TYPE_ACCOUNT_STATE)}),e)throw new Error("There were errors with sanity_test");return r.hash()},e.Ledger=n},function(t,e,r){function n(){this._queue=[],this._idCache=i({max:200}),this._sequenceCache=i({max:200})}var i=r(48),o=r(5).Transaction;n.prototype.addReceivedSequence=function(t){this._sequenceCache.set(String(t),!0)},n.prototype.hasSequence=function(t){return this._sequenceCache.has(String(t))},n.prototype.addReceivedId=function(t,e){this._idCache.set(t,e)},n.prototype.getReceived=function(t){return this._idCache.get(t)},n.prototype.getSubmission=function(t){for(var e,r=void 0,n=0;e=this._queue[n];n++)if(~e.submittedIDs.indexOf(t)){r=e;break}return r},n.prototype.getMinLedger=function(){for(var t,e=1/0,r=0;t=this._queue[r];r++)t.initialSubmitIndex<e&&(e=t.initialSubmitIndex);return isFinite(e)||(e=-1),e},n.prototype.remove=function(t){var e=this._queue.length;if("string"==typeof t&&(t=this.getSubmission(t)),t instanceof o)for(;e--;)if(this._queue[e]===t){this._queue.splice(e,1);break}},n.prototype.push=function(t){this._queue.push(t)},n.prototype.forEach=function(t){this._queue.forEach(t)},n.prototype.length=n.prototype.getLength=function(){return this._queue.length},e.TransactionQueue=n},function(t,e,r){function n(){this._ranges=[]}var i=r(40),o=r(45);n.prototype.add=function(t){if(i("number"!=typeof t||!isNaN(t),"Ledger range malformed"),t=String(t).split(","),t.length>1)return t.forEach(this.add,this);t=t[0].split("-").map(Number);var e={start:t[0],end:t[1===t.length?0:1]};i(e.start<=e.end,"Ledger range malformed");var r=o.sortedIndex(this._ranges,e,function(t){return t.start});this._ranges.splice(r,0,e)},n.prototype.has=n.prototype.contains=function(t){return i(null!=t&&!isNaN(t),"Ledger must be a number"),t=Number(t),this._ranges.some(function(e){return t>=e.start&&t<=e.end})},n.prototype.reset=function(){this._ranges=[]},e.RangeSet=n},function(t,e,r){function n(t){return"number"==typeof t&&isFinite(t)}function i(t){return"string"==typeof t}function o(t){return i(t)&&/^[0-9A-F]{0,16}$/i.test(t)}function s(t,e,r){var n=b.codec.bytes.fromBits(e);r||I.serialize_varint(t,n.length),t.append(n)}function a(t,e,r){s(t,b.codec.hex.toBits(e),r)}function c(t){return b.codec.hex.fromBits(b.codec.bytes.toBits(t)).toUpperCase()}function u(t){var e=b.codec.utf8String.toBits(t);return b.codec.hex.fromBits(e).toUpperCase()}function h(t){return b.codec.utf8String.fromBits(b.codec.hex.toBits(t))}function f(t,e){if(!n(t))throw new Error("Value is not a number",e);if(0>t||t>=Math.pow(256,e))throw new Error("Value out of bounds ");for(var r=[],i=0;e>i;i++)r.unshift(t>>>8*i&255);return r}function l(t,e){var r=0;if(e>4)throw new Error("This function only supports up to four bytes.");for(var n=0;e>n;n++){var i=t.read(1)[0];r+=i<<8*(e-n-1)}return r>>>0}function p(t,r,n){var i=g.fieldsInverseMap[r],o=i[0],s=i[1],a=(16>o?o<<4:0)|(16>s?s:0);"LedgerEntryType"===r&&"string"==typeof n&&(n=g.ledger[n][0]),"TransactionResult"===r&&"string"==typeof n&&(n=g.ter[n]),R.serialize(t,a),o>=16&&R.serialize(t,o),s>=16&&R.serialize(t,s);var c;c="Memo"===r&&"object"==typeof n?e.STMemo:e[g.types[o]];try{c.serialize(t,n)}catch(u){throw u.message+=" ("+r+")",u}}function d(t){var r=t.read(1)[0],n=r>>4;0===n&&(n=t.read(1)[0]);var i=15&r,o=o=0===i?g.fields[n][t.read(1)[0]]:g.fields[n][i];v(o,"Unknown field - header byte is 0x"+r.toString(16));var s="Memo"===o?e.STMemo:e[g.types[n]];return v(s,"Unknown type - header byte is 0x"+r.toString(16)),[o,s.parse(t)]}function _(t){function e(t,e){var r=g.fieldsInverseMap[t],n=r[0],i=r[1],o=g.fieldsInverseMap[e],s=o[0],a=o[1];return n!==s?n-s:i-a}return t.sort(e)}var v=r(40),y=r(46),g=r(16),m=r(17),b=m.sjcl,w=r(29),E=r(8).UInt128,x=r(9).UInt160,S=r(10).UInt256,A=r(7).Base,k=r(3),T=k.Amount,j=k.Currency,I=function(t){y(this,t)};I.serialize_varint=function(t,e){if(0>e)throw new Error("Variable integers are unsigned.");if(192>=e)t.append([e]);else if(12480>=e)e-=193,t.append([193+(e>>>8),255&e]);else{if(!(918744>=e))throw new Error("Variable integer overflow.");e-=12481,t.append([241+(e>>>16),e>>>8&255,255&e])}},I.prototype.parse_varint=function(t){var e,r,n,i=t.read(1)[0];if(i>254)throw new Error("Invalid varint length indicator");return 192>=i?n=i:240>=i?(e=t.read(1)[0],n=193+256*(i-193)+e):254>=i&&(e=t.read(1)[0],r=t.read(1)[0],n=12481+65536*(i-241)+256*e+r),n};var R=e.Int8=new I({serialize:function(t,e){t.append(f(e,1))},parse:function(t){return l(t,1)}});R.id=16;var C=e.Int16=new I({serialize:function(t,e){t.append(f(e,2))},parse:function(t){return l(t,2)}});C.id=1;var O=e.Int32=new I({serialize:function(t,e){t.append(f(e,4))},parse:function(t){return l(t,4)}});O.id=2;var B=e.Int64=new I({serialize:function(t,e){var r;if(n(e)){if(e=Math.floor(e),0>e)throw new Error("Negative value for unsigned Int64 is invalid.");r=new b.bn(e,10)}else if(i(e)){if(!o(e))throw new Error("Not a valid hex Int64.");r=new b.bn(e,16)}else{if(!(e instanceof b.bn))throw new Error("Invalid type for Int64");if(!e.greaterEquals(0))throw new Error("Negative value for unsigned Int64 is invalid.");r=e}s(t,r.toBits(64),!0)},parse:function(t){var e=t.read(8);return b.bn.fromBits(b.codec.bytes.toBits(e))}});B.id=3;var L=e.Hash128=new I({serialize:function(t,e){var r=E.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash128");s(t,r.to_bits(),!0)},parse:function(t){return E.from_bytes(t.read(16))}});L.id=4;var N=e.Hash256=new I({serialize:function(t,e){var r=S.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash256");s(t,r.to_bits(),!0)},parse:function(t){return S.from_bytes(t.read(32))}});N.id=5;var D=e.Hash160=new I({serialize:function(t,e){var r=x.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash160");s(t,r.to_bits(),!0)},parse:function(t){return x.from_bytes(t.read(20))}});D.id=17;var q=new I({serialize:function(t,e){var r=e.to_bytes();if(!r)throw new Error("Tried to serialize invalid/unimplemented currency type.");t.append(r)},parse:function(t){var e=t.read(20),r=j.from_bytes(e);return r}}),M=e.Amount=new I({serialize:function(t,e){var r=T.from_json(e);if(!r.is_valid())throw new Error("Not a valid Amount object.");var n=new w(r.to_text()),i=n.e-15,o=m.arraySet(8,0);if(r.is_native()){var s=n.abs().toString(16);if(n.abs().greaterThan(T.bi_xns_max))throw new Error("Value out of bounds");if(s.length>16)throw new Error("Value out of bounds");for(;s.length<16;)s="0"+s;o=b.codec.bytes.fromBits(b.codec.hex.toBits(s)),o[0]&=63,r.is_negative()||(o[0]|=64)}else{var a=0,c=0;if(a|=1<<31,!r.is_zero()){r.is_negative()||(a|=1<<30),a|=(97+i&255)<<22;var u=m.getMantissaDecimalString(n.abs()),h=new w(u).toString(16);v(h.length<=16,"Mantissa hex representation "+h+" exceeds the maximum length of 16"),a|=4194303&parseInt(h.slice(0,-8),16),c=parseInt(h.slice(-8),16)}o=b.codec.bytes.fromBits([a,c])}if(t.append(o),!r.is_native()){var f=r.currency();q.serialize(t,f,!0),t.append(r.issuer().to_bytes())}},parse:function(t){for(var e=t.read(8),r=!(127&e[0]),n=1;8>n;n++)r=r&&!e[n];var i=!(r||64&e[0]);if(128&e[0]){var o=q.parse(t),s=t.read(20),a=x.from_bytes(s);a.set_version(A.VER_ACCOUNT_ID);var c=((63&e[0])<<2)+(e[1]>>>6)-97,u=e.slice(1);u[0]&=63;var h=new w(m.arrayToHex(u),16),f=i?"-":"",l=f+h.toString()+"e"+c.toString();return T.from_json({currency:o,issuer:a.to_json(),value:l})}var p=e.slice();p[0]&=63;var d=m.arrayToHex(p),_=new w(d,16);return T.from_json((i?"-":"")+_.toString())}});M.id=6;var F=e.VariableLength=e.VL=new I({serialize:function(t,e){if("string"!=typeof e)throw new Error("Unknown datatype.");a(t,e)},parse:function(t){var e=this.parse_varint(t);return c(t.read(e))}});F.id=7;var P=e.Account=new I({serialize:function(t,e){var r=x.from_json(e);if(!r.is_valid())throw new Error("Invalid account!");s(t,r.to_bits())},parse:function(t){var e=this.parse_varint(t);if(20!==e)throw new Error("Non-standard-length account ID");var r=x.from_bytes(t.read(e));return r.set_version(A.VER_ACCOUNT_ID),r}});P.id=8;var U=e.PathSet=new I({typeBoundary:255,typeEnd:0,typeAccount:1,typeCurrency:16,typeIssuer:32,serialize:function(t,e){for(var r=0,n=e.length;n>r;r++){r&&R.serialize(t,this.typeBoundary);for(var i=0,o=e[r].length;o>i;i++){var s=e[r][i],a=0;if(s.account&&(a|=this.typeAccount),s.currency&&(a|=this.typeCurrency),s.issuer&&(a|=this.typeIssuer),R.serialize(t,a),s.account&&D.serialize(t,s.account),s.currency){var c=j.from_json(s.currency,s.non_native);q.serialize(t,c)}s.issuer&&D.serialize(t,s.issuer)}}R.serialize(t,this.typeEnd)},parse:function(t){for(var e,r=[],n=[];(e=t.read(1)[0])!==this.typeEnd;)if(e!==this.typeBoundary){var i={},o=0;if(e&this.typeAccount&&(i.account=D.parse(t),i.account.set_version(A.VER_ACCOUNT_ID),o|=this.typeAccount),e&this.typeCurrency&&(i.currency=q.parse(t),"XRP"!==i.currency.to_json()||i.currency.is_native()||(i.non_native=!0),o|=this.typeCurrency),e&this.typeIssuer&&(i.issuer=D.parse(t),i.issuer.set_version(A.VER_ACCOUNT_ID),o|=this.typeIssuer),!(i.account||i.currency||i.issuer))throw new Error("Invalid path entry");i.type=o,i.type_hex=("000000000000000"+o.toString(16)).slice(-16),n.push(i)}else n&&r.push(n),n=[];return n&&r.push(n),r}});U.id=18;var z=e.Vector256=new I({serialize:function(t,e){I.serialize_varint(t,32*e.length);for(var r=0,n=e.length;n>r;r++)N.serialize(t,e[r])},parse:function(t){for(var e=this.parse_varint(t),r=[],n=0;e/32>n;n++)r.push(N.parse(t));return r}});z.id=19,e.STMemo=new I({serialize:function(t,e,r){var n=[];Object.keys(e).forEach(function(t){if(t[0]!==t[0].toLowerCase()){if("undefined"==typeof g.fieldsInverseMap[t])throw new Error('JSON contains unknown field: "'+t+'"');n.push(t)}}),n=_(n);for(var o="json"===e.MemoFormat,s=0;s<n.length;s++){var a=n[s],c=e[a];switch(a){case"MemoType":case"MemoFormat":c=u(c);break;case"MemoData":if("string"!=typeof c){if(!o)throw new Error("MemoData can only be a JSON object with a valid json MemoFormat");try{c=u(JSON.stringify(c))}catch(h){throw new Error("MemoFormat json with invalid JSON in MemoData field")}}else i(c)&&(c=u(c))}p(t,a,c)}r||R.serialize(t,225)},parse:function(t){for(var e={};225!==t.peek(1)[0];){var r=d(t);e[r[0]]=r[1]}if(void 0!==e.MemoType){var n=h(e.MemoType);"unformatted_memo"!==n&&(e.parsed_memo_type=h(e.MemoType))}if(void 0!==e.MemoFormat&&(e.parsed_memo_format=h(e.MemoFormat)),void 0!==e.MemoData)if("json"===e.parsed_memo_format)try{e.parsed_memo_data=JSON.parse(h(e.MemoData))}catch(i){}else"text"===e.parsed_memo_format&&(e.parsed_memo_data=h(e.MemoData));return t.read(1),e}}),e.serialize=e.serialize_whatever=p,e.parse=e.parse_whatever=d;var H=e.Object=new I({serialize:function(t,e,r){var n=[];Object.keys(e).forEach(function(t){if(t[0]!==t[0].toLowerCase()){if("undefined"==typeof g.fieldsInverseMap[t])throw new Error('JSON contains unknown field: "'+t+'"');n.push(t)}}),n=_(n);for(var i=0;i<n.length;i++)p(t,n[i],e[n[i]]);r||R.serialize(t,225)},parse:function(t){for(var e={};225!==t.peek(1)[0];){var r=d(t);e[r[0]]=r[1]}return t.read(1),e}});H.id=14;var G=e.Array=new I({serialize:function(t,e){for(var r=0,n=e.length;n>r;r++){var i=Object.keys(e[r]);if(1!==i.length)throw Error("Cannot serialize an array containing non-single-key objects");var o=i[0],s=e[r][o];p(t,o,s)}R.serialize(t,241)},parse:function(t){for(var e=[];241!==t.peek(1)[0];){var r=d(t),n={};n[r[0]]=r[1],e.push(n)}return t.read(1),e}});G.id=15},function(t,e,r){var n=r(46),i=t.exports={load:function(t){return n(i,t),i}}},function(t,e,r){function n(t,e,r,i,o,s){function a(t,e){if(~n.EVENTS.indexOf(e))switch(t){case"add":1===++h._listeners&&h.subscribe();break;case"remove":0===--h._listeners&&h.unsubscribe()}}function u(t){h.updateFundedAmounts(t)}c.call(this);var h=this;return this._remote=t,this._currencyGets=f.from_json(e),this._issuerGets=r,this._currencyPays=f.from_json(i),this._issuerPays=o,this._key=s,this._subscribed=!1,this._shouldSubscribe=!0,this._listeners=0,this._offers=[],this._offerCounts={},this._ownerFunds={},this._ownerOffers={},this._synchronized=!1,this.on("newListener",function(t){a("add",t)}),this.on("removeListener",function(t){a("remove",t)}),this._remote.on("transaction",u),this.on("unsubscribe",function(){h.resetCache(),h._remote.removeListener("transaction",u)}),this._remote.once("prepare_subscribe",function(){h.subscribe()}),this._remote.on("disconnect",function(){h.resetCache(),h._remote.once("prepare_subscribe",function(){h.subscribe()})}),this}var i=r(43),o=r(46),s=r(40),a=r(49),c=r(39).EventEmitter,u=r(3).Amount,h=r(9).UInt160,f=r(6).Currency,l=r(28).internal.sub("orderbook");i.inherits(n,c),n.EVENTS=["transaction","model","trade","offer_added","offer_removed","offer_changed","offer_funds_changed"],n.DEFAULT_TRANSFER_RATE=1e9,n.IOU_SUFFIX="/000/rrrrrrrrrrrrrrrrrrrrrhoLvTp",n.prototype.subscribe=function(){var t=this;if(this._shouldSubscribe){this._remote.trace&&l.info("subscribing",this._key);var e=[function(e){t.requestTransferRate(e)},function(e){t.requestOffers(e)},function(e){t.subscribeTransactions(e)}];a.series(e,function(){})}},n.prototype.unsubscribe=function(){var t=this;this._remote.trace&&l.info("unsubscribing",this._key),this._subscribed=!1,this._shouldSubscribe=!1,n.EVENTS.forEach(function(e){t.listeners(e).length>0&&t.removeAllListeners(e)}),this.emit("unsubscribe")},n.prototype.resetCache=function(){this._ownerFunds={},this._ownerOffers={},this._offerCounts={},this._synchronized=!1},n.prototype.hasCachedFunds=function(t){return s(h.is_valid(t),"Account is invalid"),void 0!==this._ownerFunds[t]},n.prototype.addCachedFunds=function(t,e){s(h.is_valid(t),"Account is invalid"),s(!isNaN(e),"Funded amount is invalid"),this._ownerFunds[t]=e},n.prototype.getCachedFunds=function(t){return s(h.is_valid(t),"Account is invalid"),this._ownerFunds[t]},n.prototype.removeCachedFunds=function(t){s(h.is_valid(t),"Account is invalid"),this._ownerFunds[t]=void 0},n.prototype.getOfferCount=function(t){return s(h.is_valid(t),"Account is invalid"),this._offerCounts[t]||0},n.prototype.incrementOfferCount=function(t){s(h.is_valid(t),"Account is invalid");var e=(this._offerCounts[t]||0)+1;return this._offerCounts[t]=e,e},n.prototype.decrementOfferCount=function(t){s(h.is_valid(t),"Account is invalid");var e=(this._offerCounts[t]||1)-1;return this._offerCounts[t]=e,e},n.prototype.addOwnerOffer=function(t,e){s(h.is_valid(t),"Account is invalid");var r=this.getOwnerOfferSum(t),n=r.add(u.from_json(e));return this._ownerOffers[t]=n,n},n.prototype.subtractOwnerOffer=function(t,e){s(h.is_valid(t),"Account is invalid");var r=this.getOwnerOfferSum(t),n=r.subtract(u.from_json(e));return this._ownerOffers[t]=n,n},n.prototype.getOwnerOfferSum=function(t){s(h.is_valid(t),"Account is invalid");var e=this._ownerOffers[t];return e||(e=u.from_json(this._currencyGets.is_native()?"0":"0"+n.IOU_SUFFIX)),e},n.prototype.applyTransferRate=function(t,e){if(s(!isNaN(t),"Balance is invalid"),this._currencyGets.is_native())return t;if(void 0===e&&(e=this._issuerTransferRate),s(!isNaN(e),"Transfer rate is invalid"),e===n.DEFAULT_TRANSFER_RATE)return t;var r=u.from_json(t+n.IOU_SUFFIX).divide(e).multiply(u.from_json(n.DEFAULT_TRANSFER_RATE)).to_json().value;return r},n.prototype.requestTransferRate=function(t){s.strictEqual(typeof t,"function");var e=this,r=this._issuerGets;return this._currencyGets.is_native()?void t(null,n.DEFAULT_TRANSFER_RATE):this._issuerTransferRate?void t(null,this._issuerTransferRate):void this._remote.requestAccountInfo({account:r},function(r,i){if(r)return t(r);var o=i.account_data.TransferRate;o||(o=n.DEFAULT_TRANSFER_RATE),e._issuerTransferRate=o,t(null,o)})},n.prototype.setFundedAmount=function(t,e){if(s.strictEqual(typeof t,"object","Offer is invalid"),s(!isNaN(e),"Funds is invalid"),"0"===e)return t.taker_gets_funded="0",t.taker_pays_funded="0",t.is_fully_funded=!1,t;var r=this.getOwnerOfferSum(t.Account);if(r.is_zero()&&(r=u.from_json(t.TakerGets)),t.is_fully_funded=u.from_json(this._currencyGets.is_native()?e:e+n.IOU_SUFFIX).compareTo(r)>=0,t.is_fully_funded)return t.taker_gets_funded=u.from_json(t.TakerGets).to_text(),t.taker_pays_funded=u.from_json(t.TakerPays).to_text(),t;var i=u.from_json(e).compareTo(t.TakerGets)>0;t.taker_gets_funded=i?t.TakerGets:e;var o="object"==typeof t.TakerPays?t.TakerPays.value:t.TakerPays,a=u.from_json(o+n.IOU_SUFFIX),c=u.from_json(r),h=u.from_json(e+n.IOU_SUFFIX),f=a.divide(c);return h=h.multiply(f),h=h.compareTo(a)<0?this._currencyPays.is_native()?String(parseInt(h.to_json().value,10)):h.to_json().value:a.to_json().value,t.taker_pays_funded=h,t},n.prototype.requestFundedAmount=function(t,e){function r(e){o._remote.requestAccountInfo({account:t},function(t,r){t?e(t):e(null,String(r.account_data.Balance))})}function n(e){var r=o._remote.requestAccountLines({account:t,ledger:"validated",peer:o._issuerGets});r.request(function(t,r){if(t)return e(t);for(var n,i=o._currencyGets.to_json(),s="0",a=0;n=r.lines[a];a++)if(n.currency===i){s=n.balance;break}e(null,s)})}function i(r,n){if(r)return o._remote.trace&&l.info("failed to request funds",r),e(r);o._remote.trace&&l.info("requested funds",t,n);var i,s;o._currencyGets.is_native()?(i=n[0],s=i):(i=n[1],s=o.applyTransferRate(i,n[0])),e(null,s)}s(h.is_valid(t),"Account is invalid"),s.strictEqual(typeof e,"function","Callback is invalid");var o=this;o._remote.trace&&l.info("requesting funds",t);var c=[];this._currencyGets.is_native()?c.push(r):(c.push(this.requestTransferRate.bind(this)),c.push(n)),a.parallel(c,i)},n.prototype.getBalanceChange=function(t){var e={account:void 0,balance:void 0};switch(t.entryType){case"AccountRoot":e.account=t.fields.Account,e.balance=t.fieldsFinal.Balance;break;case"RippleState":t.fields.HighLimit.issuer===this._issuerGets?(e.account=t.fields.LowLimit.issuer,e.balance=t.fieldsFinal.Balance.value):t.fields.LowLimit.issuer===this._issuerGets&&(e.account=t.fields.HighLimit.issuer,e.balance=u.from_json(t.fieldsFinal.Balance).negate().to_json().value)}return e.isValid=!isNaN(e.balance)&&h.is_valid(e.account),e},n.prototype.isBalanceChange=function(t){return t.fields&&t.fields.Balance&&t.fieldsPrev&&t.fieldsFinal&&t.fieldsPrev.Balance&&t.fieldsFinal.Balance?this._currencyGets.is_native()?!isNaN(t.fields.Balance):t.fields.Balance.currency!==this._currencyGets.to_json()?!1:t.fields.HighLimit.issuer!==this._issuerGets&&t.fields.LowLimit.issuer!==this._issuerGets?!1:!0:!1},n.prototype.updateFundedAmounts=function(t){var e=this,r=t.mmeta.getAffectedAccounts(),n=r.some(function(t){return e.hasCachedFunds(t)});if(n){if(!this._currencyGets.is_native()&&!this._issuerTransferRate)return this._remote.trace&&l.info("waiting for transfer rate"),void this.requestTransferRate(function(){e.updateFundedAmounts(t)});for(var i=t.mmeta.getNodes({nodeType:"ModifiedNode",entryType:this._currencyGets.is_native()?"AccountRoot":"RippleState"}),o=0,s=i.length;s>o;o++){var a=i[o];if(this.isBalanceChange(a)){var c=this.getBalanceChange(a);c.isValid&&this.hasCachedFunds(c.account)&&this.updateAccountFunds(c.account,c.balance)}}}},n.offerRewrite=function(t){for(var e={},r=Object.keys(t),n=0,i=r.length;i>n;n++){var o=r[n];switch(o){case"PreviousTxnID":case"PreviousTxnLgrSeq":case"quality":break;default:e[o]=t[o]}}return e.Flags=e.Flags||0,e.OwnerNode=e.OwnerNode||new Array(17).join("0"),e.BookNode=e.BookNode||new Array(17).join("0"),e},n.prototype.setOffers=function(t){s(Array.isArray(t));for(var e=t.length,r=[],i=0;e>i;i++){var o=t[i];this.addOwnerOffer(o.Account,o.TakerGets)}for(var i=0;e>i;i++){var a,o=n.offerRewrite(t[i]);this.hasCachedFunds(o.Account)?a=this.getCachedFunds(o.Account):o.hasOwnProperty("owner_funds")&&(a=this.applyTransferRate(o.owner_funds),this.addCachedFunds(o.Account,a)),this.incrementOfferCount(o.Account),this.setFundedAmount(o,a),r.push(o)}this._offers=r},n.prototype.requestOffers=function(t){function e(e){return Array.isArray(e.offers)?(n._remote.trace&&l.info("requested offers",n._key,"offers: "+e.offers.length),n.setOffers(e.offers),n._synchronized=!0,n.emit("model",n._offers),void t(null,n._offers)):t(new Error("Invalid response"))}function r(e){n._remote.trace&&l.info("failed to request offers",n._key,e),t(e)}var n=this;if("function"!=typeof t&&(t=function(){}),!this._shouldSubscribe)return t(new Error("Should not request offers"));this._remote.trace&&l.info("requesting offers",this._key);var i=this._remote.requestBookOffers(this.toJSON());return i.once("success",e),i.once("error",r),i.request(),i},n.prototype.subscribeTransactions=function(t){function e(e){n._remote.trace&&l.info("subscribed to transactions"),n._subscribed=!0,t(null,e)}function r(e){n._remote.trace&&l.info("failed to subscribe to transactions",n._key,e),t(e)}var n=this;if("function"!=typeof t&&(t=function(){}),!this._shouldSubscribe)return t("Should not subscribe");this._remote.trace&&l.info("subscribing to transactions");var i=this._remote.requestSubscribe();return i.addStream("transactions"),i.once("success",e),i.once("error",r),i.request(),i},n.prototype.offers=n.prototype.getOffers=function(t){s.strictEqual(typeof t,"function","Callback missing");return this._synchronized?t(null,this._offers):this.once("model",function(e){t(null,e)}),this},n.prototype.offersSync=n.prototype.getOffersSync=function(){return this._offers},n.prototype.updateAccountFunds=function(t,e){s(h.is_valid(t),"Account is invalid"),s(!isNaN(e),"Funded amount is invalid"),this._remote.trace&&l.info("updating offer funds",this._key,t,r);var r=this.applyTransferRate(e);this.addCachedFunds(t,r);for(var i=0,a=this._offers.length;a>i;i++){var c=this._offers[i];if(c.Account===t){var f=o({},c),p=u.from_json(c.taker_gets_funded+n.IOU_SUFFIX);c.owner_funds=e,this.setFundedAmount(c,r);var d=!p.equals(u.from_json(c.taker_gets_funded+n.IOU_SUFFIX));d&&(this.emit("offer_changed",f,c),this.emit("offer_funds_changed",c,f.taker_gets_funded,c.taker_gets_funded))}}},n.prototype.insertOffer=function(t,e){this._remote.trace&&l.info("inserting offer",this._key,t.fields),this.addOwnerOffer(t.fields.Account,t.fields.TakerGets);var r=n.offerRewrite(t.fields);r.LedgerEntryType=t.entryType,r.index=t.ledgerIndex,isNaN(e)||(this.setFundedAmount(r,e),this.addCachedFunds(r.Account,e));for(var i={reference_date:new Date},o=u.from_json(r.TakerPays).ratio_human(r.TakerGets,i),s=0,a=this._offers.length;a>s;s++){var c=this._offers[s],h=u.from_json(c.TakerPays).ratio_human(c.TakerGets,i);if(o.compareTo(h)<=0){this._offers.splice(s,0,r);break}s===a-1&&this._offers.push(r)}this.emit("offer_added",r)},n.prototype.modifyOffer=function(t,e){this._remote.trace&&(e?l.info("deleting offer",this._key,t.fields):l.info("modifying offer",this._key,t.fields));for(var r=0,n=this._offers.length;n>r;r++){var i=this._offers[r];if(i.index===t.ledgerIndex){if(e)this.subtractOwnerOffer(i.Account,i.TakerGets),this._offers.splice(r,1),this.emit("offer_removed",i);else{var s=o({},i);o(i,t.fieldsFinal),this.subtractOwnerOffer(i.Account,s.TakerGets),this.addOwnerOffer(i.Account,i.TakerGets),this.emit("offer_changed",s,i)}break}}},n.prototype.notify=function(t){function e(e,n){var s="DeletedNode"===e.nodeType,a="OfferCancel"===t.transaction.TransactionType;switch(e.nodeType){case"DeletedNode":case"ModifiedNode":r.modifyOffer(e,s),a||(i=i.add(e.fieldsPrev.TakerGets),o=o.add(e.fieldsPrev.TakerPays),s?r.decrementOfferCount(e.fields.Account)<1&&r.removeCachedFunds(e.fields.Account):(i=i.subtract(e.fieldsFinal.TakerGets),o=o.subtract(e.fieldsFinal.TakerPays))),n();break;case"CreatedNode":r.incrementOfferCount(e.fields.Account);var c=t.transaction.owner_funds;if(!isNaN(c))return r.insertOffer(e,c),n();r.requestFundedAmount(e.fields.Account,function(t,i){t||r.insertOffer(e,i),n()})}}var r=this;if(this._subscribed){var n=t.mmeta.getNodes({entryType:"Offer",bookKey:this._key});if(!(n.length<1)){this._remote.trace&&l.info("notifying",this._key,t.transaction.hash);var i=u.from_json("0"+(f.from_json(this._currencyGets).is_native()?"":"/"+this._currencyGets+"/"+this._issuerGets)),o=u.from_json("0"+(f.from_json(this._currencyPays).is_native()?"":"/"+this._currencyPays+"/"+this._issuerPays));a.eachSeries(n,e,function(){r.emit("transaction",t),r.emit("model",r._offers),i.is_zero()||r.emit("trade",o,i)})}}},n.prototype.toJSON=n.prototype.to_json=function(){var t={taker_gets:{currency:this._currencyGets.to_hex()},taker_pays:{currency:this._currencyPays.to_hex()}};return this._currencyGets.is_native()||(t.taker_gets.issuer=this._issuerGets),this._currencyPays.is_native()||(t.taker_pays.issuer=this._issuerPays),t},n.prototype.isValid=n.prototype.is_valid=function(){return this._currencyPays&&this._currencyPays.is_valid()&&(this._currencyPays.is_native()||h.is_valid(this._issuerPays))&&this._currencyGets&&this._currencyGets.is_valid()&&(this._currencyGets.is_native()||h.is_valid(this._issuerGets))&&!(this._currencyPays.is_native()&&this._currencyGets.is_native())},e.OrderBook=n},function(t,e,r){function n(t,e,r,n,o){i.call(this),this.remote=t,this.src_account=e,this.dst_account=r,this.dst_amount=n,this.src_currencies=o}{var i=r(39).EventEmitter,o=r(43),s=r(3).Amount;r(46)}o.inherits(n,i),n.prototype.create=function(){var t=this,e=this.remote.request_path_find_create(this.src_account,this.dst_account,this.dst_amount,this.src_currencies);e.once("error",function(e){t.emit("error",e)}),e.once("success",function(e){t.notify_update(e)}),e.broadcast().request()},n.prototype.close=function(){this.remote.request_path_find_close().broadcast().request(),this.emit("end"),this.emit("close")},n.prototype.notify_update=function(t){var e=t.source_account,r=t.destination_account,n=s.from_json(t.destination_amount);this.src_account===e&&this.dst_account===r&&this.dst_amount.equals(n)&&this.emit("update",t)},n.prototype.notify_superceded=function(){this.emit("end"),this.emit("superceded")},e.PathFind=n},function(t,e){e.HASH_TX_ID=1415073280,e.HASH_TX_NODE=1397638144,e.HASH_INNER_NODE=1296649728,e.HASH_LEAF_NODE=1296846336,e.HASH_TX_SIGN=1398036480,e.HASH_TX_SIGN_TESTNET=1937012736},function(t,e,r){var e=t.exports=r(47),n={logObject:function(t){var e=Array.prototype.slice.call(arguments,1);e=e.map(function(t){return/MSIE/.test(navigator.userAgent)?JSON.stringify(t,null,2):t}),e.unshift(t),e.unshift("["+(new Date).toISOString()+"]"),console.log.apply(console,e)}};window.console&&window.console.log&&(e.Log.engine=n)},function(t,e,r){function n(t,e){i.config({ROUNDING_MODE:i.ROUND_HALF_UP,DECIMAL_PLACES:40}),i.call(this,t,e)}var i=r(56),o=r(46);o(n,i),n.prototype=i.prototype,n.config=function(){throw new Error("BigNumber.config may only be called from bignumber.js")},n.withRoundingMode=function(t,e){var r=i.config(),n=r.ROUNDING_MODE;r.ROUNDING_MODE=t,i.config(r);try{return e()}finally{r.ROUNDING_MODE=n,i.config(r)}},t.exports=n},function(t,e,r){function n(t){function e(t){n._updatePendingStatus(t)}function r(){n._handleReconnect(function(){n._remote.on("ledger_closed",e)})}a.call(this);var n=this;this._account=t,this._accountID=t._account_id,this._remote=t._remote,this._nextSequence=void 0,this._maxFee=this._remote.max_fee,this._maxAttempts=this._remote.max_attempts,this._submissionTimeout=this._remote.submission_timeout,this._lastLedgerOffset=this._remote.last_ledger_offset,this._pending=new h,this._account.on("transaction-outbound",function(t){n._transactionReceived(t)}),this._remote.on("load_changed",function(t){n._adjustFees(t)}),this._remote.on("ledger_closed",e),this._remote.on("disconnect",function(){n._remote.removeListener("ledger_closed",e),n._remote.once("connect",r)}),this._loadSequence()}var i=r(43),o=r(40),s=r(49),a=r(39).EventEmitter,c=r(5).Transaction,u=r(14).RippleError,h=r(21).TransactionQueue,f=r(28).internal.sub("transactionmanager");i.inherits(n,a),n._isNoOp=function(t){return"object"==typeof t&&"object"==typeof t.tx_json&&"AccountSet"===t.tx_json.TransactionType&&0===t.tx_json.Flags},n._isRemoteError=function(t){return"object"==typeof t&&"remoteError"===t.error&&"object"==typeof t.remote},n._isNotFound=function(t){return n._isRemoteError(t)&&/^(txnNotFound|transactionNotFound)$/.test(t.remote.error)},n._isTooBusy=function(t){return n._isRemoteError(t)&&"tooBusy"===t.remote.error},n.normalizeTransaction=function(t){for(var e={},r=Object.keys(t),n=0;n<r.length;n++){var i=r[n];switch(i){case"transaction":e.tx_json=t[i];break;case"tx":e.engine_result=t.meta.TransactionResult,e.result=e.engine_result,e.tx_json=t[i],e.hash=t[i].hash,e.ledger_index=t[i].ledger_index,e.type="transaction",e.validated=t.validated;break;case"meta":case"metadata":e.metadata=t[i];break;case"mmeta":break;default:e[i]=t[i]}}return e},n.prototype._transactionReceived=function(t){var e=n.normalizeTransaction(t);if(e.validated&&e.tx_json.Account===this._accountID){this._remote.trace&&f.info("transaction received:",e.tx_json),this._pending.addReceivedSequence(e.tx_json.Sequence);var r=e.tx_json.hash,i=this._pending.getSubmission(r);if(!(i instanceof c))return this._pending.addReceivedId(r,e);switch(e.engine_result){case"tesSUCCESS":i.emit("success",e);break;default:i.emit("error",e)
}}},n.prototype._adjustFees=function(){function t(t){t.once("presubmit",function(){t.emit("error","tejMaxFeeExceeded")})}var e=this;this._remote.local_fee&&this._pending.forEach(function(r){if(!r._setFixedFee){var n=r.tx_json.Fee,i=r._computeFee();if(Number(i)>e._maxFee)return t(r);r.tx_json.Fee=i,r.emit("fee_adjusted",n,i),e._remote.trace&&f.info("fee adjusted:",r.tx_json,n,i)}})},n.prototype.getPending=function(){return this._pending},n.prototype._updatePendingStatus=function(t){o.strictEqual(typeof t,"object"),o.strictEqual(typeof t.ledger_index,"number"),this._pending.forEach(function(e){switch(t.ledger_index-e.submitIndex){case 4:e.emit("missing",t);break;case 8:e.emit("lost",t)}e.finalized||t.ledger_index>e.tx_json.LastLedgerSequence&&e.emit("error",new u("tejMaxLedger","Transaction LastLedgerSequence exceeded"))})},n.prototype._fillSequence=function(t,e){function r(e,r){var n=i._remote.transaction();n.account_set(i._accountID),n.tx_json.Sequence=e,n.once("submitted",r),t._secret&&n.secret(t._secret),n.submit()}function n(n,i){if("number"!=typeof i)return e(new Error("Failed to fetch account transaction sequence"));var o=t.tx_json.Sequence-i,s=0;!function a(n){n>=t.tx_json.Sequence||r(n,function(){++s===o?e():a(n+1)})}(i)}var i=this;this._loadSequence(n)},n.prototype._loadSequence=function(t){function e(e,n){return(e||"number"!=typeof n)&&r._remote.trace?void f.info("error requesting account transaction sequence",e):(r._nextSequence=n,r.emit("sequence_loaded",n),void t(e,n))}var r=this,t="function"==typeof t?t:function(){};this._account.getNextSequence(e)},n.prototype._handleReconnect=function(t){function e(e,n){return e||"object"!=typeof n?(r._remote.trace&&f.info("error requesting account_tx",e),void t()):(Array.isArray(n.transactions)&&n.transactions.forEach(r._transactionReceived,r),t(),void r._loadSequence(function(){r._resubmit()}))}var r=this,t="function"==typeof t?t:function(){};if(!this._pending.length())return t();var n={account:this._accountID,ledger_index_min:this._pending.getMinLedger(),ledger_index_max:-1,binary:!0,parseBinary:!0,limit:20};this._remote.requestAccountTx(n,e)},n.prototype._waitLedgers=function(t,e){function r(){++i===t&&(n._remote.removeListener("ledger_closed",r),e())}if(o.strictEqual(typeof t,"number"),o.strictEqual(typeof e,"function"),1>t)return e();var n=this,i=0;this._remote.on("ledger_closed",r)},n.prototype._resubmit=function(t,e){function r(t,e){if(t&&!t.finalized){var r=t.findId(n._pending._idCache);if(r)switch(r.engine_result){case"tesSUCCESS":t.emit("success",r);break;default:t.emit("error",r)}for(;n._pending.hasSequence(t.tx_json.Sequence);)t.tx_json.Sequence+=1,n._remote.trace&&f.info("incrementing sequence:",t.tx_json);n._remote.trace&&f.info("resubmit:",t.tx_json),t.once("submitted",function(r){t.emit("resubmitted",r),e()}),n._request(t)}}var n=this,t=t||0,e=e?[e]:this._pending;this._waitLedgers(t,function(){s.eachSeries(e,r)})},n.prototype._prepareRequest=function(t){var e=this._remote.requestSubmit();if(this._remote.local_signing){t.sign();var r=t.serialize();e.tx_blob(r.to_hex());var n=t.hash(null,null,r);t.addId(n)}else e.build_path(t._build_path),e.secret(t._secret),e.tx_json(t.tx_json);return e},n.prototype._request=function(t){function e(e){"tefPAST_SEQ"===e.engine_result&&c._resubmit(1,t)}function r(){c._fillSequence(t,function(){c._resubmit(1,t)})}function i(e){"telINSUF_FEE_P"===e.engine_result&&c._resubmit(1,t)}function o(e){n._isTooBusy(e)?c._resubmit(1,t):(c._nextSequence--,t.emit("error",e))}function s(n){if(!t.finalized)switch(n.tx_json&&n.tx_json.hash&&t.addId(n.tx_json.hash),n.result=n.engine_result||"",t.result=n,t.responses+=1,h.trace&&f.info("submit response:",n),t.emit("submitted",n),n.result.slice(0,3)){case"tes":t.emit("proposed",n);break;case"tec":break;case"ter":r(n);break;case"tef":e(n);break;case"tel":i(n);break;default:o(n)}}function a(){t.finalized||(t.emit("timeout"),h.isConnected()&&(h.trace&&f.info("timeout:",t.tx_json),c._resubmit(1,t)))}var c=this,h=this._remote;if(!t.finalized){if(t.attempts>this._maxAttempts)return void t.emit("error",new u("tejAttemptsExceeded"));if(t.attempts>0&&!h.local_signing){var l="Automatic resubmission requires local signing";return void t.emit("error",new u("tejLocalSigningRequired",l))}h.trace&&f.info("submit transaction:",t.tx_json),t.submitIndex=this._remote._ledger_current_index,0===t.attempts&&(t.initialSubmitIndex=t.submitIndex),t._setLastLedger||(t.tx_json.LastLedgerSequence=t.initialSubmitIndex+this._lastLedgerOffset),t.lastLedgerSequence=t.tx_json.LastLedgerSequence,h.local_signing&&t.sign();var p=this._prepareRequest(t);return p.once("error",s),p.once("success",s),t.emit("presubmit"),p.broadcast().request(),t.attempts++,t.emit("postsubmit"),p.timeout(c._submissionTimeout,a),p}},n.prototype.submit=function(t){{var e=this;this._remote}if("number"!=typeof this._nextSequence)return void this.once("sequence_loaded",function(){e.submit(t)});if(!t.finalized){if("number"!=typeof t.tx_json.Sequence&&(t.tx_json.Sequence=this._nextSequence++),t.once("cleanup",function(){e.getPending().remove(t)}),!t.complete())return void this._nextSequence--;this._pending.push(t),this._request(t)}},e.TransactionManager=n},function(t,e){var r=e.Float={};r.toIEEE754=function(t,e,r){var n,i,o,s=(1<<e-1)-1;if(isNaN(t))i=(1<<s)-1,o=1,n=0;else if(1/0===t||t===-1/0)i=(1<<s)-1,o=0,n=0>t?1:0;else if(0===t)i=0,o=0,n=1/t===-1/0?1:0;else if(n=0>t,t=Math.abs(t),t>=Math.pow(2,1-s)){var a=Math.min(Math.floor(Math.log(t)/Math.LN2),s);i=a+s,o=t*Math.pow(2,r-a)-Math.pow(2,r)}else i=0,o=t/Math.pow(2,1-s-r);var c,u=[];for(c=r;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(n?1:0),u.reverse();for(var h=u.join(""),f=[];h.length;)f.push(parseInt(h.substring(0,8),2)),h=h.substring(8);return f},r.fromIEEE754=function(t,e,r){for(var n=[],i=t.length;i;i-=1)for(var o=t[i-1],s=8;s;s-=1)n.push(o%2?1:0),o>>=1;n.reverse();var a=n.join(""),c=(1<<e-1)-1,u=parseInt(a.substring(0,1),2)?-1:1,h=parseInt(a.substring(1,1+e),2),f=parseInt(a.substring(1+e),2);return h===(1<<e)-1?0!==f?0/0:1/0*u:h>0?u*Math.pow(2,h-c)*(1+f/Math.pow(2,r)):0!==f?u*Math.pow(2,-(c-1))*(f/Math.pow(2,r)):0*u},r.fromIEEE754Double=function(t){return r.fromIEEE754(t,11,52)},r.toIEEE754Double=function(t){return r.toIEEE754(t,11,52)},r.fromIEEE754Single=function(t){return r.fromIEEE754(t,8,23)},r.toIEEE754Single=function(t){return r.toIEEE754(t,8,23)},r.toIEEE754DoubleString=function(t){return e.toIEEE754Double(t).map(function(t){for(t=t.toString(2);t.length<8;t="0"+t);return t}).join("").replace(/(.)(.{11})(.{52})/,"$1 $2 $3")}},function(t,e,r){var n=r(17),i=n.sjcl,o=r(24),s=function(){this._value=0/0,this._update()};s.json_rewrite=function(t,e){return this.from_json(t).to_json(e)},s.from_generic=function(t){return t instanceof this?t.clone():(new this).parse_generic(t)},s.from_hex=function(t){return t instanceof this?t.clone():(new this).parse_hex(t)},s.from_json=function(t){return t instanceof this?t.clone():(new this).parse_json(t)},s.from_bits=function(t){return t instanceof this?t.clone():(new this).parse_bits(t)},s.from_bytes=function(t){return t instanceof this?t.clone():(new this).parse_bytes(t)},s.from_bn=function(t){return t instanceof this?t.clone():(new this).parse_bn(t)},s.from_number=function(t){return t instanceof this?t.clone():(new this).parse_number(t)},s.is_valid=function(t){return this.from_json(t).is_valid()},s.prototype.clone=function(){return this.copyTo(new this.constructor)},s.prototype.copyTo=function(t){return t._value=this._value,void 0!==this._version_byte&&(t._version_byte=this._version_byte),"function"==typeof t._update&&t._update(),t},s.prototype.equals=function(t){return this.is_valid()&&t.is_valid()&&this._value.equals(t._value)},s.prototype.is_valid=function(){return this._value instanceof i.bn},s.prototype.is_zero=function(){return this.is_valid()&&this._value.equals(new i.bn(0))},s.prototype._update=function(){},s.prototype.parse_generic=function(t){switch(o.accounts&&t in o.accounts&&(t=o.accounts[t].account),t){case void 0:case"0":case this.constructor.STR_ZERO:case this.constructor.ACCOUNT_ZERO:case this.constructor.HEX_ZERO:this._value=new i.bn(0);break;case"1":case this.constructor.STR_ONE:case this.constructor.ACCOUNT_ONE:case this.constructor.HEX_ONE:this._value=new i.bn(1);break;default:if("string"!=typeof t)this._value=0/0;else if(this.constructor.width===t.length){var e=n.arrayToHex(n.stringToArray(t));this._value=new i.bn(e,16)}else this._value=2*this.constructor.width===t.length?new i.bn(t,16):0/0}return this._update(),this},s.prototype.parse_hex=function(t){return this._value="string"==typeof t&&t.length===2*this.constructor.width?new i.bn(t,16):0/0,this._update(),this},s.prototype.parse_bits=function(t){return this._value=i.bitArray.bitLength(t)!==8*this.constructor.width?0/0:i.bn.fromBits(t),this._update(),this},s.prototype.parse_bytes=function(t){if(Array.isArray(t)&&t.length===this.constructor.width){var e=i.codec.bytes.toBits(t);this._value=i.bn.fromBits(e)}else this._value=0/0;return this._update(),this},s.prototype.parse_json=s.prototype.parse_hex,s.prototype.parse_bn=function(t){return this._value=t instanceof i.bn&&t.bitLength()<=8*this.constructor.width?new i.bn(t):0/0,this._update(),this},s.prototype.parse_number=function(t){return this._value=0/0,"number"==typeof t&&isFinite(t)&&t>=0&&(this._value=new i.bn(t)),this._update(),this},s.prototype.to_bytes=function(){return this.is_valid()?i.codec.bytes.fromBits(this.to_bits()):null},s.prototype.to_hex=function(){return this.is_valid()?i.codec.hex.fromBits(this.to_bits()).toUpperCase():null},s.prototype.to_json=s.prototype.to_hex,s.prototype.to_bits=function(){return this.is_valid()?this._value.toBits(8*this.constructor.width):null},s.prototype.to_bn=function(){if(!this.is_valid())return null;var t=this.to_bits();return i.bn.fromBits(t)},e.UInt=s},function(t,e,r){function n(){this._curve=o.ecc.curves.k256,this._secret=null,this._pubkey=null}function i(t){return o.hash.ripemd160.hash(o.hash.sha256.hash(t))}var o=r(17).sjcl,s=r(9).UInt160,a=r(10).UInt256,c=r(7).Base;n.from_bn_secret=function(t){return t instanceof this?t.clone():(new this).parse_bn_secret(t)},n.prototype.parse_bn_secret=function(t){return this._secret=new o.ecc.ecdsa.secretKey(o.ecc.curves.k256,t),this},n.prototype._pub=function(){var t=this._curve;if(!this._pubkey&&this._secret){var e=this._secret._exponent;this._pubkey=new o.ecc.ecdsa.publicKey(t,t.G.mult(e))}return this._pubkey},n.prototype._pub_bits=function(){var t=this._pub();if(!t)return null;var e=t._point,r=e.y.mod(2).equals(0);return o.bitArray.concat([o.bitArray.partial(8,r?2:3)],e.x.toBits(this._curve.r.bitLength()))},n.prototype.to_hex_pub=function(){var t=this._pub_bits();return t?o.codec.hex.fromBits(t).toUpperCase():null},n.prototype.get_address=function(){var t=this._pub_bits();if(!t)return null;var e=i(t),r=s.from_bits(e);return r.set_version(c.VER_ACCOUNT_ID),r},n.prototype.sign=function(t){t=a.from_json(t);var e=this._secret.sign(t.to_bits(),0);return e=this._secret.canonicalizeSignature(e),this._secret.encodeDER(e)},e.KeyPair=n},function(t,e,r){function n(t,e){var r=e<<3;"string"==typeof t&&(t=s.codec.utf8String.toBits(t));for(var n=0,i=[];s.bitArray.bitLength(i)<r;){var o=s.hash.sha512.hash(s.bitArray.concat([n],t));i=s.bitArray.concat(i,o),n++}return i=s.bitArray.clamp(i,r)}function i(t,e){var r=new s.misc.hmac(t,s.hash.sha512);return s.codec.hex.fromBits(s.bitArray.bitSlice(r.encrypt(e),0,256))}function o(t){for(var e=0;8>e;e++)s.random.addEntropy(Math.random(),32,"Math.random()");return s.random.randomWords(t)}var s=r(17).sjcl,a=r(7).Base,c=r(11).Seed,u=r(9).UInt160,h=r(10).UInt256,f=r(67),l=(r(51),r(46)),p=(r(44),{}),d={cipher:"aes",mode:"ccm",ts:64,ks:256,iter:1e3};p.derive=function(t,e,r,o,a){var c;c="login"===e?["id","crypt"]:["unlock"];var u=new s.bn(String(t.exponent)),h=new s.bn(String(t.modulus)),l=new s.bn(String(t.alpha)),p=["PAKDF_1_0_0",t.host.length,t.host,r.length,r,e.length,e].join(":")+":",d=Math.ceil(Math.min(7+h.bitLength()>>>3,256)/8),_=n(p,d),v=s.codec.hex.fromBits(_),y=new s.bn(String(v)).setBitM(0),g=[p,o.length,o].join(":")+":",m=7+h.bitLength()>>>3,b=n(g,m),w=s.codec.hex.fromBits(b),E=new s.bn(String(w)).mod(h);1!==E.jacobi(h)&&(E=E.mul(l).mod(h));for(var x;x=s.bn.random(h,0),1!==x.jacobi(h););var S=x.powermodMontgomery(y.mul(u),h),A=E.mulmod(S,h),k=s.codec.hex.fromBits(A.toBits());f.post(t.url).send({info:p,signreq:k}).end(function(e,r){if(e||!r)return a(new Error("Could not query PAKDF server "+t.host));var n=r.body||r.text?JSON.parse(r.text):{};if("success"!==n.result)return a(new Error("Could not query PAKDF server "+t.host));var o=new s.bn(String(n.signres)),u=x.inverseMod(h),f=o.mulmod(u,h),l=f.toBits(),p={};c.forEach(function(t){p[t]=i(l,t)}),a(null,p)})},p.encrypt=function(t,e){t=s.codec.hex.toBits(t);var r=l(!0,{},d),n=JSON.parse(s.encrypt(t,e,r)),i=[s.bitArray.partial(8,0)],o=s.codec.base64.toBits(n.iv),a=s.codec.base64.toBits(n.ct),c=s.bitArray.concat(i,o);return c=s.bitArray.concat(c,a),s.codec.base64.fromBits(c)},p.decrypt=function(t,e){t=s.codec.hex.toBits(t);var r=s.codec.base64.toBits(e),n=s.bitArray.extract(r,0,8);if(0!==n)throw new Error("Unsupported encryption version: "+n);var i=l(!0,{},d,{iv:s.codec.base64.fromBits(s.bitArray.bitSlice(r,8,136)),ct:s.codec.base64.fromBits(s.bitArray.bitSlice(r,136))});return s.decrypt(t,JSON.stringify(i))},p.isValidAddress=function(t){return u.is_valid(t)},p.createSecret=function(t){return s.codec.hex.fromBits(o(t))},p.createMaster=function(){return a.encode_check(33,s.codec.bytes.fromBits(o(4)))},p.getAddress=function(t){return c.from_json(t).get_key().get_address().to_json()},p.hashSha512=function(t){return s.codec.hex.fromBits(s.hash.sha512.hash(t))},p.hashSha512Half=function(t){return h.from_hex(p.hashSha512(t).substr(0,64))},p.signString=function(t,e){var r=new s.misc.hmac(s.codec.hex.toBits(t),s.hash.sha512);return s.codec.hex.fromBits(r.mac(e))},p.deriveRecoveryEncryptionKeyFromSecret=function(t){var e=c.from_json(t).to_bits(),r=new s.misc.hmac(e,s.hash.sha512),n=r.mac("ripple/hmac/recovery_encryption_key/v1");return n=s.bitArray.bitSlice(n,0,256),s.codec.hex.fromBits(n)},p.base64ToBase64Url=function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,"")},p.base64UrlToBase64=function(t){for(t=t.replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";return t},p.decodeBase64=function(t){return s.codec.utf8String.fromBits(s.codec.base64.toBits(t))},e.Crypt=p},function(t,e,r){function n(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function i(t,e){var r=t.r.bitLength();return{r:h.bn.fromBits(h.bitArray.bitSlice(e,0,r)),s:h.bn.fromBits(h.bitArray.bitSlice(e,r,h.bitArray.bitLength(e)))}}function o(t,e,r,n,i){for(var o=i.toBits(),a=0;4>a;a++){var c;try{c=s(t,e,r,n,a)}catch(u){continue}if(h.bitArray.equal(c.toBits(),o))return a}throw new h.exception.bug("unable to calculate recovery factor from signature")}function s(t,e,r,n,i){var o=t.r,s=t.field.modulus;i=3&i;var c=1&i,u=i>>1;p||(p=s.add(1).div(4));var f;f=u?e.add(o):e;var l,d=f.mul(f).mul(f).add(t.a.mul(f)).add(t.b).mod(s),_=d.powermodMontgomery(p,s),v=_.mod(2).equals(0);l=v&&!c||!v&&c?_:s.sub(_);var y=new h.ecc.point(t,f,l);if(!y.isValidPoint())throw new h.exception.corrupt("point R. Not a valid point on the curve. Cannot recover public key");var g=h.bn.fromBits(n),m=new h.bn(0).sub(g).mod(o),b=e.inverseMod(o),w=y.mult2(r,m,t.G).mult(b);if(!w.isValidPoint())throw new h.exception.corrupt("public_key_point. Not a valid point on the curve. Cannot recover public key");if(!a(t,g,e,r,w))throw new h.exception.corrupt("cannot recover public key");return w}function a(t,e,r,n,i){var o=t.r;if(new h.bn(1).greaterEquals(r)||r.greaterEquals(new h.bn(o)))return!1;if(new h.bn(1).greaterEquals(n)||n.greaterEquals(new h.bn(o)))return!1;var s=n.inverseMod(o),a=e.mul(s).mod(o),c=r.mul(s).mod(o),u=t.G.mult2(a,c,i);return r.equals(u.x.mod(o))}var c,u,h={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};"undefined"!=typeof t&&t.exports&&(t.exports=h),c=[],u=function(){return h}.apply(e,c),!(void 0!==u&&(t.exports=u)),h.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,r,n,i,o,s=this._tables[0][4],a=this._tables[1],c=t.length,u=1;if(4!==c&&6!==c&&8!==c)throw new h.exception.invalid("invalid aes key size");for(this._key=[i=t.slice(0),o=[]],e=c;4*c+28>e;e++)n=i[e-1],(e%c===0||8===c&&e%c===4)&&(n=s[n>>>24]<<24^s[n>>16&255]<<16^s[n>>8&255]<<8^s[255&n],e%c===0&&(n=n<<8^n>>>24^u<<24,u=u<<1^283*(u>>7))),i[e]=i[e-c]^n;for(r=0;e;r++,e--)n=i[3&r?e:e-4],o[r]=4>=e||4>r?n:a[0][s[n>>>24]]^a[1][s[n>>16&255]]^a[2][s[n>>8&255]]^a[3][s[255&n]]},h.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,r,n,i,o,s,a,c,u=this._tables[0],h=this._tables[1],f=u[4],l=h[4],p=[],d=[];for(t=0;256>t;t++)d[(p[t]=t<<1^283*(t>>7))^t]=t;for(e=r=0;!f[e];e^=n||1,r=d[r]||1)for(s=r^r<<1^r<<2^r<<3^r<<4,s=s>>8^255&s^99,f[e]=s,l[s]=e,o=p[i=p[n=p[e]]],c=16843009*o^65537*i^257*n^16843008*e,a=257*p[s]^16843008*s,t=0;4>t;t++)u[t][e]=a=a<<24^a>>>8,h[t][s]=c=c<<24^c>>>8;for(t=0;5>t;t++)u[t]=u[t].slice(0),h[t]=h[t].slice(0)},_crypt:function(t,e){if(4!==t.length)throw new h.exception.invalid("invalid aes block size");var r,n,i,o,s=this._key[e],a=t[0]^s[0],c=t[e?3:1]^s[1],u=t[2]^s[2],f=t[e?1:3]^s[3],l=s.length/4-2,p=4,d=[0,0,0,0],_=this._tables[e],v=_[0],y=_[1],g=_[2],m=_[3],b=_[4];for(o=0;l>o;o++)r=v[a>>>24]^y[c>>16&255]^g[u>>8&255]^m[255&f]^s[p],n=v[c>>>24]^y[u>>16&255]^g[f>>8&255]^m[255&a]^s[p+1],i=v[u>>>24]^y[f>>16&255]^g[a>>8&255]^m[255&c]^s[p+2],f=v[f>>>24]^y[a>>16&255]^g[c>>8&255]^m[255&u]^s[p+3],p+=4,a=r,c=n,u=i;for(o=0;4>o;o++)d[e?3&-o:o]=b[a>>>24]<<24^b[c>>16&255]<<16^b[u>>8&255]<<8^b[255&f]^s[p++],r=a,a=c,c=u,u=f,f=r;return d}},h.bitArray={bitSlice:function(t,e,r){return t=h.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===r?t:h.bitArray.clamp(t,r-e)},extract:function(t,e,r){var n,i=Math.floor(-e-r&31);return n=-32&(e+r-1^e)?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i,n&(1<<r)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var r=t[t.length-1],n=h.bitArray.getPartial(r);return 32===n?t.concat(e):h.bitArray._shiftRight(e,n,0|r,t.slice(0,t.length-1))},bitLength:function(t){var e,r=t.length;return 0===r?0:(e=t[r-1],32*(r-1)+h.bitArray.getPartial(e))},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var r=t.length;return e=31&e,r>0&&e&&(t[r-1]=h.bitArray.partial(e,t[r-1]&2147483648>>e-1,1)),t},partial:function(t,e,r){return 32===t?e:(r?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(h.bitArray.bitLength(t)!==h.bitArray.bitLength(e))return!1;var r,n=0;for(r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n},_shiftRight:function(t,e,r,n){var i,o,s=0;for(void 0===n&&(n=[]);e>=32;e-=32)n.push(r),r=0;if(0===e)return n.concat(t);for(i=0;i<t.length;i++)n.push(r|t[i]>>>e),r=t[i]<<32-e;return s=t.length?t[t.length-1]:0,o=h.bitArray.getPartial(s),n.push(h.bitArray.partial(e+o&31,e+o>32?r:n.pop(),1)),n},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,r,n=65280;for(e=0;e<t.length;++e)r=t[e],t[e]=r>>>24|r>>>8&n|(r&n)<<8|r<<24;return t}},h.codec.utf8String={fromBits:function(t){var e,r,n="",i=h.bitArray.bitLength(t);for(e=0;i/8>e;e++)0===(3&e)&&(r=t[e/4]),n+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(n))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,r=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t.charCodeAt(e),3===(3&e)&&(r.push(n),n=0);return 3&e&&r.push(h.bitArray.partial(8*(3&e),n)),r}},h.codec.hex={fromBits:function(t){var e,r="";for(e=0;e<t.length;e++)r+=((0|t[e])+0xf00000000000).toString(16).substr(4);return r.substr(0,h.bitArray.bitLength(t)/4)},toBits:function(t){var e,r,n=[];for(t=t.replace(/\s|0x/g,""),r=t.length,t+="00000000",e=0;e<t.length;e+=8)n.push(0^parseInt(t.substr(e,8),16));return h.bitArray.clamp(n,4*r)}},h.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,r){var n,i="",o=0,s=h.codec.base64._chars,a=0,c=h.bitArray.bitLength(t);for(r&&(s=s.substr(0,62)+"-_"),n=0;6*i.length<c;)i+=s.charAt((a^t[n]>>>o)>>>26),6>o?(a=t[n]<<6-o,o+=26,n++):(a<<=6,o-=6);for(;3&i.length&&!e;)i+="=";return i},toBits:function(t,e){t=t.replace(/\s|=/g,"");var r,n,i=[],o=0,s=h.codec.base64._chars,a=0;for(e&&(s=s.substr(0,62)+"-_"),r=0;r<t.length;r++){if(n=s.indexOf(t.charAt(r)),0>n)throw new h.exception.invalid("this isn't base64!");o>26?(o-=26,i.push(a^n>>>o),a=n<<32-o):(o+=6,a^=n<<32-o)}return 56&o&&i.push(h.bitArray.partial(56&o,a,1)),i}},h.codec.base64url={fromBits:function(t){return h.codec.base64.fromBits(t,1,1)},toBits:function(t){return h.codec.base64.toBits(t,1)}},h.codec.bytes={fromBits:function(t){var e,r,n=[],i=h.bitArray.bitLength(t);for(e=0;i/8>e;e++)0===(3&e)&&(r=t[e/4]),n.push(r>>>24),r<<=8;return n},toBits:function(t){var e,r=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t[e],3===(3&e)&&(r.push(n),n=0);return 3&e&&r.push(h.bitArray.partial(8*(3&e),n)),r}},h.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},h.hash.sha256.hash=function(t){return(new h.hash.sha256).update(t).finalize()},h.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=h.codec.utf8String.toBits(t));var e,r=this._buffer=h.bitArray.concat(this._buffer,t),n=this._length,i=this._length=n+h.bitArray.bitLength(t);for(e=512+n&-512;i>=e;e+=512)this._block(r.splice(0,16));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=h.bitArray.concat(e,[h.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),r},_init:[],_key:[],_precompute:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,r=0,n=2;t:for(;64>r;n++){for(e=2;n>=e*e;e++)if(n%e===0)continue t;8>r&&(this._init[r]=t(Math.pow(n,.5))),this._key[r]=t(Math.pow(n,1/3)),r++}},_block:function(t){var e,r,n,i,o=t.slice(0),s=this._h,a=this._key,c=s[0],u=s[1],h=s[2],f=s[3],l=s[4],p=s[5],d=s[6],_=s[7];for(e=0;64>e;e++)16>e?r=o[e]:(n=o[e+1&15],i=o[e+14&15],r=o[15&e]=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+o[15&e]+o[e+9&15]|0),r=r+_+(l>>>6^l>>>11^l>>>25^l<<26^l<<21^l<<7)+(d^l&(p^d))+a[e],_=d,d=p,p=l,l=f+r|0,f=h,h=u,u=c,c=r+(u&h^f&(u^h))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;s[0]=s[0]+c|0,s[1]=s[1]+u|0,s[2]=s[2]+h|0,s[3]=s[3]+f|0,s[4]=s[4]+l|0,s[5]=s[5]+p|0,s[6]=s[6]+d|0,s[7]=s[7]+_|0}},h.hash.sha512=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},h.hash.sha512.hash=function(t){return(new h.hash.sha512).update(t).finalize()},h.hash.sha512.prototype={blockSize:1024,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=h.codec.utf8String.toBits(t));var e,r=this._buffer=h.bitArray.concat(this._buffer,t),n=this._length,i=this._length=n+h.bitArray.bitLength(t);for(e=1024+n&-1024;i>=e;e+=1024)this._block(r.splice(0,32));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=h.bitArray.concat(e,[h.bitArray.partial(1,1)]),t=e.length+4;31&t;t++)e.push(0);for(e.push(0),e.push(0),e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,32));return this.reset(),r},_init:[],_initr:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],_key:[],_keyr:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],_precompute:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}function e(t){return 1099511627776*(t-Math.floor(t))&255}var r,n=0,i=2;t:for(;80>n;i++){for(r=2;i>=r*r;r++)if(i%r===0)continue t;8>n&&(this._init[2*n]=t(Math.pow(i,.5)),this._init[2*n+1]=e(Math.pow(i,.5))<<24|this._initr[n]),this._key[2*n]=t(Math.pow(i,1/3)),this._key[2*n+1]=e(Math.pow(i,1/3))<<24|this._keyr[n],n++}},_block:function(t){var e,r,n,i=t.slice(0),o=this._h,s=this._key,a=o[0],c=o[1],u=o[2],h=o[3],f=o[4],l=o[5],p=o[6],d=o[7],_=o[8],v=o[9],y=o[10],g=o[11],m=o[12],b=o[13],w=o[14],E=o[15],x=a,S=c,A=u,k=h,T=f,j=l,I=p,R=d,C=_,O=v,B=y,L=g,N=m,D=b,q=w,M=E;for(e=0;80>e;e++){if(16>e)r=i[2*e],n=i[2*e+1];else{var F=i[2*(e-15)],P=i[2*(e-15)+1],U=(P<<31|F>>>1)^(P<<24|F>>>8)^F>>>7,z=(F<<31|P>>>1)^(F<<24|P>>>8)^(F<<25|P>>>7),H=i[2*(e-2)],G=i[2*(e-2)+1],X=(G<<13|H>>>19)^(H<<3|G>>>29)^H>>>6,K=(H<<13|G>>>19)^(G<<3|H>>>29)^(H<<26|G>>>6),V=i[2*(e-7)],Y=i[2*(e-7)+1],W=i[2*(e-16)],J=i[2*(e-16)+1];n=z+Y,r=U+V+(z>>>0>n>>>0?1:0),n+=K,r+=X+(K>>>0>n>>>0?1:0),n+=J,r+=W+(J>>>0>n>>>0?1:0)}i[2*e]=r|=0,i[2*e+1]=n|=0;var $=C&B^~C&N,Z=O&L^~O&D,Q=x&A^x&T^A&T,te=S&k^S&j^k&j,ee=(S<<4|x>>>28)^(x<<30|S>>>2)^(x<<25|S>>>7),re=(x<<4|S>>>28)^(S<<30|x>>>2)^(S<<25|x>>>7),ne=(O<<18|C>>>14)^(O<<14|C>>>18)^(C<<23|O>>>9),ie=(C<<18|O>>>14)^(C<<14|O>>>18)^(O<<23|C>>>9),oe=s[2*e],se=s[2*e+1],ae=M+ie,ce=q+ne+(M>>>0>ae>>>0?1:0);ae+=Z,ce+=$+(Z>>>0>ae>>>0?1:0),ae+=se,ce+=oe+(se>>>0>ae>>>0?1:0),ae=ae+n|0,ce+=r+(n>>>0>ae>>>0?1:0);var ue=re+te,he=ee+Q+(re>>>0>ue>>>0?1:0);q=N,M=D,N=B,D=L,B=C,L=O,O=R+ae|0,C=I+ce+(R>>>0>O>>>0?1:0)|0,I=T,R=j,T=A,j=k,A=x,k=S,S=ae+ue|0,x=ce+he+(ae>>>0>S>>>0?1:0)|0}c=o[1]=c+S|0,o[0]=a+x+(S>>>0>c>>>0?1:0)|0,h=o[3]=h+k|0,o[2]=u+A+(k>>>0>h>>>0?1:0)|0,l=o[5]=l+j|0,o[4]=f+T+(j>>>0>l>>>0?1:0)|0,d=o[7]=d+R|0,o[6]=p+I+(R>>>0>d>>>0?1:0)|0,v=o[9]=v+O|0,o[8]=_+C+(O>>>0>v>>>0?1:0)|0,g=o[11]=g+L|0,o[10]=y+B+(L>>>0>g>>>0?1:0)|0,b=o[13]=b+D|0,o[12]=m+N+(D>>>0>b>>>0?1:0)|0,E=o[15]=E+M|0,o[14]=w+q+(M>>>0>E>>>0?1:0)|0}},h.hash.sha1=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},h.hash.sha1.hash=function(t){return(new h.hash.sha1).update(t).finalize()},h.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=h.codec.utf8String.toBits(t));var e,r=this._buffer=h.bitArray.concat(this._buffer,t),n=this._length,i=this._length=n+h.bitArray.bitLength(t);for(e=this.blockSize+n&-this.blockSize;i>=e;e+=this.blockSize)this._block(r.splice(0,16));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=h.bitArray.concat(e,[h.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),r},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,r,n){return 19>=t?e&r|~e&n:39>=t?e^r^n:59>=t?e&r|e&n|r&n:79>=t?e^r^n:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(t){var e,r,n,i,o,s,a,c=t.slice(0),u=this._h;for(n=u[0],i=u[1],o=u[2],s=u[3],a=u[4],e=0;79>=e;e++)e>=16&&(c[e]=this._S(1,c[e-3]^c[e-8]^c[e-14]^c[e-16])),r=this._S(5,n)+this._f(e,i,o,s)+a+c[e]+this._key[Math.floor(e/20)]|0,a=s,s=o,o=this._S(30,i),i=n,n=r;u[0]=u[0]+n|0,u[1]=u[1]+i|0,u[2]=u[2]+o|0,u[3]=u[3]+s|0,u[4]=u[4]+a|0}},h.mode.ccm={name:"ccm",encrypt:function(t,e,r,n,i){var o,s,a=e.slice(0),c=h.bitArray,u=c.bitLength(r)/8,f=c.bitLength(a)/8;if(i=i||64,n=n||[],7>u)throw new h.exception.invalid("ccm: iv must be at least 7 bytes");for(o=2;4>o&&f>>>8*o;o++);return 15-u>o&&(o=15-u),r=c.clamp(r,8*(15-o)),s=h.mode.ccm._computeTag(t,e,r,n,i,o),a=h.mode.ccm._ctrMode(t,a,r,s,i,o),c.concat(a.data,a.tag)},decrypt:function(t,e,r,n,i){i=i||64,n=n||[];var o,s,a=h.bitArray,c=a.bitLength(r)/8,u=a.bitLength(e),f=a.clamp(e,u-i),l=a.bitSlice(e,u-i);if(u=(u-i)/8,7>c)throw new h.exception.invalid("ccm: iv must be at least 7 bytes");for(o=2;4>o&&u>>>8*o;o++);if(15-c>o&&(o=15-c),r=a.clamp(r,8*(15-o)),f=h.mode.ccm._ctrMode(t,f,r,l,i,o),s=h.mode.ccm._computeTag(t,f.data,r,n,i,o),!a.equal(f.tag,s))throw new h.exception.corrupt("ccm: tag doesn't match");return f.data},_computeTag:function(t,e,r,n,i,o){var s,a,c,u=[],f=h.bitArray,l=f._xor4;if(i/=8,i%2||4>i||i>16)throw new h.exception.invalid("ccm: invalid tag length");if(n.length>4294967295||e.length>4294967295)throw new h.exception.bug("ccm: can't deal with 4GiB or more data");if(s=[f.partial(8,(n.length?64:0)|i-2<<2|o-1)],s=f.concat(s,r),s[3]|=f.bitLength(e)/8,s=t.encrypt(s),n.length)for(a=f.bitLength(n)/8,65279>=a?u=[f.partial(16,a)]:4294967295>=a&&(u=f.concat([f.partial(16,65534)],[a])),u=f.concat(u,n),c=0;c<u.length;c+=4)s=t.encrypt(l(s,u.slice(c,c+4).concat([0,0,0])));for(c=0;c<e.length;c+=4)s=t.encrypt(l(s,e.slice(c,c+4).concat([0,0,0])));return f.clamp(s,8*i)},_ctrMode:function(t,e,r,n,i,o){var s,a,c,u=h.bitArray,f=u._xor4,l=e.length,p=u.bitLength(e);if(c=u.concat([u.partial(8,o-1)],r).concat([0,0,0]).slice(0,4),n=u.bitSlice(f(n,t.encrypt(c)),0,i),!l)return{tag:n,data:[]};for(a=0;l>a;a+=4)c[3]++,s=t.encrypt(c),e[a]^=s[0],e[a+1]^=s[1],e[a+2]^=s[2],e[a+3]^=s[3];return{tag:n,data:u.clamp(e,p)}}},h.misc.hmac=function(t,e){this._hash=e=e||h.hash.sha256;var r,n=[[],[]],i=e.prototype.blockSize/32;for(this._baseHash=[new e,new e],t.length>i&&(t=e.hash(t)),r=0;i>r;r++)n[0][r]=909522486^t[r],n[1][r]=1549556828^t[r];this._baseHash[0].update(n[0]),this._baseHash[1].update(n[1]),this._resultHash=new e(this._baseHash[0])},h.misc.hmac.prototype.encrypt=h.misc.hmac.prototype.mac=function(t){if(this._updated)throw new h.exception.invalid("encrypt on already updated hmac called!");return this.update(t),this.digest(t)},h.misc.hmac.prototype.reset=function(){this._resultHash=new this._hash(this._baseHash[0]),this._updated=!1},h.misc.hmac.prototype.update=function(t){this._updated=!0,this._resultHash.update(t)},h.misc.hmac.prototype.digest=function(){var t=this._resultHash.finalize(),e=new this._hash(this._baseHash[1]).update(t).finalize();return this.reset(),e},h.misc.pbkdf2=function(t,e,r,n,i){if(r=r||1e3,0>n||0>r)throw h.exception.invalid("invalid params to pbkdf2");"string"==typeof t&&(t=h.codec.utf8String.toBits(t)),"string"==typeof e&&(e=h.codec.utf8String.toBits(e)),i=i||h.misc.hmac;var o,s,a,c,u,f=new i(t),l=[],p=h.bitArray;for(u=1;32*l.length<(n||1);u++){for(o=s=f.encrypt(p.concat(e,[u])),a=1;r>a;a++)for(s=f.encrypt(s),c=0;c<s.length;c++)o[c]^=s[c];l=l.concat(o)}return n&&(l=p.clamp(l,n)),l},h.prng=function(t){this._pools=[new h.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=t,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80
},h.prng.prototype={randomWords:function(t,e){var r,n,i=[],o=this.isReady(e);if(o===this._NOT_READY)throw new h.exception.notReady("generator isn't seeded");for(o&this._REQUIRES_RESEED&&this._reseedFromPools(!(o&this._READY)),r=0;t>r;r+=4)(r+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),n=this._gen4words(),i.push(n[0],n[1],n[2],n[3]);return this._gate(),i.slice(0,t)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw"Setting paranoia=0 will ruin your security; use it only for testing";this._defaultParanoia=t},addEntropy:function(t,e,r){r=r||"user";var n,i,o,s,a=(new Date).valueOf(),c=this._robins[r],u=this.isReady(),f=0;switch(n=this._collectorIds[r],void 0===n&&(n=this._collectorIds[r]=this._collectorIdNext++),void 0===c&&(c=this._robins[r]=0),this._robins[r]=(this._robins[r]+1)%this._pools.length,typeof t){case"number":void 0===e&&(e=1),this._pools[c].update([n,this._eventId++,1,e,a,1,0|t]);break;case"object":if(s=Object.prototype.toString.call(t),"[object Uint32Array]"===s){for(o=[],i=0;i<t.length;i++)o.push(t[i]);t=o}else for("[object Array]"!==s&&(f=1),i=0;i<t.length&&!f;i++)"number"!=typeof t[i]&&(f=1);if(!f){if(void 0===e)for(e=0,i=0;i<t.length;i++)for(o=t[i];o>0;)e++,o>>>=1;this._pools[c].update([n,this._eventId++,2,e,a,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this._pools[c].update([n,this._eventId++,3,e,a,t.length]),this._pools[c].update(t);break;default:f=1}if(f)throw new h.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[c]+=e,this._poolStrength+=e,u===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t?t:this._defaultParanoia];return this._strength>=e?1:this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),keyboardCollector:this._bind(this._keyboardCollector),accelerometerCollector:this._bind(this._accelerometerCollector),touchCollector:this._bind(this._touchCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("mousemove",this._eventListener.mouseCollector,!1),window.addEventListener("keypress",this._eventListener.keyboardCollector,!1),window.addEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.addEventListener("touchmove",this._eventListener.touchCollector,!1);else{if(!document.attachEvent)throw new h.exception.bug("can't attach event");document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("onmousemove",this._eventListener.mouseCollector),document.attachEvent("keypress",this._eventListener.keyboardCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("mousemove",this._eventListener.mouseCollector,!1),window.removeEventListener("keypress",this._eventListener.keyboardCollector,!1),window.removeEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.removeEventListener("touchmove",this._eventListener.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("onmousemove",this._eventListener.mouseCollector),document.detachEvent("keypress",this._eventListener.keyboardCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var r,n,i=this._callbacks[t],o=[];for(n in i)i.hasOwnProperty(n)&&i[n]===e&&o.push(n);for(r=0;r<o.length;r++)n=o[r],delete i[n]},_bind:function(t){var e=this;return function(){t.apply(e,arguments)}},_gen4words:function(){for(var t=0;4>t&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new h.cipher.aes(this._key)},_reseed:function(t){this._key=h.hash.sha256.hash(this._key.concat(t)),this._cipher=new h.cipher.aes(this._key);for(var e=0;4>e&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);},_reseedFromPools:function(t){var e,r=[],n=0;for(this._nextReseed=r[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,e=0;16>e;e++)r.push(4294967296*Math.random()|0);for(e=0;e<this._pools.length&&(r=r.concat(this._pools[e].finalize()),n+=this._poolEntropy[e],this._poolEntropy[e]=0,t||!(this._reseedCount&1<<e));e++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new h.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=n,n>this._strength&&(this._strength=n),this._reseedCount++,this._reseed(r)},_keyboardCollector:function(){this._addCurrentTimeToEntropy(1)},_mouseCollector:function(t){var e,r;try{e=t.x||t.clientX||t.offsetX||0,r=t.y||t.clientY||t.offsetY||0}catch(n){e=0,r=0}0!=e&&0!=r&&h.random.addEntropy([e,r],2,"mouse"),this._addCurrentTimeToEntropy(0)},_touchCollector:function(t){var e=t.touches[0]||t.changedTouches[0],r=e.pageX||e.clientX,n=e.pageY||e.clientY;h.random.addEntropy([r,n],1,"touch"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(t){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?h.random.addEntropy(window.performance.now(),t,"loadtime"):h.random.addEntropy((new Date).valueOf(),t,"loadtime")},_accelerometerCollector:function(t){var e=t.accelerationIncludingGravity.x||t.accelerationIncludingGravity.y||t.accelerationIncludingGravity.z;if(window.orientation){var r=window.orientation;"number"==typeof r&&h.random.addEntropy(r,1,"accelerometer")}e&&h.random.addEntropy(e,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(t,e){var r,n=h.random._callbacks[t],i=[];for(r in n)n.hasOwnProperty(r)&&i.push(n[r]);for(r=0;r<i.length;r++)i[r](e)}},h.random=new h.prng(6),function(){function e(){try{return r(42)}catch(t){return null}}try{var n,i,o;if("undefined"!=typeof t&&t.exports&&(i=e())&&i.randomBytes)n=i.randomBytes(128),n=new Uint32Array(new Uint8Array(n).buffer),h.random.addEntropy(n,1024,"crypto.randomBytes");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(o=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(o);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return;window.msCrypto.getRandomValues(o)}h.random.addEntropy(o,1024,"crypto.getRandomValues")}}catch(s){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(s))}}(),h.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},_encrypt:function(t,e,r,n){r=r||{},n=n||{};var i,o,s,a=h.json,c=a._add({iv:h.random.randomWords(4,0)},a.defaults);if(a._add(c,r),s=c.adata,"string"==typeof c.salt&&(c.salt=h.codec.base64.toBits(c.salt)),"string"==typeof c.iv&&(c.iv=h.codec.base64.toBits(c.iv)),!h.mode[c.mode]||!h.cipher[c.cipher]||"string"==typeof t&&c.iter<=100||64!==c.ts&&96!==c.ts&&128!==c.ts||128!==c.ks&&192!==c.ks&&256!==c.ks||c.iv.length<2||c.iv.length>4)throw new h.exception.invalid("json encrypt: invalid parameters");return"string"==typeof t?(i=h.misc.cachedPbkdf2(t,c),t=i.key.slice(0,c.ks/32),c.salt=i.salt):h.ecc&&t instanceof h.ecc.elGamal.publicKey&&(i=t.kem(),c.kemtag=i.tag,t=i.key.slice(0,c.ks/32)),"string"==typeof e&&(e=h.codec.utf8String.toBits(e)),"string"==typeof s&&(s=h.codec.utf8String.toBits(s)),o=new h.cipher[c.cipher](t),a._add(n,c),n.key=t,c.ct=h.mode[c.mode].encrypt(o,e,c.iv,s,c.ts),c},encrypt:function(){var t=h.json,e=t._encrypt.apply(t,arguments);return t.encode(e)},_decrypt:function(t,e,r,n){r=r||{},n=n||{};var i,o,s,a=h.json,c=a._add(a._add(a._add({},a.defaults),e),r,!0),u=c.adata;if("string"==typeof c.salt&&(c.salt=h.codec.base64.toBits(c.salt)),"string"==typeof c.iv&&(c.iv=h.codec.base64.toBits(c.iv)),!h.mode[c.mode]||!h.cipher[c.cipher]||"string"==typeof t&&c.iter<=100||64!==c.ts&&96!==c.ts&&128!==c.ts||128!==c.ks&&192!==c.ks&&256!==c.ks||!c.iv||c.iv.length<2||c.iv.length>4)throw new h.exception.invalid("json decrypt: invalid parameters");return"string"==typeof t?(o=h.misc.cachedPbkdf2(t,c),t=o.key.slice(0,c.ks/32),c.salt=o.salt):h.ecc&&t instanceof h.ecc.elGamal.secretKey&&(t=t.unkem(h.codec.base64.toBits(c.kemtag)).slice(0,c.ks/32)),"string"==typeof u&&(u=h.codec.utf8String.toBits(u)),s=new h.cipher[c.cipher](t),i=h.mode[c.mode].decrypt(s,c.ct,c.iv,u,c.ts),a._add(n,c),n.key=t,1===r.raw?i:h.codec.utf8String.fromBits(i)},decrypt:function(t,e,r,n){var i=h.json;return i._decrypt(t,i.decode(e),r,n)},encode:function(t){var e,r="{",n="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new h.exception.invalid("json encode: invalid property name");switch(r+=n+'"'+e+'":',n=",",typeof t[e]){case"number":case"boolean":r+=t[e];break;case"string":r+='"'+escape(t[e])+'"';break;case"object":r+='"'+h.codec.base64.fromBits(t[e],0)+'"';break;default:throw new h.exception.bug("json encode: unsupported type")}}return r+"}"},decode:function(t){if(t=t.replace(/\s/g,""),!t.match(/^\{.*\}$/))throw new h.exception.invalid("json decode: this isn't json!");var e,r,n=t.replace(/^\{|\}$/g,"").split(/,/),i={};for(e=0;e<n.length;e++){if(!(r=n[e].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new h.exception.invalid("json decode: this isn't json!");r[3]?i[r[2]]=parseInt(r[3],10):r[4]?i[r[2]]=r[2].match(/^(ct|salt|iv)$/)?h.codec.base64.toBits(r[4]):unescape(r[4]):r[5]&&(i[r[2]]="true"===r[5])}return i},_add:function(t,e,r){if(void 0===t&&(t={}),void 0===e)return t;var n;for(n in e)if(e.hasOwnProperty(n)){if(r&&void 0!==t[n]&&t[n]!==e[n])throw new h.exception.invalid("required parameter overridden");t[n]=e[n]}return t},_subtract:function(t,e){var r,n={};for(r in t)t.hasOwnProperty(r)&&t[r]!==e[r]&&(n[r]=t[r]);return n},_filter:function(t,e){var r,n={};for(r=0;r<e.length;r++)void 0!==t[e[r]]&&(n[e[r]]=t[e[r]]);return n}},h.encrypt=h.json.encrypt,h.decrypt=h.json.decrypt,h.misc._pbkdf2Cache={},h.misc.cachedPbkdf2=function(t,e){var r,n,i,o,s=h.misc._pbkdf2Cache;return e=e||{},o=e.iter||1e3,n=s[t]=s[t]||{},r=n[o]=n[o]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):h.random.randomWords(2,0)},i=void 0===e.salt?r.firstSalt:e.salt,r[i]=r[i]||h.misc.pbkdf2(t,i,e.iter),{key:r[i].slice(0),salt:i.slice(0)}},h.bn=function(t){this.initWith(t)},h.bn.prototype={radix:24,maxMul:8,_class:h.bn,copy:function(){return new this._class(this)},initWith:function(t){var e,r=0;switch(typeof t){case"object":this.limbs=t.limbs.slice(0);break;case"number":this.limbs=[t],this.normalize();break;case"string":for(t=t.replace(/^0x/,""),this.limbs=[],e=this.radix/4,r=0;r<t.length;r+=e)this.limbs.push(parseInt(t.substring(Math.max(t.length-r-e,0),t.length-r),16));break;default:this.limbs=[0]}return this},equals:function(t){"number"==typeof t&&(t=new this._class(t));var e,r=0;for(this.fullReduce(),t.fullReduce(),e=0;e<this.limbs.length||e<t.limbs.length;e++)r|=this.getLimb(e)^t.getLimb(e);return 0===r},getLimb:function(t){return t>=this.limbs.length?0:this.limbs[t]},greaterEquals:function(t){"number"==typeof t&&(t=new this._class(t));var e,r,n,i=0,o=0;for(e=Math.max(this.limbs.length,t.limbs.length)-1;e>=0;e--)r=this.getLimb(e),n=t.getLimb(e),o|=n-r&~i,i|=r-n&~o;return(o|~i)>>>31},toString:function(){this.fullReduce();var t,e,r="",n=this.limbs;for(t=0;t<this.limbs.length;t++){for(e=n[t].toString(16);t<this.limbs.length-1&&e.length<6;)e="0"+e;r=e+r}return"0x"+r},addM:function(t){"object"!=typeof t&&(t=new this._class(t));var e,r=this.limbs,n=t.limbs;for(e=r.length;e<n.length;e++)r[e]=0;for(e=0;e<n.length;e++)r[e]+=n[e];return this},doubleM:function(){var t,e,r=0,n=this.radix,i=this.radixMask,o=this.limbs;for(t=0;t<o.length;t++)e=o[t],e=e+e+r,o[t]=e&i,r=e>>n;return r&&o.push(r),this},halveM:function(){var t,e,r=0,n=this.radix,i=this.limbs;for(t=i.length-1;t>=0;t--)e=i[t],i[t]=e+r>>1,r=(1&e)<<n;return i[i.length-1]||i.pop(),this},subM:function(t){"object"!=typeof t&&(t=new this._class(t));var e,r=this.limbs,n=t.limbs;for(e=r.length;e<n.length;e++)r[e]=0;for(e=0;e<n.length;e++)r[e]-=n[e];return this},mod:function(t){var e=!this.greaterEquals(new h.bn(0));t=new h.bn(t).normalize();var r=new h.bn(this).normalize(),n=0;for(e&&(r=new h.bn(0).subM(r).normalize());r.greaterEquals(t);n++)t.doubleM();for(e&&(r=t.sub(r).normalize());n>0;n--)t.halveM(),r.greaterEquals(t)&&r.subM(t).normalize();return r.trim()},inverseMod:function(t){var e,r,n=new h.bn(1),i=new h.bn(0),o=new h.bn(this),s=new h.bn(t),a=1;if(!(1&t.limbs[0]))throw new h.exception.invalid("inverseMod: p must be odd");do for(1&o.limbs[0]&&(o.greaterEquals(s)||(e=o,o=s,s=e,e=n,n=i,i=e),o.subM(s),o.normalize(),n.greaterEquals(i)||n.addM(t),n.subM(i)),o.halveM(),1&n.limbs[0]&&n.addM(t),n.normalize(),n.halveM(),r=a=0;r<o.limbs.length;r++)a|=o.limbs[r];while(a);if(!s.equals(1))throw new h.exception.invalid("inverseMod: p and x must be relatively prime");return i},add:function(t){return this.copy().addM(t)},sub:function(t){return this.copy().subM(t)},mul:function(t){"number"==typeof t&&(t=new this._class(t));var e,r,n,i=this.limbs,o=t.limbs,s=i.length,a=o.length,c=new this._class,u=c.limbs,h=this.maxMul;for(e=0;e<this.limbs.length+t.limbs.length+1;e++)u[e]=0;for(e=0;s>e;e++){for(n=i[e],r=0;a>r;r++)u[e+r]+=n*o[r];--h||(h=this.maxMul,c.cnormalize())}return c.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(t){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs);var e,r,n=new this._class(1),i=this;for(e=0;e<t.length;e++)for(r=0;r<this.radix;r++)t[e]&1<<r&&(n=n.mul(i)),i=i.square();return n},mulmod:function(t,e){return this.mod(e).mul(t.mod(e)).mod(e)},powermod:function(t,e){for(var r=new h.bn(1),n=new h.bn(this),i=new h.bn(t);;){if(1&i.limbs[0]&&(r=r.mulmod(n,e)),i.halveM(),i.equals(0))break;n=n.mulmod(n,e)}return r.normalize().reduce()},trim:function(){var t,e=this.limbs;do t=e.pop();while(e.length&&0===t);return e.push(t),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var t,e,r,n=0,i=this.placeVal,o=this.ipv,s=this.limbs,a=s.length,c=this.radixMask;for(t=0;a>t||0!==n&&-1!==n;t++)e=(s[t]||0)+n,r=s[t]=e&c,n=(e-r)*o;return-1===n&&(s[t-1]-=i),this},cnormalize:function(){var t,e,r,n=0,i=this.ipv,o=this.limbs,s=o.length,a=this.radixMask;for(t=0;s-1>t;t++)e=o[t]+n,r=o[t]=e&a,n=(e-r)*i;return o[t]+=n,this},toBits:function(t){this.fullReduce(),t=t||this.exponent||this.bitLength();var e=Math.floor((t-1)/24),r=h.bitArray,n=(t+7&-8)%this.radix||this.radix,i=[r.partial(n,this.getLimb(e))];for(e--;e>=0;e--)i=r.concat(i,[r.partial(Math.min(this.radix,t),this.getLimb(e))]),t-=this.radix;return i},bitLength:function(){this.fullReduce();for(var t=this.radix*(this.limbs.length-1),e=this.limbs[this.limbs.length-1];e;e>>>=1)t++;return t+7&-8}},h.bn.fromBits=function(t){var e=this,r=new e,n=[],i=h.bitArray,o=this.prototype,s=Math.min(this.bitLength||4294967296,i.bitLength(t)),a=s%o.radix||o.radix;for(n[0]=i.extract(t,0,a);s>a;a+=o.radix)n.unshift(i.extract(t,a,o.radix));return r.limbs=n,r},h.bn.prototype.ipv=1/(h.bn.prototype.placeVal=Math.pow(2,h.bn.prototype.radix)),h.bn.prototype.radixMask=(1<<h.bn.prototype.radix)-1,h.bn.pseudoMersennePrime=function(t,e){function r(t){this.initWith(t)}var n,i,o,s=r.prototype=new h.bn;for(o=s.modOffset=Math.ceil(i=t/s.radix),s.exponent=t,s.offset=[],s.factor=[],s.minOffset=o,s.fullMask=0,s.fullOffset=[],s.fullFactor=[],s.modulus=r.modulus=new h.bn(Math.pow(2,t)),s.fullMask=0|-Math.pow(2,t%s.radix),n=0;n<e.length;n++)s.offset[n]=Math.floor(e[n][0]/s.radix-i),s.fullOffset[n]=Math.ceil(e[n][0]/s.radix-i),s.factor[n]=e[n][1]*Math.pow(.5,t-e[n][0]+s.offset[n]*s.radix),s.fullFactor[n]=e[n][1]*Math.pow(.5,t-e[n][0]+s.fullOffset[n]*s.radix),s.modulus.addM(new h.bn(Math.pow(2,e[n][0])*e[n][1])),s.minOffset=Math.min(s.minOffset,-s.offset[n]);return s._class=r,s.modulus.cnormalize(),s.reduce=function(){var t,e,r,n,i=this.modOffset,o=this.limbs,s=this.offset,a=this.offset.length,c=this.factor;for(t=this.minOffset;o.length>i;){for(r=o.pop(),n=o.length,e=0;a>e;e++)o[n+s[e]]-=c[e]*r;t--,t||(o.push(0),this.cnormalize(),t=this.minOffset)}return this.cnormalize(),this},s._strongReduce=-1===s.fullMask?s.reduce:function(){var t,e,r=this.limbs,n=r.length-1;if(this.reduce(),n===this.modOffset-1){for(e=r[n]&this.fullMask,r[n]-=e,t=0;t<this.fullOffset.length;t++)r[n+this.fullOffset[t]]-=this.fullFactor[t]*e;this.normalize()}},s.fullReduce=function(){var t,e;for(this._strongReduce(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this._strongReduce(),e=this.limbs.length;e<this.modOffset;e++)this.limbs[e]=0;for(t=this.greaterEquals(this.modulus),e=0;e<this.limbs.length;e++)this.limbs[e]-=this.modulus.limbs[e]*t;return this.cnormalize(),this},s.inverse=function(){return this.power(this.modulus.sub(2))},r.fromBits=h.bn.fromBits,r};var f=h.bn.pseudoMersennePrime;h.bn.prime={p127:f(127,[[0,-1]]),p25519:f(255,[[0,-19]]),p192k:f(192,[[32,-1],[12,-1],[8,-1],[7,-1],[6,-1],[3,-1],[0,-1]]),p224k:f(224,[[32,-1],[12,-1],[11,-1],[9,-1],[7,-1],[4,-1],[1,-1],[0,-1]]),p256k:f(256,[[32,-1],[9,-1],[8,-1],[7,-1],[6,-1],[4,-1],[0,-1]]),p192:f(192,[[0,-1],[64,-1]]),p224:f(224,[[0,1],[96,-1]]),p256:f(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:f(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:f(521,[[0,-1]])},h.bn.random=function(t,e){"object"!=typeof t&&(t=new h.bn(t));for(var r,n,i=t.limbs.length,o=t.limbs[i-1]+1,s=new h.bn;;){do r=h.random.randomWords(i,e),r[i-1]<0&&(r[i-1]+=4294967296);while(Math.floor(r[i-1]/o)===Math.floor(4294967296/o));for(r[i-1]%=o,n=0;i-1>n;n++)r[n]&=t.radixMask;if(s.limbs=r,!s.greaterEquals(t))return s}},h.ecc={},h.ecc.point=function(t,e,r){void 0===e?this.isIdentity=!0:(e instanceof h.bn&&(e=new t.field(e)),r instanceof h.bn&&(r=new t.field(r)),this.x=e,this.y=r,this.isIdentity=!1),this.curve=t},h.ecc.point.prototype={toJac:function(){return new h.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(t){return this.toJac().mult(t,this).toAffine()},mult2:function(t,e,r){return this.toJac().mult2(t,this,e,r).toAffine()},multiples:function(){var t,e,r;if(void 0===this._multiples)for(r=this.toJac().doubl(),t=this._multiples=[new h.ecc.point(this.curve),this,r.toAffine()],e=3;16>e;e++)r=r.add(this),t.push(r.toAffine());return this._multiples},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return h.bitArray.concat(this.x.toBits(),this.y.toBits())}},h.ecc.pointJac=function(t,e,r,n){void 0===e?this.isIdentity=!0:(this.x=e,this.y=r,this.z=n,this.isIdentity=!1),this.curve=t},h.ecc.pointJac.prototype={add:function(t){var e,r,n,i,o,s,a,c,u,f,l,p=this;if(p.curve!==t.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";return p.isIdentity?t.toJac():t.isIdentity?p:(e=p.z.square(),r=t.x.mul(e).subM(p.x),r.equals(0)?p.y.equals(t.y.mul(e.mul(p.z)))?p.doubl():new h.ecc.pointJac(p.curve):(n=t.y.mul(e.mul(p.z)).subM(p.y),i=r.square(),o=n.square(),s=r.square().mul(r).addM(p.x.add(p.x).mul(i)),a=o.subM(s),c=p.x.mul(i).subM(a).mul(n),u=p.y.mul(r.square().mul(r)),f=c.subM(u),l=p.z.mul(r),new h.ecc.pointJac(this.curve,a,f,l)))},doubl:function(){if(this.isIdentity)return this;var t=this.y.square(),e=t.mul(this.x.mul(4)),r=t.square().mul(8),n=this.z.square(),i=this.curve.a.toString()==new h.bn(-3).toString()?this.x.sub(n).mul(3).mul(this.x.add(n)):this.x.square().mul(3).add(n.square().mul(this.curve.a)),o=i.square().subM(e).subM(e),s=e.sub(o).mul(i).subM(r),a=this.y.add(this.y).mul(this.z);return new h.ecc.pointJac(this.curve,o,s,a)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new h.ecc.point(this.curve);var t=this.z.inverse(),e=t.square();return new h.ecc.point(this.curve,this.x.mul(e).fullReduce(),this.y.mul(e.mul(t)).fullReduce())},mult:function(t,e){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs);var r,n,i=new h.ecc.point(this.curve).toJac(),o=e.multiples();for(r=t.length-1;r>=0;r--)for(n=h.bn.prototype.radix-4;n>=0;n-=4)i=i.doubl().doubl().doubl().doubl().add(o[t[r]>>n&15]);return i},mult2:function(t,e,r,n){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs),"number"==typeof r?r=[r]:void 0!==r.limbs&&(r=r.normalize().limbs);var i,o,s,a,c=new h.ecc.point(this.curve).toJac(),u=e.multiples(),f=n.multiples();for(i=Math.max(t.length,r.length)-1;i>=0;i--)for(s=0|t[i],a=0|r[i],o=h.bn.prototype.radix-4;o>=0;o-=4)c=c.doubl().doubl().doubl().doubl().add(u[s>>o&15]).add(f[a>>o&15]);return c},isValid:function(){var t=this.z.square(),e=t.square(),r=e.mul(t);return this.y.square().equals(this.curve.b.mul(r).add(this.x.mul(this.curve.a.mul(e).add(this.x.square()))))}},h.ecc.curve=function(t,e,r,n,i,o){this.field=t,this.r=new h.bn(e),this.a=new t(r),this.b=new t(n),this.G=new h.ecc.point(this,new t(i),new t(o))},h.ecc.curve.prototype.fromBits=function(t){var e=h.bitArray,r=this.field.prototype.exponent+7&-8,n=new h.ecc.point(this,this.field.fromBits(e.bitSlice(t,0,r)),this.field.fromBits(e.bitSlice(t,r,2*r)));if(!n.isValid())throw new h.exception.corrupt("not on the curve!");return n},h.ecc.curves={c192:new h.ecc.curve(h.bn.prime.p192,"0xffffffffffffffffffffffff99def836146bc9b1b4d22831",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new h.ecc.curve(h.bn.prime.p224,"0xffffffffffffffffffffffffffff16a2e0b8f03e13dd29455c5c2a3d",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new h.ecc.curve(h.bn.prime.p256,"0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new h.ecc.curve(h.bn.prime.p384,"0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),k192:new h.ecc.curve(h.bn.prime.p192k,"0xfffffffffffffffffffffffe26f2fc170f69466a74defd8d",0,3,"0xdb4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d","0x9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"),k224:new h.ecc.curve(h.bn.prime.p224k,"0x010000000000000000000000000001dce8d2ec6184caf0a971769fb1f7",0,5,"0xa1455b334df099df30fc28a169a467e9e47075a90f7e650eb6b7a45c","0x7e089fed7fba344282cafbd6f7e319f7c0b0bd59e2ca4bdb556d61a5"),k256:new h.ecc.curve(h.bn.prime.p256k,"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},h.ecc.basicKey={publicKey:function(t,e){this._curve=t,this._curveBitLength=t.r.bitLength(),this._point=e instanceof Array?t.fromBits(e):e,this.get=function(){var t=this._point.toBits(),e=h.bitArray.bitLength(t),r=h.bitArray.bitSlice(t,0,e/2),n=h.bitArray.bitSlice(t,e/2);return{x:r,y:n}}},secretKey:function(t,e){this._curve=t,this._curveBitLength=t.r.bitLength(),this._exponent=e,this.get=function(){return this._exponent.toBits()}}},h.ecc.basicKey.generateKeys=function(t){return function(e,r,n){if(e=e||256,"number"==typeof e&&(e=h.ecc.curves["c"+e],void 0===e))throw new h.exception.invalid("no such curve");n=n||h.bn.random(e.r,r);var i=e.G.mult(n);return{pub:new h.ecc[t].publicKey(e,i),sec:new h.ecc[t].secretKey(e,n)}}},h.ecc.elGamal={generateKeys:h.ecc.basicKey.generateKeys("elGamal"),publicKey:function(){h.ecc.basicKey.publicKey.apply(this,arguments)},secretKey:function(){h.ecc.basicKey.secretKey.apply(this,arguments)}},h.ecc.elGamal.publicKey.prototype={kem:function(t){var e=h.bn.random(this._curve.r,t),r=this._curve.G.mult(e).toBits(),n=h.hash.sha256.hash(this._point.mult(e).toBits());return{key:n,tag:r}}},h.ecc.elGamal.secretKey.prototype={unkem:function(t){return h.hash.sha256.hash(this._curve.fromBits(t).mult(this._exponent).toBits())},dh:function(t){return h.hash.sha256.hash(t._point.mult(this._exponent).toBits())},dhJavaEc:function(t){return t._point.mult(this._exponent).x.toBits()}},h.ecc.ecdsa={generateKeys:h.ecc.basicKey.generateKeys("ecdsa")},h.ecc.ecdsa.publicKey=function(){h.ecc.basicKey.publicKey.apply(this,arguments)},h.ecc.ecdsa.publicKey.prototype={verify:function(t,e,r){h.bitArray.bitLength(t)>this._curveBitLength&&(t=h.bitArray.clamp(t,this._curveBitLength));var n=h.bitArray,i=this._curve.r,o=this._curveBitLength,s=h.bn.fromBits(n.bitSlice(e,0,o)),a=h.bn.fromBits(n.bitSlice(e,o,2*o)),c=r?a:a.inverseMod(i),u=h.bn.fromBits(t).mul(c).mod(i),f=s.mul(c).mod(i),l=this._curve.G.mult2(u,f,this._point).x;if(s.equals(0)||a.equals(0)||s.greaterEquals(i)||a.greaterEquals(i)||!l.equals(s)){if(void 0===r)return this.verify(t,e,!0);throw new h.exception.corrupt("signature didn't check out")}return!0}},h.ecc.ecdsa.secretKey=function(){h.ecc.basicKey.secretKey.apply(this,arguments)},h.ecc.ecdsa.secretKey.prototype={sign:function(t,e,r,n){h.bitArray.bitLength(t)>this._curveBitLength&&(t=h.bitArray.clamp(t,this._curveBitLength));var i=this._curve.r,o=i.bitLength(),s=n||h.bn.random(i.sub(1),e).add(1),a=this._curve.G.mult(s).x.mod(i),c=h.bn.fromBits(t).add(a.mul(this._exponent)),u=r?c.inverseMod(i).mul(s).mod(i):c.mul(s.inverseMod(i)).mod(i);return h.bitArray.concat(a.toBits(o),u.toBits(o))}},h.keyexchange.srp={makeVerifier:function(t,e,r,n){var i;return i=h.keyexchange.srp.makeX(t,e,r),i=h.bn.fromBits(i),n.g.powermod(i,n.N)},makeX:function(t,e,r){var n=h.hash.sha1.hash(t+":"+e);return h.hash.sha1.hash(h.bitArray.concat(r,n))},knownGroup:function(t){return"string"!=typeof t&&(t=t.toString()),h.keyexchange.srp._didInitKnownGroups||h.keyexchange.srp._initKnownGroups(),h.keyexchange.srp._knownGroups[t]},_didInitKnownGroups:!1,_initKnownGroups:function(){var t,e,r;for(t=0;t<h.keyexchange.srp._knownGroupSizes.length;t++)e=h.keyexchange.srp._knownGroupSizes[t].toString(),r=h.keyexchange.srp._knownGroups[e],r.N=new h.bn(r.N),r.g=new h.bn(r.g);h.keyexchange.srp._didInitKnownGroups=!0},_knownGroupSizes:[1024,1536,2048],_knownGroups:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:2},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:2},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:2}}},h.ecc.point.prototype.isValidPoint=function(){var t=this,e=t.curve.field.modulus;return t.isIdentity?!1:new h.bn(1).greaterEquals(t.x)&&!t.x.equals(1)||t.x.greaterEquals(e.sub(1))&&!t.x.equals(1)?!1:new h.bn(1).greaterEquals(t.y)&&!t.y.equals(1)||t.y.greaterEquals(e.sub(1))&&!t.y.equals(1)?!1:t.isOnCurve()?!0:!1},h.ecc.point.prototype.isOnCurve=function(){var t=this,e=(t.curve.r,t.curve.a),r=t.curve.b,n=t.curve.field.modulus,i=t.y.mul(t.y).mod(n),o=t.x.mul(t.x).mul(t.x).add(e.mul(t.x)).add(r).mod(n);return i.equals(o)},h.ecc.point.prototype.toString=function(){return"("+this.x.toString()+", "+this.y.toString()+")"},h.ecc.pointJac.prototype.toString=function(){return"("+this.x.toString()+", "+this.y.toString()+", "+this.z.toString()+")"},h.ecc.point.prototype.toBytesCompressed=function(){var t="0x0"==this.y.mod(2).toString()?2:3;return[t].concat(h.codec.bytes.fromBits(this.x.toBits()))},h.ecc.pointJac.prototype.add=function(t){var e=this;if(e.curve!==t.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";if(e.isIdentity)return t.toJac();if(t.isIdentity)return e;var r=e.z.square(),n=t.x.mul(r).subM(e.x),i=t.y.mul(e.z).mul(r);if(n.equals(0))return e.y.equals(t.y.mul(r.mul(e.z)))?e.doubl():new h.ecc.pointJac(e.curve);var o=n.square(),s=o.copy().doubleM().doubleM(),a=n.mul(s),c=i.sub(e.y).doubleM(),u=e.x.mul(s),f=c.square().subM(a).subM(u.copy().doubleM()),l=c.mul(u.sub(f)).subM(e.y.mul(a).doubleM()),p=e.z.add(n).square().subM(r).subM(o);return new h.ecc.pointJac(this.curve,f,l,p)},h.ecc.pointJac.prototype.doubl=function(){if(this.isIdentity)return this;var t=this.x.square(),e=this.y.square(),r=e.square(),n=this.x.add(e).square().subM(t).subM(r).doubleM(),i=t.mul(3),o=i.square(),s=o.sub(n.copy().doubleM()),a=i.mul(n.sub(s)).subM(r.doubleM().doubleM().doubleM()),c=this.z.mul(this.y).doubleM();return new h.ecc.pointJac(this.curve,s,a,c)},h.ecc.curves.c256=h.ecc.curves.k256,function(){function t(t,e,r){return t^e^r}function e(t,e,r){return t&e|~t&r}function r(t,e,r){return(t|~e)^r}function n(t,e,r){return t&r|e&~r}function i(t,e,r){return t^(e|~r)}function o(t,e){return t<<e|t>>>32-e}function s(t){return(255&t)<<24|(65280&t)<<8|(t&255<<16)>>>8|(t&255<<24)>>>24}function a(s){for(var a,c=this._h[0],h=this._h[1],l=this._h[2],p=this._h[3],g=this._h[4],m=this._h[0],b=this._h[1],w=this._h[2],E=this._h[3],x=this._h[4],S=0;16>S;++S)a=o(c+t(h,l,p)+s[d[S]]+u[S],v[S])+g,c=g,g=p,p=o(l,10),l=h,h=a,a=o(m+i(b,w,E)+s[_[S]]+f[S],y[S])+x,m=x,x=E,E=o(w,10),w=b,b=a;for(;32>S;++S)a=o(c+e(h,l,p)+s[d[S]]+u[S],v[S])+g,c=g,g=p,p=o(l,10),l=h,h=a,a=o(m+n(b,w,E)+s[_[S]]+f[S],y[S])+x,m=x,x=E,E=o(w,10),w=b,b=a;for(;48>S;++S)a=o(c+r(h,l,p)+s[d[S]]+u[S],v[S])+g,c=g,g=p,p=o(l,10),l=h,h=a,a=o(m+r(b,w,E)+s[_[S]]+f[S],y[S])+x,m=x,x=E,E=o(w,10),w=b,b=a;for(;64>S;++S)a=o(c+n(h,l,p)+s[d[S]]+u[S],v[S])+g,c=g,g=p,p=o(l,10),l=h,h=a,a=o(m+e(b,w,E)+s[_[S]]+f[S],y[S])+x,m=x,x=E,E=o(w,10),w=b,b=a;for(;80>S;++S)a=o(c+i(h,l,p)+s[d[S]]+u[S],v[S])+g,c=g,g=p,p=o(l,10),l=h,h=a,a=o(m+t(b,w,E)+s[_[S]]+f[S],y[S])+x,m=x,x=E,E=o(w,10),w=b,b=a;a=this._h[1]+l+E,this._h[1]=this._h[2]+p+x,this._h[2]=this._h[3]+g+m,this._h[3]=this._h[4]+c+b,this._h[4]=this._h[0]+h+w,this._h[0]=a}h.hash.ripemd160=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},h.hash.ripemd160.hash=function(t){return(new h.hash.ripemd160).update(t).finalize()},h.hash.ripemd160.prototype={reset:function(){return this._h=c.slice(0),this._buffer=[],this._length=0,this
},update:function(t){"string"==typeof t&&(t=h.codec.utf8String.toBits(t));var e,r=this._buffer=h.bitArray.concat(this._buffer,t),n=this._length,i=this._length=n+h.bitArray.bitLength(t);for(e=512+n&-512;i>=e;e+=512){for(var o=r.splice(0,16),c=0;16>c;++c)o[c]=s(o[c]);a.call(this,o)}return this},finalize:function(){var t=h.bitArray.concat(this._buffer,[h.bitArray.partial(1,1)]),e=(this._length+1)%512,r=(e>448?512:448)-e%448,n=r%32;for(n>0&&(t=h.bitArray.concat(t,[h.bitArray.partial(n,0)]));r>=32;r-=32)t.push(0);for(t.push(s(0|this._length)),t.push(s(Math.floor(this._length/4294967296)));t.length;){for(var i=t.splice(0,16),o=0;16>o;++o)i[o]=s(i[o]);a.call(this,i)}var c=this._h;this.reset();for(var o=0;5>o;++o)c[o]=s(c[o]);return c}};for(var c=[1732584193,4023233417,2562383102,271733878,3285377520],u=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0],l=4;l>=0;--l)for(var p=1;16>p;++p)u.splice(l,0,u[l]),f.splice(l,0,f[l]);var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}(),h.bn.ZERO=new h.bn(0),h.bn.prototype.divRem=function(t){"object"!=typeof t&&(t=new this._class(t));var e=this.abs(),r=t.abs(),n=new this._class(0),i=0;if(!e.greaterEquals(r))return[new h.bn(0),this.copy()];if(e.equals(r))return[new h.bn(1),new h.bn(0)];for(;e.greaterEquals(r);i++)r.doubleM();for(;i>0;i--)n.doubleM(),r.halveM(),e.greaterEquals(r)&&(n.addM(1),e.subM(t).normalize());return[n,e]},h.bn.prototype.divRound=function(t){var e=this.divRem(t),r=e[0],n=e[1];return n.doubleM().greaterEquals(t)&&r.addM(1),r},h.bn.prototype.div=function(t){var e=this.divRem(t);return e[0]},h.bn.prototype.sign=function(){return this.greaterEquals(h.bn.ZERO)?1:-1},h.bn.prototype.neg=function(){return h.bn.ZERO.sub(this)},h.bn.prototype.abs=function(){return-1===this.sign()?this.neg():this},h.bn.prototype.shiftRight=function(t){if("number"!=typeof t)throw new Error("shiftRight expects a number");if(t=+t,0>t)return this.shiftLeft(t);for(var e=new h.bn(this);t>=this.radix;)e.limbs.shift(),t-=this.radix;for(;t--;)e.halveM();return e},h.bn.prototype.shiftLeft=function(t){if("number"!=typeof t)throw new Error("shiftLeft expects a number");if(t=+t,0>t)return this.shiftRight(t);for(var e=new h.bn(this);t>=this.radix;)e.limbs.unshift(0),t-=this.radix;for(;t--;)e.doubleM();return e},h.bn.prototype.toNumber=function(){return 0|this.limbs[0]},h.bn.prototype.testBit=function(t){var e=Math.floor(t/this.radix),r=t%this.radix;return e>=this.limbs.length?0:this.limbs[e]>>>r&1},h.bn.prototype.setBitM=function(t){for(var e=Math.floor(t/this.radix),r=t%this.radix;e>=this.limbs.length;)this.limbs.push(0);return this.limbs[e]|=1<<r,this.cnormalize(),this},h.bn.prototype.modInt=function(t){return this.toNumber()%t},h.bn.prototype.invDigit=function(){var t=1+this.radixMask;if(this.limbs.length<1)return 0;var e=this.limbs[0];if(0==(1&e))return 0;var r=3&e;return r=r*(2-(15&e)*r)&15,r=r*(2-(255&e)*r)&255,r=r*(2-((65535&e)*r&65535))&65535,r=r*(2-e*r%t)%t,r>0?t-r:-r},h.bn.prototype.am=function(t,e,r,n,i,o){for(var s=4095&e,a=e>>12;--o>=0;){var c=4095&this.limbs[t],u=this.limbs[t++]>>12,h=a*c+u*s;c=s*c+((4095&h)<<12)+r.limbs[n]+i,i=(c>>24)+(h>>12)+a*u,r.limbs[n++]=16777215&c}return i};var l=function(t){this.m=t,this.mt=t.limbs.length,this.mt2=2*this.mt,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.radix-15)-1};l.prototype.reduce=function(t){for(var e=t.radixMask+1;t.limbs.length<=this.mt2;)t.limbs[t.limbs.length]=0;for(var r=0;r<this.mt;++r){var n=32767&t.limbs[r],i=n*this.mpl+((n*this.mph+(t.limbs[r]>>15)*this.mpl&this.um)<<15)&t.radixMask;for(n=r+this.mt,t.limbs[n]+=this.m.am(0,i,t,r,0,this.mt);t.limbs[n]>=e;)t.limbs[n]-=e,t.limbs[++n]++}return t.trim(),t=t.shiftRight(this.mt*this.m.radix),t.greaterEquals(this.m)&&(t=t.sub(this.m)),t.trim().normalize().reduce()},l.prototype.square=function(t){return this.reduce(t.square())},l.prototype.multiply=function(t,e){return this.reduce(t.mul(e))},l.prototype.convert=function(t){return t.abs().shiftLeft(this.mt*this.m.radix).mod(this.m)},l.prototype.revert=function(t){return this.reduce(t.copy())},h.bn.prototype.powermodMontgomery=function(t,e){var r,i=t.bitLength(),o=new this._class(1);if(0>=i)return o;if(r=18>i?1:48>i?3:144>i?4:768>i?5:6,8>i||!e.testBit(0))return this.powermod(t,e);var s=new l(e);t.trim().normalize();var a=new Array,c=3,u=r-1,h=(1<<r)-1;if(a[1]=s.convert(this),r>1)for(var f=s.square(a[1]);h>=c;)a[c]=s.multiply(f,a[c-2]),c+=2;var p,d,_=t.limbs.length-1,v=!0,y=new this._class;for(i=n(t.limbs[_])-1;_>=0;){for(i>=u?p=t.limbs[_]>>i-u&h:(p=(t.limbs[_]&(1<<i+1)-1)<<u-i,_>0&&(p|=t.limbs[_-1]>>this.radix+i-u)),c=r;0==(1&p);)p>>=1,--c;if((i-=c)<0&&(i+=this.radix,--_),v)o=a[p].copy(),v=!1;else{for(;c>1;)y=s.square(o),o=s.square(y),c-=2;c>0?y=s.square(o):(d=o,o=y,y=d),o=s.multiply(y,a[p])}for(;_>=0&&0==(t.limbs[_]&1<<i);)y=s.square(o),d=o,o=y,y=d,--i<0&&(i=this.radix-1,--_)}return s.revert(o)},h.ecc.ecdsa.secretKey.prototype.sign=function(t,e,r){var n,i=this._curve.r,o=i.bitLength();n="object"==typeof r&&r.length>0&&"number"==typeof r[0]?r:"string"==typeof r&&/^[0-9a-fA-F]+$/.test(r)?h.bn.fromBits(h.codec.hex.toBits(r)):h.bn.random(i.sub(1),e).add(1);var s=this._curve.G.mult(n).x.mod(i),a=h.bn.fromBits(t).add(s.mul(this._exponent)).mul(n.inverseMod(i)).mod(i);return h.bitArray.concat(s.toBits(o),a.toBits(o))},h.ecc.ecdsa.publicKey.prototype.verify=function(t,e){var r=h.bitArray,n=this._curve.r,i=n.bitLength(),o=h.bn.fromBits(r.bitSlice(e,0,i)),s=h.bn.fromBits(r.bitSlice(e,i,2*i)),a=s.inverseMod(n),c=h.bn.fromBits(t).mul(a).mod(n),u=o.mul(a).mod(n),f=this._curve.G.mult2(c,u,this._point).x;if(o.equals(0)||s.equals(0)||o.greaterEquals(n)||s.greaterEquals(n)||!f.equals(o))throw new h.exception.corrupt("signature didn't check out");return!0},h.ecc.ecdsa.secretKey.prototype.canonicalizeSignature=function(t){var e=h.bitArray,r=this._curve.r,n=r.bitLength(),i=h.bn.fromBits(e.bitSlice(t,0,n)),o=h.bn.fromBits(e.bitSlice(t,n,2*n));return r.copy().halveM().greaterEquals(o)||(o=r.sub(o)),e.concat(i.toBits(n),o.toBits(n))},h.ecc.ecdsa.secretKey.prototype.signDER=function(t,e){return this.encodeDER(this.sign(t,e))},h.ecc.ecdsa.secretKey.prototype.encodeDER=function(t){for(var e=h.bitArray,r=this._curve.r,n=r.bitLength(),i=h.codec.bytes.fromBits(e.bitSlice(t,0,n)),o=h.codec.bytes.fromBits(e.bitSlice(t,n,2*n));!i[0]&&i.length;)i.shift();for(;!o[0]&&o.length;)o.shift();128&i[0]&&i.unshift(0),128&o[0]&&o.unshift(0);var s=[].concat(48,4+i.length+o.length,2,i.length,i,2,o.length,o);return h.codec.bytes.toBits(s)};var p;h.ecc.ecdsa.secretKey.prototype.signWithRecoverablePublicKey=function(t,e,r){var n,s=this;if(!("object"==typeof t&&t.length>0&&"number"==typeof t[0]))throw new h.exception.invalid("hash. Must be a bitArray");n=t;var a=s.sign(n,e,r),c=s.canonicalizeSignature(a),u=i(s._curve,c),f=s._curve.G.mult(h.bn.fromBits(s.get())),l=o(s._curve,u.r,u.s,n,f),p=l+27,d=h.bitArray.concat([p],c);return d},h.ecc.ecdsa.publicKey.recoverFromSignature=function(t,e,r){if(!e||e instanceof h.ecc.curve)throw new h.exception.invalid("must supply hash and signature to recover public key");r||(r=h.ecc.curves.k256);var n;if(!("object"==typeof t&&t.length>0&&"number"==typeof t[0]))throw new h.exception.invalid("hash. Must be a bitArray");n=t;var o;if(!("object"==typeof e&&e.length>0&&"number"==typeof e[0]))throw new h.exception.invalid("signature. Must be a bitArray");o=e;var a=o[0]-27;if(0>a||a>3)throw new h.exception.invalid("signature. Signature must be generated with algorithm that prepends the recovery factor in order to recover the public key");var c=i(r,o.slice(1)),u=c.r,f=c.s,l=s(r,u,f,n,a),p=new h.ecc.ecdsa.publicKey(r,l);return p},h.bn.prototype.jacobi=function(t){var e=this;if(t=new h.bn(t),-1!==t.sign()){if(e.equals(0))return 0;if(e.equals(1))return 1;for(var r=0,n=0;!e.testBit(n);)n++;var i=e.shiftRight(n);if(0===(1&n))r=1;else{var o=t.modInt(8);1===o||7===o?r=1:(3===o||5===o)&&(r=-1)}return 3===t.modInt(4)&&3===i.modInt(4)&&(r=-r),i.equals(1)?r:r*t.mod(i).jacobi(i)}}},function(t,e,r){function n(){this.root=new o(0)}function i(){}function o(t){i.call(this),this.leaves={},this.type=i.INNER,this.depth=null==t?0:t,this.empty=!0}function s(t,e,r){if(i.call(this),"string"!=typeof t)throw new Error("Tag is unexpected type.");this.tag=t,this.tag_bytes=u.from_hex(this.tag).to_bytes(),this.type=r,this.node=e}var a=r(43),c=(r(17).sjcl,r(23),r(27)),u=r(10).UInt256,h=r(13).SerializedObject;n.prototype.add_item=function(t,e,r){var e=new s(t,e,r);this.root.add_item(t,e)},n.prototype.hash=function(){return this.root.hash()},i.TYPE_INNER=1,i.TYPE_TRANSACTION_NM=2,i.TYPE_TRANSACTION_MD=3,i.TYPE_ACCOUNT_STATE=4,i.prototype.add_item=function(){throw new Error("Called unimplemented virtual method SHAMapTreeNode#add_item.")},i.prototype.hash=function(){throw new Error("Called unimplemented virtual method SHAMapTreeNode#hash.")},a.inherits(o,i),o.prototype.add_item=function(t,e){var r=this.depth,n=this.get_node(t[r]);if(n)if(n instanceof o)n.add_item(t,e);else{if(n.tag===t)throw new Error("Tried to add a node to a SHAMap that was already in there.");var i=new o(r+1);i.add_item(n.tag,n),i.add_item(t,e),this.set_node(t[r],i)}else this.set_node(t[r],e)},o.prototype.set_node=function(t,e){this.leaves[t]=e,this.empty=!1},o.prototype.get_node=function(t){return this.leaves[t]},o.prototype.hash=function(){if(this.empty)return u.from_hex(u.HEX_ZERO);for(var t=new h,e=0;16>e;e++){var r=u.from_hex(u.HEX_ZERO),n=e.toString(16).toUpperCase();"object"==typeof this.leaves[n]&&(r=this.leaves[n].hash()),t.append(r.to_bytes())}var i=t.hash(c.HASH_INNER_NODE);return u.from_bits(i)},a.inherits(s,i),s.prototype.hash=function(){var t=new h;switch(this.type){case i.TYPE_ACCOUNT_STATE:return t.append(this.node),t.append(this.tag_bytes),t.hash(c.HASH_LEAF_NODE);case i.TYPE_TRANSACTION_NM:return this.tag_bytes;case i.TYPE_TRANSACTION_MD:return t.append(this.node),t.append(this.tag_bytes),t.hash(c.HASH_TX_NODE);default:throw new Error("Tried to hash a SHAMap node of unknown type.")}},e.SHAMap=n,e.SHAMapTreeNode=i,e.SHAMapTreeNodeInner=o,e.SHAMapTreeNodeLeaf=s},function(t){t.exports={account:"a",dirNode:"d",generatorMap:"g",nickname:"n",rippleState:"r",offer:"o",ownerDir:"O",bookDir:"B",contract:"c",skipList:"s",amendment:"f",feeSettings:"e"}},function(t){try{t.exports=WebSocket}catch(e){t.exports=MozWebSocket}var r,n=/Version\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//;"object"==typeof navigator&&"string"==typeof navigator.userAgent&&(r=n.exec(navigator.userAgent))&&2===window.WebSocket.CLOSED&&(/iP(hone|od|ad)/.test(navigator.platform)?+r[1]<5&&(t.exports=void 0):-1!==navigator.appVersion.indexOf("Mac")&&+r[1]<6&&(t.exports=void 0))},function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function n(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!n(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,n,s,a,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,a=new Array(s-1),c=1;s>c;c++)a[c-1]=arguments[c];n.apply(this,a)}else if(i(n)){for(s=arguments.length,a=new Array(s-1),c=1;s>c;c++)a[c-1]=arguments[c];for(u=n.slice(),s=u.length,c=0;s>c;c++)u[c].apply(this,a)}return!0},e.prototype.addListener=function(t,n){var s;if(!r(n))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(n.listener)?n.listener:n),this._events[t]?i(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n,i(this._events[t])&&!this._events[t].warned){var s;s=o(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},e.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}},function(t,e,r){function n(t,e){return p.isUndefined(e)?""+e:p.isNumber(e)&&!isFinite(e)?e.toString():p.isFunction(e)||p.isRegExp(e)?e.toString():e}function i(t,e){return p.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return i(JSON.stringify(t.actual,n),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,n),128)}function s(t,e,r,n,i){throw new v.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function a(t,e){t||s(t,!0,e,"==",v.ok)}function c(t,e){if(t===e)return!0;if(p.isBuffer(t)&&p.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return p.isDate(t)&&p.isDate(e)?t.getTime()===e.getTime():p.isRegExp(t)&&p.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:p.isObject(t)||p.isObject(e)?h(t,e):t==e}function u(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function h(t,e){if(p.isNullOrUndefined(t)||p.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(p.isPrimitive(t)||p.isPrimitive(e))return t===e;var r=u(t),n=u(e);if(r&&!n||!r&&n)return!1;if(r)return t=d.call(t),e=d.call(e),c(t,e);var i,o,s=y(t),a=y(e);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!c(t[i],e[i]))return!1;return!0}function f(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function l(t,e,r,n){var i;p.isString(r)&&(n=r,r=null);try{e()}catch(o){i=o}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&s(i,r,"Missing expected exception"+n),!t&&f(i,r)&&s(i,r,"Got unwanted exception"+n),t&&i&&r&&!f(i,r)||!t&&i)throw i}var p=r(43),d=Array.prototype.slice,_=Object.prototype.hasOwnProperty,v=t.exports=a;v.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=e.name,a=n.indexOf("\n"+i);if(a>=0){var c=n.indexOf("\n",a+1);n=n.substring(c+1)}this.stack=n}}},p.inherits(v.AssertionError,Error),v.fail=s,v.ok=a,v.equal=function(t,e,r){t!=e&&s(t,e,r,"==",v.equal)},v.notEqual=function(t,e,r){t==e&&s(t,e,r,"!=",v.notEqual)},v.deepEqual=function(t,e,r){c(t,e)||s(t,e,r,"deepEqual",v.deepEqual)},v.notDeepEqual=function(t,e,r){c(t,e)&&s(t,e,r,"notDeepEqual",v.notDeepEqual)},v.strictEqual=function(t,e,r){t!==e&&s(t,e,r,"===",v.strictEqual)},v.notStrictEqual=function(t,e,r){t===e&&s(t,e,r,"!==",v.notStrictEqual)},v["throws"]=function(){l.apply(this,[!0].concat(d.call(arguments)))},v.doesNotThrow=function(){l.apply(this,[!1].concat(d.call(arguments)))},v.ifError=function(t){if(t)throw t};var y=Object.keys||function(t){var e=[];for(var r in t)_.call(t,r)&&e.push(r);return e}},function(t,e,r){(function(t){function t(e,r,n){if(!(this instanceof t))return new t(e,r,n);var i,o=typeof e;if("number"===o)i=e>0?e>>>0:0;else if("string"===o)"base64"===r&&(e=E(e)),i=t.byteLength(e,r);else{if("object"!==o||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&L(e.data)&&(e=e.data),i=+e.length>0?Math.floor(+e.length):0}if(this.length>N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");var s;t.TYPED_ARRAY_SUPPORT?s=t._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(t.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)s._set(e);else if(S(e))if(t.isBuffer(e))for(a=0;i>a;a++)s[a]=e.readUInt8(a);else for(a=0;i>a;a++)s[a]=(e[a]%256+256)%256;else if("string"===o)s.write(e,0,r);else if("number"===o&&!t.TYPED_ARRAY_SUPPORT&&!n)for(a=0;i>a;a++)s[a]=0;return s}function n(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function i(t,e,r,n){var i=R(k(e),t,r,n);return i}function o(t,e,r,n){var i=R(T(e),t,r,n);return i}function s(t,e,r,n){return o(t,e,r,n)}function a(t,e,r,n){var i=R(I(e),t,r,n);return i}function c(t,e,r,n){var i=R(j(e),t,r,n,2);return i}function u(t,e,r){return O.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function h(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=C(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+C(i)}function f(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function l(t,e,r){return f(t,e,r)}function p(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=A(t[o]);return i}function d(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function _(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function v(e,r,n,i,o,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(r>o||s>r)throw new TypeError("value is out of bounds");if(n+i>e.length)throw new TypeError("index out of range")}function y(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function g(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function m(t,e,r,n,i,o){if(e>i||o>e)throw new TypeError("value is out of bounds");if(r+n>t.length)throw new TypeError("index out of range")}function b(t,e,r,n,i){return i||m(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),B.write(t,e,r,n,23,4),r+4}function w(t,e,r,n,i){return i||m(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),B.write(t,e,r,n,52,8),r+8}function E(t){for(t=x(t).replace(q,"");t.length%4!==0;)t+="=";return t}function x(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function S(e){return L(e)||t.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function A(t){return 16>t?"0"+t.toString(16):t.toString(16)}function k(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(127>=n)e.push(n);else{var i=r;n>=55296&&57343>=n&&r++;for(var o=encodeURIComponent(t.slice(i,r+1)).substr(1).split("%"),s=0;s<o.length;s++)e.push(parseInt(o[s],16))}}return e}function T(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function j(t){for(var e,r,n,i=[],o=0;o<t.length;o++)e=t.charCodeAt(o),r=e>>8,n=e%256,i.push(n),i.push(r);return i}function I(t){return O.toByteArray(t)}function R(t,e,r,n,i){i&&(n-=n%i);for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function C(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var O=r(74),B=r(65),L=r(66);e.Buffer=t,e.SlowBuffer=t,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var N=1073741823;t.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,r){if(!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError("Arguments must be Buffers");for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);s>o&&e[o]===r[o];o++);return o!==s&&(n=e[o],i=r[o]),i>n?-1:n>i?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!L(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new t(0);if(1===e.length)return e[0];var n;if(void 0===r)for(r=0,n=0;n<e.length;n++)r+=e[n].length;var i=new t(r),o=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(i,o),o+=s.length}return i},t.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=k(t).length;break;case"base64":r=I(t).length;break;default:r=t.length}return r},t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(t,e,r){var n=!1;if(e>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return p(this,e,r);case"utf8":case"utf-8":return h(this,e,r);case"ascii":return f(this,e,r);case"binary":return l(this,e,r);case"base64":return u(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===t.compare(this,e)},t.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return t.compare(this,e)},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,r,u){if(isFinite(e))isFinite(r)||(u=r,r=void 0);else{var h=u;u=e,e=r,r=h}e=Number(e)||0;var f=this.length-e;r?(r=Number(r),r>f&&(r=f)):r=f,u=String(u||"utf8").toLowerCase();var l;switch(u){case"hex":l=n(this,t,e,r);break;case"utf8":case"utf-8":l=i(this,t,e,r);break;case"ascii":l=o(this,t,e,r);break;case"binary":l=s(this,t,e,r);break;case"base64":l=a(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":l=c(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+u)}return l},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(e,r){var n=this.length;if(e=~~e,r=void 0===r?n:~~r,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>r?(r+=n,0>r&&(r=0)):r>n&&(r=n),e>r&&(r=e),t.TYPED_ARRAY_SUPPORT)return t._augment(this.subarray(e,r));for(var i=r-e,o=new t(i,void 0,!0),s=0;i>s;s++)o[s]=this[s+e];return o},t.prototype.readUInt8=function(t,e){return e||_(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||_(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||_(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||_(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||_(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readInt8=function(t,e){return e||_(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||_(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(t,e){e||_(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(t,e){return e||_(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||_(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||_(t,4,this.length),B.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||_(t,4,this.length),B.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||_(t,8,this.length),B.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||_(t,8,this.length),B.read(this,t,!1,52,8)},t.prototype.writeUInt8=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e,r+1},t.prototype.writeUInt16LE=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e,this[r+1]=e>>>8):y(this,e,r,!0),r+2},t.prototype.writeUInt16BE=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e):y(this,e,r,!1),r+2},t.prototype.writeUInt32LE=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e):g(this,e,r,!0),r+4},t.prototype.writeUInt32BE=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e):g(this,e,r,!1),r+4},t.prototype.writeInt8=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[r]=e,r+1},t.prototype.writeInt16LE=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=e,this[r+1]=e>>>8):y(this,e,r,!0),r+2},t.prototype.writeInt16BE=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e):y(this,e,r,!1),r+2},t.prototype.writeInt32LE=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[r]=e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):g(this,e,r,!0),r+4},t.prototype.writeInt32BE=function(e,r,n){return e=+e,r>>>=0,n||v(this,e,r,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e):g(this,e,r,!1),r+4},t.prototype.writeFloatLE=function(t,e,r){return b(this,t,e,!0,r)},t.prototype.writeFloatBE=function(t,e,r){return b(this,t,e,!1,r)},t.prototype.writeDoubleLE=function(t,e,r){return w(this,t,e,!0,r)},t.prototype.writeDoubleBE=function(t,e,r){return w(this,t,e,!1,r)},t.prototype.copy=function(e,r,n,i){var o=this;if(n||(n=0),i||0===i||(i=this.length),r||(r=0),i!==n&&0!==e.length&&0!==o.length){if(n>i)throw new TypeError("sourceEnd < sourceStart");if(0>r||r>=e.length)throw new TypeError("targetStart out of bounds");if(0>n||n>=o.length)throw new TypeError("sourceStart out of bounds");if(0>i||i>o.length)throw new TypeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n;if(1e3>s||!t.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)e[a+r]=this[a+n];else e._set(this.subarray(n,n+s),r)}},t.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new TypeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new TypeError("start out of bounds");if(0>r||r>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=k(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),r=0,n=e.length;n>r;r+=1)e[r]=this[r];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var D=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=D.get,e.set=D.set,e.write=D.write,e.toString=D.toString,e.toLocaleString=D.toString,e.toJSON=D.toJSON,e.equals=D.equals,e.compare=D.compare,e.copy=D.copy,e.slice=D.slice,e.readUInt8=D.readUInt8,e.readUInt16LE=D.readUInt16LE,e.readUInt16BE=D.readUInt16BE,e.readUInt32LE=D.readUInt32LE,e.readUInt32BE=D.readUInt32BE,e.readInt8=D.readInt8,e.readInt16LE=D.readInt16LE,e.readInt16BE=D.readInt16BE,e.readInt32LE=D.readInt32LE,e.readInt32BE=D.readInt32BE,e.readFloatLE=D.readFloatLE,e.readFloatBE=D.readFloatBE,e.readDoubleLE=D.readDoubleLE,e.readDoubleBE=D.readDoubleBE,e.writeUInt8=D.writeUInt8,e.writeUInt16LE=D.writeUInt16LE,e.writeUInt16BE=D.writeUInt16BE,e.writeUInt32LE=D.writeUInt32LE,e.writeUInt32BE=D.writeUInt32BE,e.writeInt8=D.writeInt8,e.writeInt16LE=D.writeInt16LE,e.writeInt16BE=D.writeInt16BE,e.writeInt32LE=D.writeInt32LE,e.writeInt32BE=D.writeInt32BE,e.writeFloatLE=D.writeFloatLE,e.writeFloatBE=D.writeFloatBE,e.writeDoubleLE=D.writeDoubleLE,e.writeDoubleBE=D.writeDoubleBE,e.fill=D.fill,e.inspect=D.inspect,e.toArrayBuffer=D.toArrayBuffer,e};var q=/[^+\/0-9A-z]/g}).call(e,r(41).Buffer)},function(t,e,r){(function(n){function i(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function o(t,e){for(var r in t)e(t[r],r)}var s=r(52);e.createHash=r(53),e.createHmac=r(54),e.randomBytes=function(t,e){if(!e||!e.call)return new n(s(t));try{e.call(this,void 0,new n(s(t)))}catch(r){e(r)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]
};var a=r(55)(e);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync,r(69)(e,t.exports),o(["createCredentials","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){i("sorry,",t,"is not implemented yet")}})}).call(e,r(41).Buffer)},function(t,e,r){(function(t,n){function i(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(r)?n.showHidden=r:r&&e._extend(n,r),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),c(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function c(t,r,n){if(t.customInspect&&r&&k(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=c(t,i,n)),i}var o=u(t,r);if(o)return o;var s=Object.keys(r),_=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),A(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(k(r)){var v=r.name?": "+r.name:"";return t.stylize("[Function"+v+"]","special")}if(E(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return t.stylize(Date.prototype.toString.call(r),"date");if(A(r))return h(r)}var y="",g=!1,b=["{","}"];if(d(r)&&(g=!0,b=["[","]"]),k(r)){var w=r.name?": "+r.name:"";y=" [Function"+w+"]"}if(E(r)&&(y=" "+RegExp.prototype.toString.call(r)),S(r)&&(y=" "+Date.prototype.toUTCString.call(r)),A(r)&&(y=" "+h(r)),0===s.length&&(!g||0==r.length))return b[0]+y+b[1];if(0>n)return E(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var x;return x=g?f(t,r,n,_,s):s.map(function(e){return l(t,r,n,_,e,g)}),t.seen.pop(),p(x,y,b)}function u(t,e){if(w(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return g(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(C(e,String(s))?l(t,e,r,n,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,r,n,i,!0))}),o}function l(t,e,r,n,i,o){var s,a,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),C(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=v(r)?c(t,u.value,null):c(t,u.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function g(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function E(t){return x(t)&&"[object RegExp]"===j(t)}function x(t){return"object"==typeof t&&null!==t}function S(t){return x(t)&&"[object Date]"===j(t)}function A(t){return x(t)&&("[object Error]"===j(t)||t instanceof Error)}function k(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function j(t){return Object.prototype.toString.call(t)}function I(t){return 10>t?"0"+t.toString(10):t.toString(10)}function R(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");return[t.getDate(),N[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var O=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(O,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),a=n[r];o>r;a=n[++r])s+=v(a)||!x(a)?" "+a:" "+i(a);return s},e.deprecate=function(r,i){function o(){if(!s){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),s=!0}return r.apply(this,arguments)}if(w(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var s=!1;return o};var B,L={};e.debuglog=function(t){if(w(B)&&(B=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(B)){var r=n.pid;L[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else L[t]=function(){};return L[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=_,e.isNull=v,e.isNullOrUndefined=y,e.isNumber=g,e.isString=m,e.isSymbol=b,e.isUndefined=w,e.isRegExp=E,e.isObject=x,e.isDate=S,e.isError=A,e.isFunction=k,e.isPrimitive=T,e.isBuffer=r(57);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",R(),e.format.apply(e,arguments))},e.inherits=r(75),e._extend=function(t,e){if(!e||!x(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,function(){return this}(),r(63))},function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&u(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return c(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}function c(t){return"string"==typeof t}function u(t){return"object"==typeof t&&null!==t}function h(t){return null===t}function f(t){return null==t}var l=r(62);e.parse=i,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,_=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(_),y=["'"].concat(v),g=["%","/","?",";","#"].concat(y),m=["/","?","#"],b=255,w=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=r(51);n.prototype.parse=function(t,e,r){if(!c(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var i=p.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||i&&S[i]||(n=n.substr(2),this.slashes=!0)}if(!S[i]&&(s||i&&!A[i])){for(var a=-1,u=0;u<m.length;u++){var h=n.indexOf(m[u]);-1!==h&&(-1===a||a>h)&&(a=h)}var f,d;d=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==d&&(f=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(f)),a=-1;for(var u=0;u<g.length;u++){var h=n.indexOf(g[u]);-1!==h&&(-1===a||a>h)&&(a=h)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var _="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!_)for(var v=this.hostname.split(/\./),u=0,T=v.length;T>u;u++){var j=v[u];if(j&&!j.match(w)){for(var I="",R=0,C=j.length;C>R;R++)I+=j.charCodeAt(R)>127?"x":j[R];if(!I.match(w)){var O=v.slice(0,u),B=v.slice(u+1),L=j.match(E);L&&(O.push(L[1]),B.unshift(L[2])),B.length&&(n="/"+B.join(".")+n),this.hostname=O.join(".");break}}}if(this.hostname=this.hostname.length>b?"":this.hostname.toLowerCase(),!_){for(var N=this.hostname.split("."),D=[],u=0;u<N.length;++u){var q=N[u];D.push(q.match(/[^A-Za-z0-9_-]/)?"xn--"+l.encode(q):q)}this.hostname=D.join(".")}var M=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+M,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!x[o])for(var u=0,T=y.length;T>u;u++){var P=y[u],U=encodeURIComponent(P);U===P&&(U=escape(P)),n=n.split(P).join(U)}var z=n.indexOf("#");-1!==z&&(this.hash=n.substr(z),n=n.slice(0,z));var H=n.indexOf("?");if(-1!==H?(this.search=n.substr(H),this.query=n.substr(H+1),e&&(this.query=k.parse(this.query)),n=n.slice(0,H)):e&&(this.search="",this.query={}),n&&(this.pathname=n),A[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",q=this.search||"";this.path=M+q}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(o=k.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||A[e])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+r+s+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(c(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),A[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!A[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||S[t.protocol])r.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var o=r.pathname||"",s=r.search||"";r.path=o+s}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),u=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=u||a||r.host&&t.pathname,p=l,d=r.pathname&&r.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],_=r.protocol&&!A[r.protocol];if(_&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),l=l&&(""===i[0]||""===d[0])),u)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=t.search,r.query=t.query;else if(!f(t.search)){if(_){r.hostname=r.host=d.shift();var v=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;v&&(r.auth=v.shift(),r.host=r.hostname=v.shift())}return r.search=t.search,r.query=t.query,h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var y=d.slice(-1)[0],g=(r.host||t.host)&&("."===y||".."===y)||""===y,m=0,b=d.length;b>=0;b--)y=d[b],"."==y?d.splice(b,1):".."===y?(d.splice(b,1),m++):m&&(d.splice(b,1),m--);if(!l&&!p)for(;m--;m)d.unshift("..");!l||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),g&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(_){r.hostname=r.host=w?"":d.length?d.shift():"";var v=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;v&&(r.auth=v.shift(),r.host=r.hostname=v.shift())}return l=l||r.host&&d.length,l&&!w&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){var n;(function(t,i){(function(){function o(t,e){if(t!==e){var r=t===t,n=e===e;if(t>e||!r||"undefined"==typeof t&&n)return 1;if(e>t||!n||"undefined"==typeof e&&r)return-1}return 0}function s(t,e,r){if(e!==e)return y(t,r);for(var n=(r||0)-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function a(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function c(t){return"string"==typeof t?t:null==t?"":t+""}function u(t){return t.charCodeAt(0)}function h(t,e){for(var r=-1,n=t.length;++r<n&&e.indexOf(t.charAt(r))>-1;);return r}function f(t,e){for(var r=t.length;r--&&e.indexOf(t.charAt(r))>-1;);return r}function l(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function p(t,e){for(var r=-1,n=t.criteria,i=e.criteria,s=n.length;++r<s;){var a=o(n[r],i[r]);if(a)return a}return t.index-e.index}function d(t){return He[t]}function _(t){return Ge[t]}function v(t){return"\\"+Ve[t]}function y(t,e,r){for(var n=t.length,i=r?e||n:(e||0)-1;r?i--:++i<n;){var o=t[i];if(o!==o)return i}return-1}function g(t){return t&&"object"==typeof t||!1}function m(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function b(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;)t[r]===e&&(t[r]=X,o[++i]=r);return o}function w(t,e){for(var r,n=-1,i=t.length,o=-1,s=[];++n<i;){var a=t[n],c=e?e(a,n,t):a;n&&r===c||(r=c,s[++o]=a)}return s}function E(t){for(var e=-1,r=t.length;++e<r&&m(t.charCodeAt(e)););return e}function x(t){for(var e=t.length;e--&&m(t.charCodeAt(e)););return e}function S(t){return Xe[t]}function A(t){function e(t){if(g(t)&&!za(t)){if(t instanceof r)return t;if(Ks.call(t,"__wrapped__"))return new r(t.__wrapped__,t.__chain__,Je(t.__actions__))}return new r(t)}function r(t,e,r){this.__actions__=r||[],this.__chain__=!!e,this.__wrapped__=t}function n(t){this.actions=null,this.dir=1,this.dropCount=0,this.filtered=!1,this.iteratees=null,this.takeCount=Ea,this.views=null,this.wrapped=t}function i(){var t=this.actions,e=this.iteratees,r=this.views,i=new n(this.wrapped);return i.actions=t?Je(t):null,i.dir=this.dir,i.dropCount=this.dropCount,i.filtered=this.filtered,i.iteratees=e?Je(e):null,i.takeCount=this.takeCount,i.views=r?Je(r):null,i}function m(){if(this.filtered){var t=new n(this);t.dir=-1,t.filtered=!0}else t=this.clone(),t.dir*=-1;return t}function Z(){var t=this.wrapped.value();if(!za(t))return Kr(t,this.actions);var e=this.dir,r=0>e,n=vn(0,t.length,this.views),i=n.start,o=n.end,s=o-i,a=this.dropCount,c=va(s,this.takeCount-a),u=r?o:i-1,h=this.iteratees,f=h?h.length:0,l=0,p=[];t:for(;s--&&c>l;){u+=e;for(var d=-1,_=t[u];++d<f;){var v=h[d],y=v.iteratee,g=y(_,u,t),m=v.type;if(m==z)_=g;else if(!g){if(m==U)continue t;break t}}a?a--:p[l++]=_}return p}function re(){this.__data__={}}function ie(t){return this.has(t)&&delete this.__data__[t]}function He(t){return"__proto__"==t?k:this.__data__[t]}function Ge(t){return"__proto__"!=t&&Ks.call(this.__data__,t)}function Xe(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Ke(t){var e=t?t.length:0;for(this.data={hash:la(null),set:new oa};e--;)this.push(t[e])}function Ve(t,e){var r=t.data,n="string"==typeof e||wo(e)?r.set.has(e):r.hash[e];return n?0:-1}function We(t){var e=this.data;"string"==typeof t||wo(t)?e.set.add(t):e.hash[t]=!0}function Je(t,e){var r=-1,n=t.length;for(e||(e=Cs(n));++r<n;)e[r]=t[r];return e}function $e(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function Qe(t,e){for(var r=t.length;r--&&e(t[r],r,t)!==!1;);return t}function tr(t,e){for(var r=-1,n=t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function er(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[++i]=s)}return o}function rr(t,e){for(var r=-1,n=t.length,i=Cs(n);++r<n;)i[r]=e(t[r],r,t);return i}function nr(t){for(var e=-1,r=t.length,n=wa;++e<r;){var i=t[e];i>n&&(n=i)}return n}function ir(t){for(var e=-1,r=t.length,n=Ea;++e<r;){var i=t[e];n>i&&(n=i)}return n}function or(t,e,r,n){var i=-1,o=t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function sr(t,e,r,n){var i=t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function ar(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function cr(t,e){return"undefined"==typeof t?e:t}function ur(t,e,r,n){return"undefined"!=typeof t&&Ks.call(n,r)?t:e}function hr(t,e,r){var n=Ka(e);if(!r)return lr(e,t,n);for(var i=-1,o=n.length;++i<o;){var s=n[i],a=t[s],c=r(a,e[s],s,t,e);(c===c?c===a:a!==a)&&("undefined"!=typeof a||s in t)||(t[s]=c)}return t}function fr(t,e){for(var r=-1,n=t.length,i=xn(n),o=e.length,s=Cs(o);++r<o;){var a=e[r];i?(a=parseFloat(a),s[r]=wn(a,n)?t[a]:k):s[r]=t[a]}return s}function lr(t,e,r){r||(r=e,e={});for(var n=-1,i=r.length;++n<i;){var o=r[n];e[o]=t[o]}return e}function pr(t,e){for(var r=-1,n=e.length;++r<n;){var i=e[r];t[i]=un(t[i],j,t)}return t}function dr(t,e,r){var n=typeof t;return"function"==n?"undefined"!=typeof e&&bn(t)?Wr(t,e,r):t:null==t?ws:"object"==n?Nr(t):Mr(t+"")}function _r(t,e,r,n,i,o,s){var a;if(r&&(a=i?r(t,n,i):r(t)),"undefined"!=typeof a)return a;if(!wo(t))return t;var c=za(t);if(c){if(a=yn(t),!e)return Je(t,a)}else{var u=Ys.call(t),h=u==$;if(u!=te&&u!=K&&(!h||i))return Ue[u]?mn(t,u,e):i?t:{};if(a=gn(h?{}:t),!e)return lr(t,a,Ka(t))}o||(o=[]),s||(s=[]);for(var f=o.length;f--;)if(o[f]==t)return s[f];return o.push(t),s.push(a),(c?$e:Tr)(t,function(n,i){a[i]=_r(n,e,r,i,t,o,s)}),a}function vr(t,e,r,n){if(!bo(t))throw new Ps(G);return sa(function(){t.apply(k,zr(r,n))},e)}function yr(t,e){var r=t?t.length:0,n=[];if(!r)return n;var i=-1,o=_n(),a=o==s,c=a&&e.length>=200&&Oa(e),u=e.length;c&&(o=Ve,a=!1,e=c);t:for(;++i<r;){var h=t[i];if(a&&h===h){for(var f=u;f--;)if(e[f]===h)continue t;n.push(h)}else o(e,h)<0&&n.push(h)}return n}function gr(t,e){var r=t?t.length:0;if(!xn(r))return Tr(t,e);for(var n=-1,i=On(t);++n<r&&e(i[n],n,i)!==!1;);return t}function mr(t,e){var r=t?t.length:0;if(!xn(r))return jr(t,e);for(var n=On(t);r--&&e(n[r],r,n)!==!1;);return t}function br(t,e){var r=!0;return gr(t,function(t,n,i){return r=!!e(t,n,i)}),r}function wr(t,e){var r=[];return gr(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function Er(t,e,r,n){var i;return r(t,function(t,r,o){return e(t,r,o)?(i=n?r:t,!1):void 0}),i}function xr(t,e,r,n){for(var i=(n||0)-1,o=t.length,s=-1,a=[];++i<o;){var c=t[i];if(g(c)&&xn(c.length)&&(za(c)||lo(c))){e&&(c=xr(c,e,r));var u=-1,h=c.length;for(a.length+=h;++u<h;)a[++s]=c[u]}else r||(a[++s]=c)}return a}function Sr(t,e,r){for(var n=-1,i=On(t),o=r(t),s=o.length;++n<s;){var a=o[n];if(e(i[a],a,i)===!1)break}return t}function Ar(t,e,r){for(var n=On(t),i=r(t),o=i.length;o--;){var s=i[o];if(e(n[s],s,n)===!1)break}return t}function kr(t,e){return Sr(t,e,Go)}function Tr(t,e){return Sr(t,e,Ka)}function jr(t,e){return Ar(t,e,Ka)}function Ir(t,e){for(var r=-1,n=e.length,i=-1,o=[];++r<n;){var s=e[r];bo(t[s])&&(o[++i]=s)}return o}function Rr(t,e,r){var n=-1,i="function"==typeof e,o=t?t.length:0,s=xn(o)?Cs(o):[];return gr(t,function(t){var o=i?e:null!=t&&t[e];s[++n]=o?o.apply(t,r):k}),s}function Cr(t,e,r,n,i,o){if(t===e)return 0!==t||1/t==1/e;var s=typeof t,a=typeof e;return"function"!=s&&"object"!=s&&"function"!=a&&"object"!=a||null==t||null==e?t!==t&&e!==e:Or(t,e,Cr,r,n,i,o)}function Or(t,e,r,n,i,o,s){var a=za(t),c=za(e),u=V,h=V;a||(u=Ys.call(t),u==K?u=te:u!=te&&(a=Io(t))),c||(h=Ys.call(e),h==K?h=te:h!=te&&(c=Io(e)));var f=u==te,l=h==te,p=u==h;if(p&&!a&&!f)return fn(t,e,u);var d=f&&Ks.call(t,"__wrapped__"),_=l&&Ks.call(e,"__wrapped__");if(d||_)return r(d?t.value():t,_?e.value():e,n,i,o,s);if(!p)return!1;o||(o=[]),s||(s=[]);for(var v=o.length;v--;)if(o[v]==t)return s[v]==e;o.push(t),s.push(e);var y=(a?hn:ln)(t,e,r,n,i,o,s);return o.pop(),s.pop(),y}function Br(t,e,r,n,i){var o=e.length;if(null==t)return!o;for(var s=-1,a=!i;++s<o;)if(a&&n[s]?r[s]!==t[e[s]]:!Ks.call(t,e[s]))return!1;for(s=-1;++s<o;){var c=e[s];if(a&&n[s])var u=Ks.call(t,c);else{var h=t[c],f=r[s];u=i?i(h,f,c):k,"undefined"==typeof u&&(u=Cr(f,h,i,!0))}if(!u)return!1}return!0}function Lr(t,e){var r=[];return gr(t,function(t,n,i){r.push(e(t,n,i))}),r}function Nr(t){var e=Ka(t),r=e.length;if(1==r){var n=e[0],i=t[n];if(Sn(i))return function(t){return null!=t&&i===t[n]&&Ks.call(t,n)}}for(var o=Cs(r),s=Cs(r);r--;)i=t[e[r]],o[r]=i,s[r]=Sn(i);return function(t){return Br(t,e,o,s)}}function Dr(t,e,r,n,i){var o=xn(e.length)&&(za(e)||Io(e));return(o?$e:Tr)(e,function(e,s,a){if(g(e))return n||(n=[]),i||(i=[]),qr(t,a,s,Dr,r,n,i);var c=t[s],u=r?r(c,e,s,t,a):k,h="undefined"==typeof u;h&&(u=e),!o&&"undefined"==typeof u||!h&&(u===u?u===c:c!==c)||(t[s]=u)}),t}function qr(t,e,r,n,i,o,s){for(var a=o.length,c=e[r];a--;)if(o[a]==c)return void(t[r]=s[a]);var u=t[r],h=i?i(u,c,r,t,e):k,f="undefined"==typeof h;f&&(h=c,xn(c.length)&&(za(c)||Io(c))?h=za(u)?u:u?Je(u):[]:Ga(c)||lo(c)?h=lo(u)?Oo(u):Ga(u)?u:{}:f=!1),o.push(c),s.push(h),f?t[r]=n(h,c,i,o,s):(h===h?h!==u:u===u)&&(t[r]=h)}function Mr(t){return function(e){return null==e?k:e[t]}}function Fr(t,e){var r=e.length,n=fr(t,e);for(e.sort(o);r--;){var i=parseFloat(e[r]);if(i!=s&&wn(i)){var s=i;aa.call(t,i,1)}}return n}function Pr(t,e){return t+ea(ba()*(e-t+1))}function Ur(t,e,r,n,i){return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function zr(t,e,r){var n=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),r="undefined"==typeof r||r>i?i:+r||0,0>r&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Cs(i);++n<i;)o[n]=t[n+e];return o}function Hr(t,e){var r;return gr(t,function(t,n,i){return r=e(t,n,i),!r}),!!r}function Gr(t,e){var r=-1,n=_n(),i=t.length,o=n==s,a=o&&i>=200,c=a&&Oa(),u=[];c?(n=Ve,o=!1):(a=!1,c=e?[]:u);t:for(;++r<i;){var h=t[r],f=e?e(h,r,t):h;if(o&&h===h){for(var l=c.length;l--;)if(c[l]===f)continue t;e&&c.push(f),u.push(h)}else n(c,f)<0&&((e||a)&&c.push(f),u.push(h))}return u}function Xr(t,e){for(var r=-1,n=e.length,i=Cs(n);++r<n;)i[r]=t[e[r]];return i}function Kr(t,e){var r=t;r instanceof n&&(r=r.value());for(var i=-1,o=e.length;++i<o;){var s=[r],a=e[i];na.apply(s,a.args),r=a.func.apply(a.thisArg,s)}return r}function Vr(t,e,r){var n=0,i=t?t.length:n;if("number"==typeof e&&e===e&&Aa>=i){for(;i>n;){var o=n+i>>>1,s=t[o];(r?e>=s:e>s)?n=o+1:i=o}return i}return Yr(t,e,ws,r)}function Yr(t,e,r,n){e=r(e);for(var i=0,o=t?t.length:0,s=e!==e,a="undefined"==typeof e;o>i;){var c=ea((i+o)/2),u=r(t[c]),h=u===u;if(s)var f=h||n;else f=a?h&&(n||"undefined"!=typeof u):n?e>=u:e>u;f?i=c+1:o=c}return va(o,Sa)}function Wr(t,e,r){if("function"!=typeof t)return ws;if("undefined"==typeof e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,s){return t.call(e,r,n,i,o,s)}}return function(){return t.apply(e,arguments)}}function Jr(t){return Zs.call(t,0)}function $r(t,e,r){for(var n=r.length,i=-1,o=_a(t.length-n,0),s=-1,a=e.length,c=Cs(o+a);++s<a;)c[s]=e[s];for(;++i<n;)c[r[i]]=t[i];for(;o--;)c[s++]=t[i++];return c}function Zr(t,e,r){for(var n=-1,i=r.length,o=-1,s=_a(t.length-i,0),a=-1,c=e.length,u=Cs(s+c);++o<s;)u[o]=t[o];for(var h=o;++a<c;)u[h+a]=e[a];for(;++n<i;)u[h+r[n]]=t[o++];return u}function Qr(t,e){return function(r,n,i){var o=e?e():{};if(n=dn(n,i,3),za(r))for(var s=-1,a=r.length;++s<a;){var c=r[s];t(o,c,n(c,s,r),r)}else gr(r,function(e,r,i){t(o,e,n(e,r,i),i)});return o}}function tn(t){return function(){var e=arguments.length,r=arguments[0];if(2>e||null==r)return r;if(e>3&&En(arguments[1],arguments[2],arguments[3])&&(e=2),e>3&&"function"==typeof arguments[e-2])var n=Wr(arguments[--e-1],arguments[e--],5);else e>2&&"function"==typeof arguments[e-1]&&(n=arguments[--e]);for(var i=0;++i<e;){var o=arguments[i];o&&t(r,o,n)}return r}}function en(t,e){function r(){return(this instanceof r?n:t).apply(e,arguments)}var n=nn(t);return r}function rn(t){return function(e){for(var r=-1,n=ys(es(e)),i=n.length,o="";++r<i;)o=t(o,n[r],r);return o}}function nn(t){return function(){var e=Ra(t.prototype),r=t.apply(e,arguments);return wo(r)?r:e}}function on(t,e){return function(r,n,i){i&&En(r,n,i)&&(n=null);var o=dn(),s=null==n;if(o===dr&&s||(s=!1,n=o(n,i,3)),s){var a=za(r);if(a||!jo(r))return t(a?r:Cn(r));n=u}return pn(r,n,e)}}function sn(t,e,r,n,i,o,s,a,c,u){function h(){for(var m=arguments.length,w=m,E=Cs(m);w--;)E[w]=arguments[w];if(n&&(E=$r(E,n,i)),o&&(E=Zr(E,o,s)),d||v){var x=h.placeholder,S=b(E,x);if(m-=S.length,u>m){var A=a?Je(a):null,k=_a(u-m,0),T=d?S:null,R=d?null:S,C=d?E:null,O=d?null:E;e|=d?B:L,e&=~(d?L:B),_||(e&=~(j|I));var N=sn(t,e,r,C,T,O,R,A,c,k);return N.placeholder=x,N}}var D=l?r:this;return p&&(t=D[g]),a&&(E=jn(E,a)),f&&c<E.length&&(E.length=c),(this instanceof h?y||nn(t):t).apply(D,E)}var f=e&D,l=e&j,p=e&I,d=e&C,_=e&R,v=e&O,y=!p&&nn(t),g=t;return h}function an(t,e,r){var n=t.length;if(e=+e,n>=e||!pa(e))return"";var i=e-n;return r=null==r?" ":r+"",us(r,Qs(i/r.length)).slice(0,i)}function cn(t,e,r,n){function i(){for(var e=-1,a=arguments.length,c=-1,u=n.length,h=Cs(a+u);++c<u;)h[c]=n[c];for(;a--;)h[c++]=arguments[++e];return(this instanceof i?s:t).apply(o?r:this,h)}var o=e&j,s=nn(t);return i}function un(t,e,r,n,i,o,s,a){var c=e&I;if(!c&&!bo(t))throw new Ps(G);var u=n?n.length:0;if(u||(e&=~(B|L),n=i=null),u-=i?i.length:0,e&L){var h=n,f=i;n=i=null}var l=!c&&Ba(t),p=[t,e,r,n,i,h,f,o,s,a];if(l&&l!==!0&&(An(p,l),e=p[1],a=p[9]),p[9]=null==a?c?0:t.length:_a(a-u,0)||0,e==j)var d=en(p[0],p[2]);else d=e!=B&&e!=(j|B)||p[4].length?sn.apply(null,p):cn.apply(null,p);var _=l?Ca:La;return _(d,p)}function hn(t,e,r,n,i,o,s){var a=-1,c=t.length,u=e.length,h=!0;if(c!=u&&!(i&&u>c))return!1;for(;h&&++a<c;){var f=t[a],l=e[a];if(h=k,n&&(h=i?n(l,f,a):n(f,l,a)),"undefined"==typeof h)if(i)for(var p=u;p--&&(l=e[p],!(h=f&&f===l||r(f,l,n,i,o,s))););else h=f&&f===l||r(f,l,n,i,o,s)}return!!h}function fn(t,e,r){switch(r){case Y:case W:return+t==+e;case J:return t.name==e.name&&t.message==e.message;case Q:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case ee:case ne:return t==e+""}return!1}function ln(t,e,r,n,i,o,s){var a=Ka(t),c=a.length,u=Ka(e),h=u.length;if(c!=h&&!i)return!1;for(var f,l=-1;++l<c;){var p=a[l],d=Ks.call(e,p);if(d){var _=t[p],v=e[p];d=k,n&&(d=i?n(v,_,p):n(_,v,p)),"undefined"==typeof d&&(d=_&&_===v||r(_,v,n,i,o,s))}if(!d)return!1;f||(f="constructor"==p)}if(!f){var y=t.constructor,g=e.constructor;if(y!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g))return!1}return!0}function pn(t,e,r){var n=r?Ea:wa,i=n,o=i;return gr(t,function(t,s,a){var c=e(t,s,a);((r?i>c:c>i)||c===n&&c===o)&&(i=c,o=t)}),o}function dn(t,r,n){var i=e.callback||ms;return i=i===ms?dr:i,n?i(t,r,n):i}function _n(t,r,n){var i=e.indexOf||Xn;return i=i===Xn?s:i,t?i(t,r,n):i}function vn(t,e,r){for(var n=-1,i=r?r.length:0;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=va(e,t+s);break;case"takeRight":t=_a(t,e-s)}}return{start:t,end:e}}function yn(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Ks.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function gn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=qs),new e}function mn(t,e,r){var n=t.constructor;switch(e){case oe:return Jr(t);case Y:case W:return new n(+t);case se:case ae:case ce:case ue:case he:case fe:case le:case pe:case de:var i=t.buffer;return new n(r?Jr(i):i,t.byteOffset,t.length);case Q:case ne:return new n(t);case ee:var o=new n(t.source,ke.exec(t));o.lastIndex=t.lastIndex}return o}function bn(t){var r=e.support,n=!(r.funcNames?t.name:r.funcDecomp);if(!n){var i=Gs.call(t);r.funcNames||(n=!Te.test(i)),n||(n=Le.test(i)||So(t),Ca(t,n))}return n}function wn(t,e){return t=+t,e=null==e?Ta:e,t>-1&&t%1==0&&e>t}function En(t,e,r){if(!wo(r))return!1;var n=typeof e;if("number"==n)var i=r.length,o=xn(i)&&wn(e,i);else o="string"==n&&e in r;return o&&r[e]===t}function xn(t){return"number"==typeof t&&t>-1&&t%1==0&&Ta>=t}function Sn(t){return t===t&&(0===t?1/t>0:!wo(t))}function An(t,e){var r=t[1],n=e[1],i=r|n,o=D|N,s=j|I,a=o|s|R|O,c=r&D&&!(n&D),u=r&N&&!(n&N),h=(u?t:e)[7],f=(c?t:e)[8],l=!(r>=N&&n>s||r>s&&n>=N),p=i>=o&&a>=i&&(N>r||(u||c)&&h.length<=f);if(!l&&!p)return t;n&j&&(t[2]=e[2],i|=r&j?0:R);var d=e[3];if(d){var _=t[3];t[3]=_?$r(_,d,e[4]):Je(d),t[4]=_?b(t[3],X):Je(e[4])}return d=e[5],d&&(_=t[5],t[5]=_?Zr(_,d,e[6]):Je(d),t[6]=_?b(t[5],X):Je(e[6])),d=e[7],d&&(t[7]=Je(d)),n&D&&(t[8]=null==t[8]?e[8]:va(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function kn(t,e){t=On(t);for(var r=-1,n=e.length,i={};++r<n;){var o=e[r];o in t&&(i[o]=t[o])}return i}function Tn(t,e){var r={};return kr(t,function(t,n,i){e(t,n,i)&&(r[n]=t)}),r}function jn(t,e){for(var r=t.length,n=va(e.length,r),i=Je(t);n--;){var o=e[n];t[n]=wn(o,r)?i[o]:k}return t}function In(t){{var r;e.support}if(!g(t)||Ys.call(t)!=te||!Ks.call(t,"constructor")&&(r=t.constructor,"function"==typeof r&&!(r instanceof r)))return!1;var n;return kr(t,function(t,e){n=e}),"undefined"==typeof n||Ks.call(t,n)}function Rn(t){for(var r=Go(t),n=r.length,i=n&&t.length,o=e.support,s=i&&xn(i)&&(za(t)||o.nonEnumArgs&&lo(t)),a=-1,c=[];++a<n;){var u=r[a];(s&&wn(u,i)||Ks.call(t,u))&&c.push(u)}return c}function Cn(t){return null==t?[]:xn(t.length)?wo(t)?t:qs(t):$o(t)}function On(t){return wo(t)?t:qs(t)}function Bn(t,e,r){e=(r?En(t,e,r):null==e)?1:_a(+e||1,1);for(var n=0,i=t?t.length:0,o=-1,s=Cs(Qs(i/e));i>n;)s[++o]=zr(t,n,n+=e);return s}function Ln(t){for(var e=-1,r=t?t.length:0,n=-1,i=[];++e<r;){var o=t[e];o&&(i[++n]=o)}return i}function Nn(){for(var t=-1,e=arguments.length;++t<e;){var r=arguments[t];if(za(r)||lo(r))break}return yr(r,xr(arguments,!1,!0,++t))}function Dn(t,e,r){var n=t?t.length:0;return n?((r?En(t,e,r):null==e)&&(e=1),zr(t,0>e?0:e)):[]}function qn(t,e,r){var n=t?t.length:0;return n?((r?En(t,e,r):null==e)&&(e=1),e=n-(+e||0),zr(t,0,0>e?0:e)):[]}function Mn(t,e,r){var n=t?t.length:0;if(!n)return[];for(e=dn(e,r,3);n--&&e(t[n],n,t););return zr(t,0,n+1)}function Fn(t,e,r){var n=t?t.length:0;if(!n)return[];var i=-1;for(e=dn(e,r,3);++i<n&&e(t[i],i,t););return zr(t,i)}function Pn(t,e,r){var n=-1,i=t?t.length:0;for(e=dn(e,r,3);++n<i;)if(e(t[n],n,t))return n;return-1}function Un(t,e,r){var n=t?t.length:0;for(e=dn(e,r,3);n--;)if(e(t[n],n,t))return n;return-1}function zn(t){return t?t[0]:k}function Hn(t,e,r){var n=t?t.length:0;return r&&En(t,e,r)&&(e=!1),n?xr(t,e):[]}function Gn(t){var e=t?t.length:0;return e?xr(t,!0):[]}function Xn(t,e,r){var n=t?t.length:0;if(!n)return-1;
if("number"==typeof r)r=0>r?_a(n+r,0):r||0;else if(r){var i=Vr(t,e),o=t[i];return(e===e?e===o:o!==o)?i:-1}return s(t,e,r)}function Kn(t){return qn(t,1)}function Vn(){for(var t=[],e=-1,r=arguments.length,n=[],i=_n(),o=i==s;++e<r;){var a=arguments[e];(za(a)||lo(a))&&(t.push(a),n.push(o&&a.length>=120&&Oa(e&&a)))}r=t.length;var c=t[0],u=-1,h=c?c.length:0,f=[],l=n[0];t:for(;++u<h;)if(a=c[u],(l?Ve(l,a):i(f,a))<0){for(e=r;--e;){var p=n[e];if((p?Ve(p,a):i(t[e],a))<0)continue t}l&&l.push(a),f.push(a)}return f}function Yn(t){var e=t?t.length:0;return e?t[e-1]:k}function Wn(t,e,r){var n=t?t.length:0;if(!n)return-1;var i=n;if("number"==typeof r)i=(0>r?_a(n+r,0):va(r||0,n-1))+1;else if(r){i=Vr(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return y(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Jn(){var t=arguments[0];if(!t||!t.length)return t;for(var e=0,r=_n(),n=arguments.length;++e<n;)for(var i=0,o=arguments[e];(i=r(t,o,i))>-1;)aa.call(t,i,1);return t}function $n(t){return Fr(t||[],xr(arguments,!1,!1,1))}function Zn(t,e,r){var n=-1,i=t?t.length:0,o=[];for(e=dn(e,r,3);++n<i;){var s=t[n];e(s,n,t)&&(o.push(s),aa.call(t,n--,1),i--)}return o}function Qn(t){return Dn(t,1)}function ti(t,e,r){var n=t?t.length:0;return n?(r&&"number"!=typeof r&&En(t,e,r)&&(e=0,r=n),zr(t,e,r)):[]}function ei(t,e,r,n){var i=dn(r);return i===dr&&null==r?Vr(t,e):Yr(t,e,i(r,n,1))}function ri(t,e,r,n){var i=dn(r);return i===dr&&null==r?Vr(t,e,!0):Yr(t,e,i(r,n,1),!0)}function ni(t,e,r){var n=t?t.length:0;return n?((r?En(t,e,r):null==e)&&(e=1),zr(t,0,0>e?0:e)):[]}function ii(t,e,r){var n=t?t.length:0;return n?((r?En(t,e,r):null==e)&&(e=1),e=n-(+e||0),zr(t,0>e?0:e)):[]}function oi(t,e,r){var n=t?t.length:0;if(!n)return[];for(e=dn(e,r,3);n--&&e(t[n],n,t););return zr(t,n+1)}function si(t,e,r){var n=t?t.length:0;if(!n)return[];var i=-1;for(e=dn(e,r,3);++i<n&&e(t[i],i,t););return zr(t,0,i)}function ai(){return Gr(xr(arguments,!1,!0))}function ci(t,e,r,n){var i=t?t.length:0;if(!i)return[];"boolean"!=typeof e&&null!=e&&(n=r,r=En(t,e,n)?null:e,e=!1);var o=dn();return(o!==dr||null!=r)&&(r=o(r,n,3)),e&&_n()==s?w(t,r):Gr(t,r)}function ui(t){for(var e=-1,r=(t&&t.length&&nr(rr(t,Xs)))>>>0,n=Cs(r);++e<r;)n[e]=rr(t,Mr(e));return n}function hi(t){return yr(t,zr(arguments,1))}function fi(){for(var t=-1,e=arguments.length;++t<e;){var r=arguments[t];if(za(r)||lo(r))var n=n?yr(n,r).concat(yr(r,n)):r}return n?Gr(n):[]}function li(){for(var t=arguments.length,e=Cs(t);t--;)e[t]=arguments[t];return ui(e)}function pi(t,e){var r=-1,n=t?t.length:0,i={};for(!n||e||za(t[0])||(e=[]);++r<n;){var o=t[r];e?i[o]=e[r]:o&&(i[o[0]]=o[1])}return i}function di(t){var r=e(t);return r.__chain__=!0,r}function _i(t,e,r){return e.call(r,t),t}function vi(t,e,r){return e.call(r,t)}function yi(){return di(this)}function gi(){var t=this.__wrapped__;return t instanceof n?(this.__actions__.length&&(t=new n(this)),new r(t.reverse())):this.thru(function(t){return t.reverse()})}function mi(){return this.value()+""}function bi(){return Kr(this.__wrapped__,this.__actions__)}function wi(t){var e=t?t.length:0;return xn(e)&&(t=Cn(t)),fr(t,xr(arguments,!1,!1,1))}function Ei(t,e,r){var n=t?t.length:0;return xn(n)||(t=$o(t),n=t.length),n?(r="number"==typeof r?0>r?_a(n+r,0):r||0:0,"string"==typeof t||!za(t)&&jo(t)?n>r&&t.indexOf(e,r)>-1:_n(t,e,r)>-1):!1}function xi(t,e,r){var n=za(t)?tr:br;return("function"!=typeof e||"undefined"!=typeof r)&&(e=dn(e,r,3)),n(t,e)}function Si(t,e,r){var n=za(t)?er:wr;return e=dn(e,r,3),n(t,e)}function Ai(t,e,r){if(za(t)){var n=Pn(t,e,r);return n>-1?t[n]:k}return e=dn(e,r,3),Er(t,e,gr)}function ki(t,e,r){return e=dn(e,r,3),Er(t,e,mr)}function Ti(t,e){return Ai(t,Nr(e))}function ji(t,e,r){return"function"==typeof e&&"undefined"==typeof r&&za(t)?$e(t,e):gr(t,Wr(e,r,3))}function Ii(t,e,r){return"function"==typeof e&&"undefined"==typeof r&&za(t)?Qe(t,e):mr(t,Wr(e,r,3))}function Ri(t,e){return Rr(t,e,zr(arguments,2))}function Ci(t,e,r){var n=za(t)?rr:Lr;return e=dn(e,r,3),n(t,e)}function Oi(t,e){return Ci(t,Mr(e+""))}function Bi(t,e,r,n){var i=za(t)?or:Ur;return i(t,dn(e,n,4),r,arguments.length<3,gr)}function Li(t,e,r,n){var i=za(t)?sr:Ur;return i(t,dn(e,n,4),r,arguments.length<3,mr)}function Ni(t,e,r){var n=za(t)?er:wr;return e=dn(e,r,3),n(t,function(t,r,n){return!e(t,r,n)})}function Di(t,e,r){if(r?En(t,e,r):null==e){t=Cn(t);var n=t.length;return n>0?t[Pr(0,n-1)]:k}var i=qi(t);return i.length=va(0>e?0:+e||0,i.length),i}function qi(t){t=Cn(t);for(var e=-1,r=t.length,n=Cs(r);++e<r;){var i=Pr(0,e);e!=i&&(n[e]=n[i]),n[i]=t[e]}return n}function Mi(t){var e=t?t.length:0;return xn(e)?e:Ka(t).length}function Fi(t,e,r){var n=za(t)?ar:Hr;return("function"!=typeof e||"undefined"!=typeof r)&&(e=dn(e,r,3)),n(t,e)}function Pi(t,e,r){var n=-1,i=t?t.length:0,o=xn(i)?Cs(i):[];return r&&En(t,e,r)&&(e=null),e=dn(e,r,3),gr(t,function(t,r,i){o[++n]={criteria:e(t,r,i),index:n,value:t}}),a(o,l)}function Ui(t){var e=arguments;e.length>3&&En(e[1],e[2],e[3])&&(e=[t,e[1]]);var r=-1,n=t?t.length:0,i=xr(e,!1,!1,1),o=xn(n)?Cs(n):[];return gr(t,function(t){for(var e=i.length,n=Cs(e);e--;)n[e]=null==t?k:t[i[e]];o[++r]={criteria:n,index:r,value:t}}),a(o,p)}function zi(t,e){return Si(t,Nr(e))}function Hi(t,e){if(!bo(e)){if(!bo(t))throw new Ps(G);var r=t;t=e,e=r}return t=pa(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function Gi(t,e,r){return r&&En(t,e,r)&&(e=null),e=t&&null==e?t.length:_a(+e||0,0),un(t,D,null,null,null,null,e)}function Xi(t,e){var r;if(!bo(e)){if(!bo(t))throw new Ps(G);var n=t;t=e,e=n}return function(){return--t>0?r=e.apply(this,arguments):e=null,r}}function Ki(t,e){var r=j;if(arguments.length>2){var n=zr(arguments,2),i=b(n,Ki.placeholder);r|=B}return un(t,r,e,n,i)}function Vi(t){return pr(t,arguments.length>1?xr(arguments,!1,!1,1):Uo(t))}function Yi(t,e){var r=j|I;if(arguments.length>2){var n=zr(arguments,2),i=b(n,Yi.placeholder);r|=B}return un(e,r,t,n,i)}function Wi(t,e,r){r&&En(t,e,r)&&(e=null);var n=un(t,C,null,null,null,null,null,e);return n.placeholder=Wi.placeholder,n}function Ji(t,e,r){r&&En(t,e,r)&&(e=null);var n=un(t,O,null,null,null,null,null,e);return n.placeholder=Ji.placeholder,n}function $i(t,e,r){function n(){l&&ta(l),c&&ta(c),c=l=p=k}function i(){var r=e-(Ua()-h);if(0>=r||r>e){c&&ta(c);var n=p;c=l=p=k,n&&(d=Ua(),u=t.apply(f,a),l||c||(a=f=null))}else l=sa(i,r)}function o(){l&&ta(l),c=l=p=k,(v||_!==e)&&(d=Ua(),u=t.apply(f,a),l||c||(a=f=null))}function s(){if(a=arguments,h=Ua(),f=this,p=v&&(l||!y),_===!1)var r=y&&!l;else{c||y||(d=h);var n=_-(h-d),s=0>=n||n>_;s?(c&&(c=ta(c)),d=h,u=t.apply(f,a)):c||(c=sa(o,n))}return s&&l?l=ta(l):l||e===_||(l=sa(i,e)),r&&(s=!0,u=t.apply(f,a)),!s||l||c||(a=f=null),u}var a,c,u,h,f,l,p,d=0,_=!1,v=!0;if(!bo(t))throw new Ps(G);if(e=0>e?0:e,r===!0){var y=!0;v=!1}else wo(r)&&(y=r.leading,_="maxWait"in r&&_a(+r.maxWait||0,e),v="trailing"in r?r.trailing:v);return s.cancel=n,s}function Zi(t){return vr(t,1,arguments,1)}function Qi(t,e){return vr(t,e,arguments,2)}function to(){var t=arguments,e=t.length;if(!e)return function(){};if(!tr(t,bo))throw new Ps(G);return function(){for(var r=0,n=t[r].apply(this,arguments);++r<e;)n=t[r].call(this,n);return n}}function eo(){var t=arguments,e=t.length-1;if(0>e)return function(){};if(!tr(t,bo))throw new Ps(G);return function(){for(var r=e,n=t[r].apply(this,arguments);r--;)n=t[r].call(this,n);return n}}function ro(t,e){if(!bo(t)||e&&!bo(e))throw new Ps(G);var r=function(){var n=r.cache,i=e?e.apply(this,arguments):arguments[0];if(n.has(i))return n.get(i);var o=t.apply(this,arguments);return n.set(i,o),o};return r.cache=new ro.Cache,r}function no(t){if(!bo(t))throw new Ps(G);return function(){return!t.apply(this,arguments)}}function io(t){return Xi(t,2)}function oo(t){var e=zr(arguments,1),r=b(e,oo.placeholder);return un(t,B,null,e,r)}function so(t){var e=zr(arguments,1),r=b(e,so.placeholder);return un(t,L,null,e,r)}function ao(t){var e=xr(arguments,!1,!1,1);return un(t,N,null,null,null,e)}function co(t,e,r){var n=!0,i=!0;if(!bo(t))throw new Ps(G);return r===!1?n=!1:wo(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),ze.leading=n,ze.maxWait=+e,ze.trailing=i,$i(t,e,ze)}function uo(t,e){return e=null==e?ws:e,un(e,B,null,[t],[])}function ho(t,e,r,n){return"boolean"!=typeof e&&null!=e&&(n=r,r=En(t,e,n)?null:e,e=!1),r="function"==typeof r&&Wr(r,n,1),_r(t,e,r)}function fo(t,e,r){return e="function"==typeof e&&Wr(e,r,1),_r(t,!0,e)}function lo(t){var e=g(t)?t.length:k;return xn(e)&&Ys.call(t)==K||!1}function po(t){return t===!0||t===!1||g(t)&&Ys.call(t)==Y||!1}function _o(t){return g(t)&&Ys.call(t)==W||!1}function vo(t){return t&&1===t.nodeType&&g(t)&&Ys.call(t).indexOf("Element")>-1||!1}function yo(t){if(null==t)return!0;var e=t.length;return xn(e)&&(za(t)||jo(t)||lo(t)||g(t)&&bo(t.splice))?!e:!Ka(t).length}function go(t,e,r,n){if(r="function"==typeof r&&Wr(r,n,3),!r&&Sn(t)&&Sn(e))return t===e;var i=r?r(t,e):k;return"undefined"==typeof i?Cr(t,e,r):!!i}function mo(t){return g(t)&&"string"==typeof t.message&&Ys.call(t)==J||!1}function bo(t){return"function"==typeof t||!1}function wo(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}function Eo(t,e,r,n){var i=Ka(e),o=i.length;if(r="function"==typeof r&&Wr(r,n,3),!r&&1==o){var s=i[0],a=e[s];if(Sn(a))return null!=t&&a===t[s]&&Ks.call(t,s)}for(var c=Cs(o),u=Cs(o);o--;)a=c[o]=e[i[o]],u[o]=Sn(a);return Br(t,i,c,u,r)}function xo(t){return ko(t)&&t!=+t}function So(t){return null==t?!1:Ys.call(t)==$?Js.test(Gs.call(t)):g(t)&&Ie.test(t)||!1}function Ao(t){return null===t}function ko(t){return"number"==typeof t||g(t)&&Ys.call(t)==Q||!1}function To(t){return g(t)&&Ys.call(t)==ee||!1}function jo(t){return"string"==typeof t||g(t)&&Ys.call(t)==ne||!1}function Io(t){return g(t)&&xn(t.length)&&Pe[Ys.call(t)]||!1}function Ro(t){return"undefined"==typeof t}function Co(t){var e=t?t.length:0;return xn(e)?e?Je(t):[]:$o(t)}function Oo(t){return lr(t,Go(t))}function Bo(t,e,r){var n=Ra(t);return r&&En(t,e,r)&&(e=null),e?lr(e,n,Ka(e)):n}function Lo(t){if(null==t)return t;var e=Je(arguments);return e.push(cr),Xa.apply(k,e)}function No(t,e,r){return e=dn(e,r,3),Er(t,e,Tr,!0)}function Do(t,e,r){return e=dn(e,r,3),Er(t,e,jr,!0)}function qo(t,e,r){return("function"!=typeof e||"undefined"!=typeof r)&&(e=Wr(e,r,3)),Sr(t,e,Go)}function Mo(t,e,r){return e=Wr(e,r,3),Ar(t,e,Go)}function Fo(t,e,r){return("function"!=typeof e||"undefined"!=typeof r)&&(e=Wr(e,r,3)),Tr(t,e)}function Po(t,e,r){return e=Wr(e,r,3),Ar(t,e,Ka)}function Uo(t){return Ir(t,Go(t))}function zo(t,e){return t?Ks.call(t,e):!1}function Ho(t,e,r){r&&En(t,e,r)&&(e=null);for(var n=-1,i=Ka(t),o=i.length,s={};++n<o;){var a=i[n],c=t[a];e?Ks.call(s,c)?s[c].push(a):s[c]=[a]:s[c]=a}return s}function Go(t){if(null==t)return[];wo(t)||(t=qs(t));var e=t.length;e=e&&xn(e)&&(za(t)||Ia.nonEnumArgs&&lo(t))&&e||0;for(var r=t.constructor,n=-1,i="function"==typeof r&&r.prototype==t,o=Cs(e),s=e>0;++n<e;)o[n]=n+"";for(var a in t)s&&wn(a,e)||"constructor"==a&&(i||!Ks.call(t,a))||o.push(a);return o}function Xo(t,e,r){var n={};return e=dn(e,r,3),Tr(t,function(t,r,i){n[r]=e(t,r,i)}),n}function Ko(t,e,r){if(null==t)return{};if("function"!=typeof e){var n=rr(xr(arguments,!1,!1,1),Fs);return kn(t,yr(Go(t),n))}return e=Wr(e,r,3),Tn(t,function(t,r,n){return!e(t,r,n)})}function Vo(t){for(var e=-1,r=Ka(t),n=r.length,i=Cs(n);++e<n;){var o=r[e];i[e]=[o,t[o]]}return i}function Yo(t,e,r){return null==t?{}:"function"==typeof e?Tn(t,Wr(e,r,3)):kn(t,xr(arguments,!1,!1,1))}function Wo(t,e,r){var n=null==t?k:t[e];return"undefined"==typeof n&&(n=r),bo(n)?n.call(t):n}function Jo(t,e,r,n){var i=za(t)||Io(t);if(e=dn(e,n,4),null==r)if(i||wo(t)){var o=t.constructor;r=i?za(t)?new o:[]:Ra("function"==typeof o&&o.prototype)}else r={};return(i?$e:Tr)(t,function(t,n,i){return e(r,t,n,i)}),r}function $o(t){return Xr(t,Ka(t))}function Zo(t){return Xr(t,Go(t))}function Qo(t,e,r){r&&En(t,e,r)&&(e=r=null);var n=null==t,i=null==e;if(null==r&&(i&&"boolean"==typeof t?(r=t,t=1):"boolean"==typeof e&&(r=e,i=!0)),n&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,r||t%1||e%1){var o=ba();return va(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return Pr(t,e)}function ts(t){return t=c(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function es(t){return t=c(t),t&&t.replace(Re,d)}function rs(t,e,r){t=c(t),e+="";var n=t.length;return r=("undefined"==typeof r?n:va(0>r?0:+r||0,n))-e.length,r>=0&&t.indexOf(e,r)==r}function ns(t){return t=c(t),t&&we.test(t)?t.replace(me,_):t}function is(t){return t=c(t),t&&Be.test(t)?t.replace(Oe,"\\$&"):t}function os(t,e,r){t=c(t),e=+e;var n=t.length;if(n>=e||!pa(e))return t;var i=(e-n)/2,o=ea(i),s=Qs(i);return r=an("",s,r),r.slice(0,o)+t+r}function ss(t,e,r){return t=c(t),t&&an(t,e,r)+t}function as(t,e,r){return t=c(t),t&&t+an(t,e,r)}function cs(t,e,r){return r&&En(t,e,r)&&(e=0),ma(t,e)}function us(t,e){var r="";if(t=c(t),e=+e,1>e||!t||!pa(e))return r;do e%2&&(r+=t),e=ea(e/2),t+=t;while(e);return r}function hs(t,e,r){return t=c(t),r=null==r?0:va(0>r?0:+r||0,t.length),t.lastIndexOf(e,r)==r}function fs(t,r,n){var i=e.templateSettings;n&&En(t,r,n)&&(r=n=null),t=c(t),r=hr(hr({},n||r),i,ur);var o,s,a=hr(hr({},r.imports),i.imports,ur),u=Ka(a),h=Xr(a,u),f=0,l=r.interpolate||Ce,p="__p += '",d=Ms((r.escape||Ce).source+"|"+l.source+"|"+(l===Se?Ae:Ce).source+"|"+(r.evaluate||Ce).source+"|$","g"),_="//# sourceURL="+("sourceURL"in r?r.sourceURL:"lodash.templateSources["+ ++Fe+"]")+"\n";t.replace(d,function(e,r,n,i,a,c){return n||(n=i),p+=t.slice(f,c).replace(Ne,v),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=c+e.length,e}),p+="';\n";var y=r.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(_e,""):p).replace(ve,"$1").replace(ye,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=gs(function(){return Ls(u,_+"return "+p).apply(k,h)});if(g.source=p,mo(g))throw g;return g}function ls(t,e,r){var n=t;return(t=c(t))?(r?En(n,e,r):null==e)?t.slice(E(t),x(t)+1):(e+="",t.slice(h(t,e),f(t,e)+1)):t}function ps(t,e,r){var n=t;return t=c(t),t?t.slice((r?En(n,e,r):null==e)?E(t):h(t,e+"")):t}function ds(t,e,r){var n=t;return t=c(t),t?(r?En(n,e,r):null==e)?t.slice(0,x(t)+1):t.slice(0,f(t,e+"")+1):t}function _s(t,e,r){r&&En(t,e,r)&&(e=null);var n=q,i=M;if(null!=e)if(wo(e)){var o="separator"in e?e.separator:o;n="length"in e?+e.length||0:n,i="omission"in e?c(e.omission):i}else n=+e||0;if(t=c(t),n>=t.length)return t;var s=n-i.length;if(1>s)return i;var a=t.slice(0,s);if(null==o)return a+i;if(To(o)){if(t.slice(s).search(o)){var u,h,f=t.slice(0,s);for(o.global||(o=Ms(o.source,(ke.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(f);)h=u.index;a=a.slice(0,null==h?s:h)}}else if(t.indexOf(o,s)!=s){var l=a.lastIndexOf(o);l>-1&&(a=a.slice(0,l))}return a+i}function vs(t){return t=c(t),t&&be.test(t)?t.replace(ge,S):t}function ys(t,e,r){return r&&En(t,e,r)&&(e=null),t=c(t),t.match(e||De)||[]}function gs(t){try{return t()}catch(e){return mo(e)?e:Bs(e)}}function ms(t,e,r){return r&&En(t,e,r)&&(e=null),g(t)?Es(t):dr(t,e)}function bs(t){return function(){return t}}function ws(t){return t}function Es(t){return Nr(_r(t,!0))}function xs(t,e,r){if(null==r){var n=wo(e),i=n&&Ka(e),o=i&&i.length&&Ir(e,i);(o?o.length:n)||(o=!1,r=e,e=t,t=this)}o||(o=Ir(e,Ka(e)));var s=!0,a=-1,c=bo(t),u=o.length;r===!1?s=!1:wo(r)&&"chain"in r&&(s=r.chain);for(;++a<u;){var h=o[a],f=e[h];t[h]=f,c&&(t.prototype[h]=function(e){return function(){var r=this.__chain__;if(s||r){var n=t(this.__wrapped__);return(n.__actions__=Je(this.__actions__)).push({func:e,args:arguments,thisArg:t}),n.__chain__=r,n}var i=[this.value()];return na.apply(i,arguments),e.apply(t,i)}}(f))}return t}function Ss(){return t._=Ws,this}function As(){}function ks(t){return Mr(t+"")}function Ts(t){return function(e){return null==t?k:t[e]}}function js(t,e,r){r&&En(t,e,r)&&(e=r=null),t=+t||0,r=null==r?1:+r||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,i=_a(Qs((e-t)/(r||1)),0),o=Cs(i);++n<i;)o[n]=t,t+=r;return o}function Is(t,e,r){if(t=+t,1>t||!pa(t))return[];var n=-1,i=Cs(va(t,xa));for(e=Wr(e,r,1);++n<t;)xa>n?i[n]=e(n):e(n);return i}function Rs(t){var e=++Vs;return c(t)+e}t=t?Ze.defaults(Ye.Object(),t,Ze.pick(Ye,Me)):Ye;var Cs=t.Array,Os=t.Date,Bs=t.Error,Ls=t.Function,Ns=t.Math,Ds=t.Number,qs=t.Object,Ms=t.RegExp,Fs=t.String,Ps=t.TypeError,Us=Cs.prototype,zs=qs.prototype,Hs=(Hs=t.window)&&Hs.document,Gs=Ls.prototype.toString,Xs=Mr("length"),Ks=zs.hasOwnProperty,Vs=0,Ys=zs.toString,Ws=t._,Js=Ms("^"+is(Ys).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$s=So($s=t.ArrayBuffer)&&$s,Zs=So(Zs=$s&&new $s(0).slice)&&Zs,Qs=Ns.ceil,ta=t.clearTimeout,ea=Ns.floor,ra=So(ra=qs.getPrototypeOf)&&ra,na=Us.push,ia=zs.propertyIsEnumerable,oa=So(oa=t.Set)&&oa,sa=t.setTimeout,aa=Us.splice,ca=So(ca=t.Uint8Array)&&ca,ua=(Us.unshift,So(ua=t.WeakMap)&&ua),ha=function(){try{var e=So(e=t.Float64Array)&&e,r=new e(new $s(10),0,1)&&e}catch(n){}return r}(),fa=So(fa=Cs.isArray)&&fa,la=So(la=qs.create)&&la,pa=t.isFinite,da=So(da=qs.keys)&&da,_a=Ns.max,va=Ns.min,ya=So(ya=Os.now)&&ya,ga=So(ga=Ds.isFinite)&&ga,ma=t.parseInt,ba=Ns.random,wa=Ds.NEGATIVE_INFINITY,Ea=Ds.POSITIVE_INFINITY,xa=Ns.pow(2,32)-1,Sa=xa-1,Aa=xa>>>1,ka=ha?ha.BYTES_PER_ELEMENT:0,Ta=Ns.pow(2,53)-1,ja=ua&&new ua,Ia=e.support={};!function(){Ia.funcDecomp=!So(t.WinRTError)&&Le.test(A),Ia.funcNames="string"==typeof Ls.name;try{Ia.dom=11===Hs.createDocumentFragment().nodeType}catch(e){Ia.dom=!1}try{Ia.nonEnumArgs=!ia.call(arguments,1)}catch(e){Ia.nonEnumArgs=!0}}(0,0),e.templateSettings={escape:Ee,evaluate:xe,interpolate:Se,variable:"",imports:{_:e}};var Ra=function(){function e(){}return function(r){if(wo(r)){e.prototype=r;var n=new e;e.prototype=null}return n||t.Object()}}(),Ca=ja?function(t,e){return ja.set(t,e),t}:ws;Zs||(Jr=$s&&ca?function(t){var e=t.byteLength,r=ha?ea(e/ka):0,n=r*ka,i=new $s(e);if(r){var o=new ha(i,0,r);o.set(new ha(t,0,r))}return e!=n&&(o=new ca(i,n),o.set(new ca(t,n))),i}:bs(null));var Oa=la&&oa?function(t){return new Ke(t)}:bs(null),Ba=ja?function(t){return ja.get(t)}:As,La=function(){var t=0,e=0;return function(r,n){var i=Ua(),o=P-(i-e);if(e=i,o>0){if(++t>=F)return r}else t=0;return Ca(r,n)}}(),Na=Qr(function(t,e,r){Ks.call(t,r)?++t[r]:t[r]=1}),Da=Qr(function(t,e,r){Ks.call(t,r)?t[r].push(e):t[r]=[e]}),qa=Qr(function(t,e,r){t[r]=e}),Ma=on(nr),Fa=on(ir,!0),Pa=Qr(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),Ua=ya||function(){return(new Os).getTime()},za=fa||function(t){return g(t)&&xn(t.length)&&Ys.call(t)==V||!1};Ia.dom||(vo=function(t){return t&&1===t.nodeType&&g(t)&&!Ga(t)||!1});var Ha=ga||function(t){return"number"==typeof t&&pa(t)};(bo(/x/)||ca&&!bo(ca))&&(bo=function(t){return Ys.call(t)==$});var Ga=ra?function(t){if(!t||Ys.call(t)!=te)return!1;var e=t.valueOf,r=So(e)&&(r=ra(e))&&ra(r);return r?t==r||ra(t)==r:In(t)}:In,Xa=tn(hr),Ka=da?function(t){if(t)var e=t.constructor,r=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&r&&xn(r)?Rn(t):wo(t)?da(t):[]}:Rn,Va=tn(Dr),Ya=rn(function(t,e,r){return e=e.toLowerCase(),t+(r?e.charAt(0).toUpperCase()+e.slice(1):e)}),Wa=rn(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()});8!=ma(qe+"08")&&(cs=function(t,e,r){return(r?En(t,e,r):null==e)?e=0:e&&(e=+e),t=ls(t),ma(t,e||(je.test(t)?16:10))});var Ja=rn(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),$a=rn(function(t,e,r){return t+(r?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});return r.prototype=e.prototype,re.prototype["delete"]=ie,re.prototype.get=He,re.prototype.has=Ge,re.prototype.set=Xe,Ke.prototype.push=We,ro.Cache=re,e.after=Hi,e.ary=Gi,e.assign=Xa,e.at=wi,e.before=Xi,e.bind=Ki,e.bindAll=Vi,e.bindKey=Yi,e.callback=ms,e.chain=di,e.chunk=Bn,e.compact=Ln,e.constant=bs,e.countBy=Na,e.create=Bo,e.curry=Wi,e.curryRight=Ji,e.debounce=$i,e.defaults=Lo,e.defer=Zi,e.delay=Qi,e.difference=Nn,e.drop=Dn,e.dropRight=qn,e.dropRightWhile=Mn,e.dropWhile=Fn,e.filter=Si,e.flatten=Hn,e.flattenDeep=Gn,e.flow=to,e.flowRight=eo,e.forEach=ji,e.forEachRight=Ii,e.forIn=qo,e.forInRight=Mo,e.forOwn=Fo,e.forOwnRight=Po,e.functions=Uo,e.groupBy=Da,e.indexBy=qa,e.initial=Kn,e.intersection=Vn,e.invert=Ho,e.invoke=Ri,e.keys=Ka,e.keysIn=Go,e.map=Ci,e.mapValues=Xo,e.matches=Es,e.memoize=ro,e.merge=Va,e.mixin=xs,e.negate=no,e.omit=Ko,e.once=io,e.pairs=Vo,e.partial=oo,e.partialRight=so,e.partition=Pa,e.pick=Yo,e.pluck=Oi,e.property=ks,e.propertyOf=Ts,e.pull=Jn,e.pullAt=$n,e.range=js,e.rearg=ao,e.reject=Ni,e.remove=Zn,e.rest=Qn,e.shuffle=qi,e.slice=ti,e.sortBy=Pi,e.sortByAll=Ui,e.take=ni,e.takeRight=ii,e.takeRightWhile=oi,e.takeWhile=si,e.tap=_i,e.throttle=co,e.thru=vi,e.times=Is,e.toArray=Co,e.toPlainObject=Oo,e.transform=Jo,e.union=ai,e.uniq=ci,e.unzip=ui,e.values=$o,e.valuesIn=Zo,e.where=zi,e.without=hi,e.wrap=uo,e.xor=fi,e.zip=li,e.zipObject=pi,e.backflow=eo,e.collect=Ci,e.compose=eo,e.each=ji,e.eachRight=Ii,e.extend=Xa,e.iteratee=ms,e.methods=Uo,e.object=pi,e.select=Si,e.tail=Qn,e.unique=ci,xs(e,e),e.attempt=gs,e.camelCase=Ya,e.capitalize=ts,e.clone=ho,e.cloneDeep=fo,e.deburr=es,e.endsWith=rs,e.escape=ns,e.escapeRegExp=is,e.every=xi,e.find=Ai,e.findIndex=Pn,e.findKey=No,e.findLast=ki,e.findLastIndex=Un,e.findLastKey=Do,e.findWhere=Ti,e.first=zn,e.has=zo,e.identity=ws,e.includes=Ei,e.indexOf=Xn,e.isArguments=lo,e.isArray=za,e.isBoolean=po,e.isDate=_o,e.isElement=vo,e.isEmpty=yo,e.isEqual=go,e.isError=mo,e.isFinite=Ha,e.isFunction=bo,e.isMatch=Eo,e.isNaN=xo,e.isNative=So,e.isNull=Ao,e.isNumber=ko,e.isObject=wo,e.isPlainObject=Ga,e.isRegExp=To,e.isString=jo,e.isTypedArray=Io,e.isUndefined=Ro,e.kebabCase=Wa,e.last=Yn,e.lastIndexOf=Wn,e.max=Ma,e.min=Fa,e.noConflict=Ss,e.noop=As,e.now=Ua,e.pad=os,e.padLeft=ss,e.padRight=as,e.parseInt=cs,e.random=Qo,e.reduce=Bi,e.reduceRight=Li,e.repeat=us,e.result=Wo,e.runInContext=A,e.size=Mi,e.snakeCase=Ja,e.some=Fi,e.sortedIndex=ei,e.sortedLastIndex=ri,e.startCase=$a,e.startsWith=hs,e.template=fs,e.trim=ls,e.trimLeft=ps,e.trimRight=ds,e.trunc=_s,e.unescape=vs,e.uniqueId=Rs,e.words=ys,e.all=xi,e.any=Fi,e.contains=Ei,e.detect=Ai,e.foldl=Bi,e.foldr=Li,e.head=zn,e.include=Ei,e.inject=Bi,xs(e,function(){var t={};return Tr(e,function(r,n){e.prototype[n]||(t[n]=r)}),t}(),!1),e.sample=Di,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Di(e,t)}):Di(this.value())},e.VERSION=T,$e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),$e(["filter","map","takeWhile"],function(t,e){var r=e==U;n.prototype[t]=function(t,n){var i=this.clone(),o=i.filtered,s=i.iteratees||(i.iteratees=[]);return i.filtered=o||r||e==H&&i.dir<0,s.push({iteratee:dn(t,n,3),type:e}),i}}),$e(["drop","take"],function(t,e){var r=t+"Count",i=t+"While";n.prototype[t]=function(n){n=null==n?1:_a(+n||0,0);var i=this.clone();if(i.filtered){var o=i[r];i[r]=e?va(o,n):o+n}else{var s=i.views||(i.views=[]);s.push({size:n,type:t+(i.dir<0?"Right":"")})}return i},n.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},n.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[i](t,e).reverse()}}),$e(["first","last"],function(t,e){var r="take"+(e?"Right":"");n.prototype[t]=function(){return this[r](1).value()[0]}}),$e(["initial","rest"],function(t,e){var r="drop"+(e?"":"Right");n.prototype[t]=function(){return this[r](1)}}),$e(["pluck","where"],function(t,e){var r=e?"filter":"map",i=e?Nr:Mr;n.prototype[t]=function(t){return this[r](i(e?t:t+""))}}),n.prototype.dropWhile=function(t,e){var r,n,i=this.dir<0;return t=dn(t,e,3),this.filter(function(e,o,s){return r=r&&(i?n>o:o>n),n=o,r||(r=!t(e,o,s))})},n.prototype.reject=function(t,e){return t=dn(t,e,3),this.filter(function(e,r,n){return!t(e,r,n)})},n.prototype.slice=function(t,e){t=null==t?0:+t||0;var r=0>t?this.takeRight(-t):this.drop(t);return"undefined"!=typeof e&&(e=+e||0,r=0>e?r.dropRight(-e):r.take(e-t)),r},Tr(n.prototype,function(t,i){var o=e[i],s=/^(?:first|last)$/.test(i);e.prototype[i]=function(){var i=this.__wrapped__,a=arguments,c=this.__chain__,u=!!this.__actions__.length,h=i instanceof n,f=h&&!u;if(s&&!c)return f?t.call(i):o.call(e,this.value());var l=function(t){var r=[t];return na.apply(r,a),o.apply(e,r)};if(h||za(i)){var p=f?i:new n(this),d=t.apply(p,a);if(!s&&(u||d.actions)){var _=d.actions||(d.actions=[]);_.push({func:vi,args:[l],thisArg:e})}return new r(d,c)}return this.thru(l)}}),$e(["concat","join","pop","push","shift","sort","splice","unshift"],function(t){var r=Us[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?r.apply(this.value(),t):this[n](function(e){return r.apply(e,t)})}}),n.prototype.clone=i,n.prototype.reverse=m,n.prototype.value=Z,e.prototype.chain=yi,e.prototype.reverse=gi,e.prototype.toString=mi,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=bi,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var k,T="3.1.0",j=1,I=2,R=4,C=8,O=16,B=32,L=64,N=128,D=256,q=30,M="...",F=150,P=16,U=0,z=1,H=2,G="Expected a function",X="__lodash_placeholder__",K="[object Arguments]",V="[object Array]",Y="[object Boolean]",W="[object Date]",J="[object Error]",$="[object Function]",Z="[object Map]",Q="[object Number]",te="[object Object]",ee="[object RegExp]",re="[object Set]",ne="[object String]",ie="[object WeakMap]",oe="[object ArrayBuffer]",se="[object Float32Array]",ae="[object Float64Array]",ce="[object Int8Array]",ue="[object Int16Array]",he="[object Int32Array]",fe="[object Uint8Array]",le="[object Uint8ClampedArray]",pe="[object Uint16Array]",de="[object Uint32Array]",_e=/\b__p \+= '';/g,ve=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ge=/&(?:amp|lt|gt|quot|#39|#96);/g,me=/[&<>"'`]/g,be=RegExp(ge.source),we=RegExp(me.source),Ee=/<%-([\s\S]+?)%>/g,xe=/<%([\s\S]+?)%>/g,Se=/<%=([\s\S]+?)%>/g,Ae=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ke=/\w*$/,Te=/^\s*function[ \n\r\t]+\w/,je=/^0[xX]/,Ie=/^\[object .+?Constructor\]$/,Re=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ce=/($^)/,Oe=/[.*+?^${}()|[\]\/\\]/g,Be=RegExp(Oe.source),Le=/\bthis\b/,Ne=/['\n\r\u2028\u2029\\]/g,De=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"{2,}(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),qe=" 	\f\n\r\u2028\u2029",Me=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Fe=-1,Pe={};Pe[se]=Pe[ae]=Pe[ce]=Pe[ue]=Pe[he]=Pe[fe]=Pe[le]=Pe[pe]=Pe[de]=!0,Pe[K]=Pe[V]=Pe[oe]=Pe[Y]=Pe[W]=Pe[J]=Pe[$]=Pe[Z]=Pe[Q]=Pe[te]=Pe[ee]=Pe[re]=Pe[ne]=Pe[ie]=!1;var Ue={};Ue[K]=Ue[V]=Ue[oe]=Ue[Y]=Ue[W]=Ue[se]=Ue[ae]=Ue[ce]=Ue[ue]=Ue[he]=Ue[Q]=Ue[te]=Ue[ee]=Ue[ne]=Ue[fe]=Ue[le]=Ue[pe]=Ue[de]=!0,Ue[J]=Ue[$]=Ue[Z]=Ue[re]=Ue[ie]=!1;var ze={leading:!1,maxWait:0,trailing:!1},He={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Ge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Xe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ke={"function":!0,object:!0},Ve={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ye=Ke[typeof window]&&window!==(this&&this.window)?window:this,We=Ke[typeof e]&&e&&!e.nodeType&&e,Je=Ke[typeof t]&&t&&!t.nodeType&&t,$e=We&&Je&&"object"==typeof i&&i;!$e||$e.global!==$e&&$e.window!==$e&&$e.self!==$e||(Ye=$e);var Ze=(Je&&Je.exports===We&&We,A());Ye._=Ze,n=function(){return Ze}.call(e,r,e,t),!(n!==k&&(t.exports=n))}).call(this)}).call(e,r(68)(t),function(){return this}())},function(t){function e(t){if(!t||"[object Object]"!==n.call(t)||t.nodeType||t.setInterval)return!1;var e=r.call(t,"constructor"),i=r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var o;for(o in t);return void 0===o||r.call(t,o)}var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function i(){var t,r,n,o,s,a,c=arguments[0]||{},u=1,h=arguments.length,f=!1;for("boolean"==typeof c&&(f=c,c=arguments[1]||{},u=2),"object"!=typeof c&&"function"!=typeof c&&(c={});h>u;u++)if(null!=(t=arguments[u]))for(r in t)n=c[r],o=t[r],c!==o&&(f&&o&&(e(o)||(s=Array.isArray(o)))?(s?(s=!1,a=n&&Array.isArray(n)?n:[]):a=n&&e(n)?n:{},c[r]=i(f,a,o)):void 0!==o&&(c[r]=o));return c}},function(t){function e(t){this._namespace=t?Array.isArray(t)?t:[""+t]:[],this._prefix=this._namespace.concat([""]).join(": ")}e.prototype.sub=function(t){var r=this._namespace.slice();t&&"string"==typeof t&&r.push(t);var n=new e(r);return n._setParent(this),n},e.prototype._setParent=function(t){this._parent=t},e.makeLevel=function(){return function(){var t=Array.prototype.slice.call(arguments);t[0]=this._prefix+t[0],e.engine.logObject.apply(e,t)}},e.prototype.debug=e.makeLevel(1),e.prototype.info=e.makeLevel(2),e.prototype.warn=e.makeLevel(3),e.prototype.error=e.makeLevel(4);var r={logObject:function(t){var e=Array.prototype.slice.call(arguments,1);e=e.map(function(t){return JSON.stringify(t,null,2)}),e.unshift(t),e.unshift("["+(new Date).toISOString()+"]"),console.log.apply(console,e)}},n={logObject:function(){}};e.engine=n,console&&console.log&&(e.engine=r),t.exports=new e,t.exports.internal=t.exports.sub(),t.exports.Log=e},function(t){!function(){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(){return 1}function n(t){return this instanceof n?("number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||r,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=r),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,void this.reset()):new n(t)}function i(t,e,r){var n=t._cache[e];return n&&(t._maxAge&&Date.now()-n.now>t._maxAge?(c(t,n),t._allowStale||(n=void 0)):r&&o(t,n),n&&(n=n.value)),n}function o(t,e){a(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}function s(t){for(;t._lru<t._mru&&t._length>t._max;)c(t,t._lruList[t._lru])}function a(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function c(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],a(t,e))}function u(t,e,r,n,i){this.key=t,this.value=e,this.lu=r,this.length=n,this.now=i}"object"==typeof t&&t.exports?t.exports=n:this.LRUCache=n,Object.defineProperty(n.prototype,"max",{set:function(t){(!t||"number"!=typeof t||0>=t)&&(t=1/0),this._max=t,this._length>this._max&&s(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(n.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t){this._lengthCalculator=r,this._length=this._itemCount;for(var e in this._cache)this._cache[e].length=1}else{this._lengthCalculator=t,this._length=0;for(var e in this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length}this._length>this._max&&s(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(n.prototype,"itemCount",{get:function(){return this._itemCount
},enumerable:!0}),n.prototype.forEach=function(t,e){e=e||this;for(var r=0,n=this._mru-1;n>=0&&r<this._itemCount;n--)if(this._lruList[n]){r++;var i=this._lruList[n];this._maxAge&&Date.now()-i.now>this._maxAge&&(c(this,i),this._allowStale||(i=void 0)),i&&t.call(e,i.value,i.key,this)}},n.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,r=this._mru-1;r>=0&&e<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];t[e++]=n.key}return t},n.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,r=this._mru-1;r>=0&&e<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];t[e++]=n.value}return t},n.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},n.prototype.dump=function(){return this._cache},n.prototype.dumpLru=function(){return this._lruList},n.prototype.set=function(t,r){if(e(this._cache,t))return this._dispose&&this._dispose(t,this._cache[t].value),this._maxAge&&(this._cache[t].now=Date.now()),this._cache[t].value=r,this.get(t),!0;var n=this._lengthCalculator(r),i=this._maxAge?Date.now():0,o=new u(t,r,this._mru++,n,i);return o.length>this._max?(this._dispose&&this._dispose(t,r),!1):(this._length+=o.length,this._lruList[o.lu]=this._cache[t]=o,this._itemCount++,this._length>this._max&&s(this),!0)},n.prototype.has=function(t){if(!e(this._cache,t))return!1;var r=this._cache[t];return this._maxAge&&Date.now()-r.now>this._maxAge?!1:!0},n.prototype.get=function(t){return i(this,t,!0)},n.prototype.peek=function(t){return i(this,t,!1)},n.prototype.pop=function(){var t=this._lruList[this._lru];return c(this,t),t||null},n.prototype.del=function(t){c(this,this._cache[t])}}()},function(t,e,r){var n,i;(function(r,o){!function(){function s(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(a,arguments)}}var a,c,u={};a=this,null!=a&&(c=a.async),u.noConflict=function(){return a.async=c,u};var h=Object.prototype.toString,f=Array.isArray||function(t){return"[object Array]"===h.call(t)},l=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},p=function(t,e){if(t.map)return t.map(e);var r=[];return l(t,function(t,n,i){r.push(e(t,n,i))}),r},d=function(t,e,r){return t.reduce?t.reduce(e,r):(l(t,function(t,n,i){r=e(r,t,n,i)}),r)},_=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof r&&r.nextTick?(u.nextTick=r.nextTick,u.setImmediate="undefined"!=typeof o?function(t){o(t)}:u.nextTick):"function"==typeof o?(u.nextTick=function(t){o(t)},u.setImmediate=u.nextTick):(u.nextTick=function(t){setTimeout(t,0)},u.setImmediate=u.nextTick),u.each=function(t,e,r){function n(e){e?(r(e),r=function(){}):(i+=1,i>=t.length&&r())}if(r=r||function(){},!t.length)return r();var i=0;l(t,function(t){e(t,s(n))})},u.forEach=u.each,u.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var n=0,i=function(){e(t[n],function(e){e?(r(e),r=function(){}):(n+=1,n>=t.length?r():i())})};i()},u.forEachSeries=u.eachSeries,u.eachLimit=function(t,e,r,n){var i=v(e);i.apply(null,[t,r,n])},u.forEachLimit=u.eachLimit;var v=function(t){return function(e,r,n){if(n=n||function(){},!e.length||0>=t)return n();var i=0,o=0,s=0;!function a(){if(i>=e.length)return n();for(;t>s&&o<e.length;)o+=1,s+=1,r(e[o-1],function(t){t?(n(t),n=function(){}):(i+=1,s-=1,i>=e.length?n():a())})}()}},y=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[u.each].concat(e))}},g=function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[v(t)].concat(r))}},m=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[u.eachSeries].concat(e))}},b=function(t,e,r,n){if(e=p(e,function(t,e){return{index:e,value:t}}),n){var i=[];t(e,function(t,e){r(t.value,function(r,n){i[t.index]=n,e(r)})},function(t){n(t,i)})}else t(e,function(t,e){r(t.value,function(t){e(t)})})};u.map=y(b),u.mapSeries=m(b),u.mapLimit=function(t,e,r,n){return w(e)(t,r,n)};var w=function(t){return g(t,b)};u.reduce=function(t,e,r,n){u.eachSeries(t,function(t,n){r(e,t,function(t,r){e=r,n(t)})},function(t){n(t,e)})},u.inject=u.reduce,u.foldl=u.reduce,u.reduceRight=function(t,e,r,n){var i=p(t,function(t){return t}).reverse();u.reduce(i,e,r,n)},u.foldr=u.reduceRight;var E=function(t,e,r,n){var i=[];e=p(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&i.push(t),e()})},function(){n(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};u.filter=y(E),u.filterSeries=m(E),u.select=u.filter,u.selectSeries=u.filterSeries;var x=function(t,e,r,n){var i=[];e=p(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||i.push(t),e()})},function(){n(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};u.reject=y(x),u.rejectSeries=m(x);var S=function(t,e,r,n){t(e,function(t,e){r(t,function(r){r?(n(t),n=function(){}):e()})},function(){n()})};u.detect=y(S),u.detectSeries=m(S),u.some=function(t,e,r){u.each(t,function(t,n){e(t,function(t){t&&(r(!0),r=function(){}),n()})},function(){r(!1)})},u.any=u.some,u.every=function(t,e,r){u.each(t,function(t,n){e(t,function(t){t||(r(!1),r=function(){}),n()})},function(){r(!0)})},u.all=u.every,u.sortBy=function(t,e,r){u.map(t,function(t,r){e(t,function(e,n){e?r(e):r(null,{value:t,criteria:n})})},function(t,e){if(t)return r(t);var n=function(t,e){var r=t.criteria,n=e.criteria;return n>r?-1:r>n?1:0};r(null,p(e.sort(n),function(t){return t.value}))})},u.auto=function(t,e){e=e||function(){};var r=_(t),n=r.length;if(!n)return e();var i={},o=[],s=function(t){o.unshift(t)},a=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},c=function(){n--,l(o.slice(0),function(t){t()})};s(function(){if(!n){var t=e;e=function(){},t(null,i)}}),l(r,function(r){var n=f(t[r])?t[r]:[t[r]],o=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var o={};l(_(i),function(t){o[t]=i[t]}),o[r]=n,e(t,o),e=function(){}}else i[r]=n,u.setImmediate(c)},h=n.slice(0,Math.abs(n.length-1))||[],p=function(){return d(h,function(t,e){return t&&i.hasOwnProperty(e)},!0)&&!i.hasOwnProperty(r)};if(p())n[n.length-1](o,i);else{var v=function(){p()&&(a(v),n[n.length-1](o,i))};s(v)}})},u.retry=function(t,e,r){var n=5,i=[];"function"==typeof t&&(r=e,e=t,t=n),t=parseInt(t,10)||n;var o=function(n,o){for(var s=function(t,e){return function(r){t(function(t,n){r(!t||e,{err:t,result:n})},o)}};t;)i.push(s(e,!(t-=1)));u.series(i,function(t,e){e=e[e.length-1],(n||r)(e.err,e.result)})};return r?o():o},u.waterfall=function(t,e){if(e=e||function(){},!f(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var n=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();i.push(o?n(o):e),u.setImmediate(function(){t.apply(null,i)})}}};n(u.iterator(t))()};var A=function(t,e,r){if(r=r||function(){},f(e))t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var n={};t.each(_(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(t){r(t,n)})}};u.parallel=function(t,e){A({map:u.map,each:u.each},t,e)},u.parallelLimit=function(t,e,r){A({map:w(e),each:v(e)},t,r)},u.series=function(t,e){if(e=e||function(){},f(t))u.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};u.eachSeries(_(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(t){e(t,r)})}},u.iterator=function(t){var e=function(r){var n=function(){return t.length&&t[r].apply(null,arguments),n.next()};return n.next=function(){return r<t.length-1?e(r+1):null},n};return e(0)},u.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var k=function(t,e,r,n){var i=[];t(e,function(t,e){r(t,function(t,r){i=i.concat(r||[]),e(t)})},function(t){n(t,i)})};u.concat=y(k),u.concatSeries=m(k),u.whilst=function(t,e,r){t()?e(function(n){return n?r(n):void u.whilst(t,e,r)}):r()},u.doWhilst=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?u.doWhilst(t,e,r):r()})},u.until=function(t,e,r){t()?r():e(function(n){return n?r(n):void u.until(t,e,r)})},u.doUntil=function(t,e,r){t(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?r():u.doUntil(t,e,r)})},u.queue=function(t,e){function r(t,e,r,n){return t.started||(t.started=!0),f(e)||(e=[e]),0==e.length?u.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var i={data:e,callback:"function"==typeof n?n:null};r?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),u.setImmediate(t.process)})}void 0===e&&(e=1);var n=0,i={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(i,t,!1,e)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(t,e){r(i,t,!0,e)},process:function(){if(!i.paused&&n<i.concurrency&&i.tasks.length){var e=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),n+=1;var r=function(){n-=1,e.callback&&e.callback.apply(e,arguments),i.drain&&i.tasks.length+n===0&&i.drain(),i.process()},o=s(r);t(e.data,o)}},length:function(){return i.tasks.length},running:function(){return n},idle:function(){return i.tasks.length+n===0},pause:function(){i.paused!==!0&&(i.paused=!0,i.process())},resume:function(){i.paused!==!1&&(i.paused=!1,i.process())}};return i},u.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function n(t,e,r){for(var n=-1,i=t.length-1;i>n;){var o=n+(i-n+1>>>1);r(e,t[o])>=0?n=o:i=o-1}return n}function i(t,e,i,o){return t.started||(t.started=!0),f(e)||(e=[e]),0==e.length?u.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var s={data:e,priority:i,callback:"function"==typeof o?o:null};t.tasks.splice(n(t.tasks,s,r)+1,0,s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),u.setImmediate(t.process)})}var o=u.queue(t,e);return o.push=function(t,e,r){i(o,t,e,r)},delete o.unshift,o},u.cargo=function(t,e){var r=!1,n=[],i={tasks:n,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){f(t)||(t=[t]),l(t,function(t){n.push({data:t,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===e&&i.saturated()}),u.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var s="number"==typeof e?n.splice(0,e):n.splice(0,n.length),a=p(s,function(t){return t.data});i.empty&&i.empty(),r=!0,t(a,function(){r=!1;var t=arguments;l(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return n.length},running:function(){return r}};return i};var T=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&l(r,function(e){console[t](e)}))}]))}};u.log=T("log"),u.dir=T("dir"),u.memoize=function(t,e){var r={},n={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in r?u.nextTick(function(){o.apply(null,r[s])}):s in n?n[s].push(o):(n[s]=[o],t.apply(null,i.concat([function(){r[s]=arguments;var t=n[s];delete n[s];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=t,i},u.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},u.times=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return u.map(n,e,r)},u.timesSeries=function(t,e,r){for(var n=[],i=0;t>i;i++)n.push(i);return u.mapSeries(n,e,r)},u.seq=function(){var t=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),n=r.pop();u.reduce(t,r,function(t,r,n){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))},function(t,r){n.apply(e,[t].concat(r))})}},u.compose=function(){return u.seq.apply(null,Array.prototype.reverse.call(arguments))};var j=function(t,e){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return t(e,function(t,e){t.apply(r,n.concat([e]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};u.applyEach=y(j),u.applyEachSeries=m(j),u.forever=function(t,e){function r(n){if(n){if(e)return e(n);throw n}t(r)}r()},"undefined"!=typeof t&&t.exports?t.exports=u:(n=[],i=function(){return u}.apply(e,n),!(void 0!==i&&(t.exports=i)))}()}).call(e,r(63),r(70).setImmediate)},function(t,e,r){t.exports=function(t){function e(t){return o.bitArray.bitSlice(o.hash.sha512.hash(o.codec.bytes.toBits(t)),0,256)}function n(t,e){return[].concat(t,e>>24,e>>16&255,e>>8&255,255&e)}function i(t){if(this.secret=t,!this.secret)throw"Invalid secret."}var o=t.sjcl,s=r(58)({sjcl:t.sjcl}),a=r(59)({sjcl:t.sjcl}),c=r(60)({sjcl:t.sjcl}),u=r(61)({sjcl:t.sjcl});return i.prototype={getPrivateKey:function(){var t=this;return s.decode_base_check(33,t.secret)},getPrivateGenerator:function(t){var r=0;do privateGenerator=o.bn.fromBits(e(n(t,r))),r++;while(!o.ecc.curves.c256.r.greaterEquals(privateGenerator));return privateGenerator},getPublicGenerator:function(){var t=this.getPrivateKey(this.secret),e=this.getPrivateGenerator(t);return u.fromPrivateGenerator(e)},getPublicKey:function(t){var r,i=0;do r=o.bn.fromBits(e(n(n(t.toBytesCompressed(),0),i))),i++;while(!o.ecc.curves.c256.r.greaterEquals(r));return o.ecc.curves.c256.G.mult(r).toJac().add(t).toAffine()},getAddress:function(){var t=this.getPrivateKey(this.secret),e=this.getPrivateGenerator(t),r=u.fromPrivateGenerator(e).value,n=this.getPublicKey(r);return c.fromPublicKey(n)}},i.getRandom=function(){var t=a.getRandom().value;return new i(t)},i.generate=function(){var t=a.getRandom().value,e=new i(t);return{address:e.getAddress().value,secret:t}},i}},function(t,e,r){"use strict";e.decode=e.parse=r(71),e.encode=e.stringify=r(72)},function(t,e,r){(function(e,n){!function(){var i=("undefined"==typeof window?e:window)||{};_crypto=i.crypto||i.msCrypto||r(64),t.exports=function(t){if(_crypto.getRandomValues){var e=new n(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),r(41).Buffer)},function(t,e,r){(function(e){function n(t){return function(){var r=[],n={update:function(t,n){return e.isBuffer(t)||(t=new e(t,n)),r.push(t),this},digest:function(n){var i=e.concat(r),o=t(i);return r=null,n?o.toString(n):o}};return n}}var i=r(76),o=n(r(73)),s=n(r(78));t.exports=function(t){return"md5"===t?new o:"rmd160"===t?new s:i(t)}}).call(e,r(41).Buffer)},function(t,e,r){(function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);this._opad=c,this._alg=t;var s="sha512"===t?128:64;r=this._key=e.isBuffer(r)?r:new e(r),r.length>s?r=i(t).update(r).digest():r.length<s&&(r=e.concat([r,o],s));for(var a=this._ipad=new e(s),c=this._opad=new e(s),u=0;s>u;u++)a[u]=54^r[u],c[u]=92^r[u];this._hash=i(t).update(a)}var i=r(53),o=new e(128);o.fill(0),t.exports=n,n.prototype.update=function(t,e){return this._hash.update(t,e),this},n.prototype.digest=function(t){var e=this._hash.digest();return i(this._alg).update(this._opad).update(e).digest(t)}}).call(e,r(41).Buffer)},function(t,e,r){var n=r(77);t.exports=function(t,e){e=e||{};var r=n(t);return e.pbkdf2=r.pbkdf2,e.pbkdf2Sync=r.pbkdf2Sync,e}},function(t,e,r){var n;!function(i){"use strict";function o(t,e){var r,n,i,s,a,c,h=this;if(!(h instanceof o))return new o(t,e);if(t instanceof o){if(null==e)return T=0,h.s=t.s,h.e=t.e,void(h.c=(t=t.c)?t.slice():t);t+=""}else if(s="number"==(a=typeof t)){if(null==e&&t===~~t){for(h.s=0>1/t?(t=-t,-1):1,n=T=0,i=t;i>=10;i/=10,n++);return h.e=n,void(h.c=[t])}t=0===t&&0>1/t?"-0":t+""}else"string"!=a&&(t+="");if(a=t,null==e&&I.test(a))h.s=45===a.charCodeAt(0)?(a=a.slice(1),-1):1;else{if(10==e)return h=new o(a),l(h,v+h.e+1,y);if(a=R.call(a).replace(/^\+(?!-)/,""),h.s=45===a.charCodeAt(0)?(a=a.replace(/^-(?!-)/,""),-1):1,null!=e?e!=~~e&&E||(p=!(e>=2&&65>e))?(f(e,2),c=I.test(a)):(r="["+k.slice(0,e=0|e)+"]+",a=a.replace(/\.$/,"").replace(/^\./,"0."),(c=new RegExp("^"+r+"(?:\\."+r+")?$",37>e?"i":"").test(a))?(s&&(a.replace(/^0\.0*|\./,"").length>15&&f(t,0),s=!s),a=u(a,10,e,h.s)):"Infinity"!=a&&"NaN"!=a&&(f(t,1,e),t="NaN")):c=I.test(a),!c)return h.c=h.e=null,"Infinity"!=a&&("NaN"!=a&&f(t,3),h.s=null),void(T=0)}for((n=a.indexOf("."))>-1&&(a=a.replace(".","")),(i=a.search(/e/i))>0?(0>n&&(n=i),n+=+a.slice(i+1),a=a.substring(0,i)):0>n&&(n=a.length),i=0;48===a.charCodeAt(i);i++);for(e=a.length;48===a.charCodeAt(--e););if(a=a.slice(i,e+1))if(e=a.length,s&&e>15&&f(t,0),n=n-i-1,n>w)h.c=h.e=null;else if(b>n)h.c=[h.e=0];else{if(h.e=n,h.c=[],i=(n+1)%O,0>n&&(i+=O),e>i){for(i&&h.c.push(+a.slice(0,i)),e-=O;e>i;h.c.push(+a.slice(i,i+=O)));a=a.slice(i),i=O-a.length}else i-=e;for(;i--;a+="0");h.c.push(+a)}else h.c=[h.e=0];T=0}function s(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*O-1)>w?t.c=t.e=null:b>r?t.c=[t.e=0]:(t.e=r,t.c=e),t}function a(t){for(var e,r,n=1,i=t.length,o=t[0]+"";i>n;){for(e=t[n++]+"",r=O-e.length;r--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function c(t,e,r){for(var n,i,o=[0],s=0,a=t.length;a>s;){for(i=o.length;i--;o[i]*=e);for(o[n=0]+=k.indexOf(t.charAt(s++));n<o.length;n++)o[n]>r-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/r|0,o[n]%=r)}return o.reverse()}function u(t,e,r,n){var i,s,a,u,h,f,l,p=t.indexOf("."),d=y;for(37>r&&(t=t.toLowerCase()),p>=0&&(t=t.replace(".",""),l=new o(r),h=l.pow(t.length-p),l.c=c(h.toFixed(),10,e),l.e=l.c.length),f=c(t,r,e),s=a=f.length;0==f[--a];f.pop());if(!f[0])return"0";if(0>p?--s:(h.c=f,h.e=s,h.s=n,h=D(h,l,v,d,e),f=h.c,u=h.r,s=h.e),i=s+v+1,p=f[i],a=e/2,u=u||0>i||null!=f[i+1],u=4>d?(null!=p||u)&&(0==d||d==(h.s<0?3:2)):p>a||p==a&&(4==d||u||6==d&&1&f[i-1]||d==(h.s<0?8:7)),1>i||!f[0])f.length=1,a=0,u?(f[0]=1,s=-v):s=f[0]=0;else{if(f.length=i,u)for(--e;++f[--i]>e;)f[i]=0,i||(++s,f.unshift(1));for(a=f.length;!f[--a];);}for(p=0,t="";a>=p;t+=k.charAt(f[p++]));if(0>s){for(;++s;t="0"+t);t="0."+t}else if(p=t.length,++s>p)for(s-=p;s--;t+="0");else p>s&&(t=t.slice(0,s)+"."+t.slice(s));return t}function h(t,e,r){var n,i,s,c=(t=new o(t)).e;if(null==e?n=0:(l(t,++e,y),n=r?e:e+t.e-c,c=t.e),i=a(t.c),1==r||2==r&&(c>=e||g>=c)){for(;i.length<n;i+="0");i.length>1&&(i=i.charAt(0)+"."+i.slice(1)),i+=(0>c?"e":"e+")+c}else{if(r=i.length,0>c){for(s=n-r;++c;i="0"+i);i="0."+i}else if(++c>r){for(s=n-c,c-=r;c--;i+="0");s>0&&(i+=".")}else s=n-r,r>c?i=i.slice(0,c)+"."+i.slice(c):s>0&&(i+=".");if(s>0)for(;s--;i+="0");}return t.s<0&&t.c[0]?"-"+i:i}function f(t,e,r,n,i,o){if(E){var s,a=["new BigNumber","cmp","div","eq","gt","gte","lt","lte","minus","mod","plus","times","toFraction","divToInt"][T?0>T?-T:T:0>1/T?1:0]+"()",c=p?" out of range":" not a"+(i?" non-zero":"n")+" integer";throw c=([a+" number type has more than 15 significant digits",a+" not a base "+r+" number",a+" base"+c,a+" not a number"][e]||r+"() "+e+(o?" not a boolean or binary digit":c+(n?" or not ["+(p?" negative, positive":" integer, integer")+" ]":"")))+": "+t,p=T=0,s=new Error(c),s.name="BigNumber Error",s}}function l(t,e,r,n){var i,o,s,a,c,u,h,f,l=L;if(f=t.c){t:{for(i=1,a=f[0];a>=10;a/=10,i++);if(o=e-i,0>o)o+=O,s=e,c=f[u=0],h=c/l[i-s-1]%10|0;else if(u=Math.ceil((o+1)/O),u>=f.length){if(!n)break t;for(;f.length<=u;f.push(0));c=h=0,i=1,o%=O,s=o-O+1}else{for(c=a=f[u],i=1;a>=10;a/=10,i++);o%=O,s=o-O+i,h=0>s?0:c/l[i-s-1]%10|0}if(n=n||0>e||null!=f[u+1]||(0>s?c:c%l[i-s-1]),n=4>r?(h||n)&&(0==r||r==(t.s<0?3:2)):h>5||5==h&&(4==r||n||6==r&&(o>0?s>0?c/l[i-s]:0:f[u-1])%10&1||r==(t.s<0?8:7)),1>e||!f[0])return f.length=0,n?(e-=t.e+1,f[0]=l[e%O],t.e=-e||0):f[0]=t.e=0,t;if(0==o?(f.length=u,a=1,u--):(f.length=u+1,a=l[O-o],f[u]=s>0?j(c/l[i-s]%l[s])*a:0),n)for(;;){if(0==u){for(o=1,s=f[0];s>=10;s/=10,o++);for(s=f[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(t.e++,f[0]==C&&(f[0]=1));break}if(f[u]+=a,f[u]!=C)break;f[u--]=0,a=1}for(o=f.length;0===f[--o];f.pop());}t.e>w?t.c=t.e=null:t.e<b&&(t.c=[t.e=0])}return t}var p,d=1e9,_=1e6,v=20,y=4,g=-7,m=21,b=-d,w=d,E=!0,x=parseInt,S={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},A=o.prototype,k="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",T=0,j=Math.floor,I=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,R=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},C=1e14,O=14,B=1e7,L=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],N=new o(1);o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.config=function(){var t,e,r=0,n={},i=arguments,o=i[0],s="config",a=function(t,e,r){return!((p=e>t||t>r)||x(t)!=t&&0!==t)},c=o&&"object"==typeof o?function(){return o.hasOwnProperty(e)?null!=(t=o[e]):void 0}:function(){return i.length>r?null!=(t=i[r++]):void 0};if(c(e="DECIMAL_PLACES")&&(a(t,0,d)?v=0|t:f(t,e,s)),n[e]=v,c(e="ROUNDING_MODE")&&(a(t,0,8)?y=0|t:f(t,e,s)),n[e]=y,c(e="EXPONENTIAL_AT")&&(a(t,-d,d)?g=-(m=~~(0>t?-t:+t)):!p&&t&&a(t[0],-d,0)&&a(t[1],0,d)?(g=~~t[0],m=~~t[1]):f(t,e,s,1)),n[e]=[g,m],c(e="RANGE")&&(a(t,-d,d)&&~~t?b=-(w=~~(0>t?-t:+t)):!p&&t&&a(t[0],-d,-1)&&a(t[1],1,d)?(b=~~t[0],w=~~t[1]):f(t,e,s,1,1)),n[e]=[b,w],c(e="ERRORS")&&(t===!!t||1===t||0===t?(p=T=0,x=(E=!!t)?parseInt:parseFloat):f(t,e,s,0,0,1)),n[e]=E,c(e="FORMAT"))if("object"==typeof t)S=t;else if(E)throw n=new Error(s+"() "+e+" not an object: "+t),n.name="BigNumber Error",n;return n[e]=S,n};var D=function(){function t(t,e,r){var n,i,o,s,a=0,c=t.length,u=e%B,h=e/B|0;for(t=t.slice();c--;)o=t[c]%B,s=t[c]/B|0,n=h*o+s*u,i=u*o+n%B*B+a,a=(i/r|0)+(n/B|0)+h*s,t[c]=i%r;return a&&t.unshift(a),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;r>i;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.shift());}return function(n,i,s,a,c){var u,h,f,p,d,_,v,y,g,m,b,w,E,x,S,A,k,T=n.s==i.s?1:-1,I=n.c,R=i.c;if(!(I&&I[0]&&R&&R[0]))return new o(n.s&&i.s&&(I?!R||I[0]!=R[0]:R)?I&&0==I[0]||!R?0*T:T/0:0/0);for(y=new o(T),g=y.c=[],h=n.e-i.e,T=s+h+1,c||(c=C,x=n.e/O,f=0|x,h=(x>0||x===f?f:f-1)-(A=i.e/O,f=0|A,A>0||A===f?f:f-1),T=T/O|0),f=0;R[f]==(I[f]||0);f++);if(R[f]>(I[f]||0)&&h--,0>T)g.push(1),p=!0;else{for(x=I.length,A=R.length,f=0,T+=2,d=j(c/(R[0]+1)),d>1&&(R=t(R,d,c),I=t(I,d,c),A=R.length,x=I.length),E=A,m=I.slice(0,A),b=m.length;A>b;m[b++]=0);k=R.slice(),k.unshift(0),S=R[0],R[1]>=c/2&&S++;do d=0,u=e(R,m,A,b),0>u?(w=m[0],A!=b&&(w=w*c+(m[1]||0)),d=j(w/S),d>1?(d>=c&&(d=c-1),_=t(R,d,c),v=_.length,b=m.length,u=e(_,m,v,b),1==u&&(d--,r(_,v>A?k:R,v,c))):(0==d&&(u=d=1),_=R.slice()),v=_.length,b>v&&_.unshift(0),r(m,_,b,c),-1==u&&(b=m.length,u=e(R,m,A,b),1>u&&(d++,r(m,b>A?k:R,b,c))),b=m.length):0===u&&(d++,m=[0]),g[f++]=d,u&&m[0]?m[b++]=I[E]||0:(m=[I[E]],b=1);while((E++<x||null!=m[0])&&T--);p=null!=m[0],g[0]||g.shift()}if(c==C){for(f=1,T=g[0];T>=10;T/=10,f++);l(y,s+(y.e=f+h*O-1)+1,a,p)}else y.e=h,y.r=+p;return y}}();A.absoluteValue=A.abs=function(){var t=new o(this);return t.s<0&&(t.s=1),t},A.ceil=function(){return l(new o(this),this.e+1,2)},A.comparedTo=A.cmp=function(t,e){var r,n=this,i=n.c,s=(T=-T,t=new o(t,e)).c,a=n.s,c=t.s,u=n.e,h=t.e;if(!a||!c)return null;if(r=i&&!i[0],e=s&&!s[0],r||e)return r?e?0:-c:a;if(a!=c)return a;if(r=0>a,e=u==h,!i||!s)return e?0:!i^r?1:-1;if(!e)return u>h^r?1:-1;for(a=-1,c=(u=i.length)<(h=s.length)?u:h;++a<c;)if(i[a]!=s[a])return i[a]>s[a]^r?1:-1;return u==h?0:u>h^r?1:-1},A.decimalPlaces=A.dp=function(){var t,e,r=this.c;if(!r)return null;if(t=((e=r.length-1)-j(this.e/O))*O,e=r[e])for(;e%10==0;e/=10,t--);return 0>t&&(t=0),t},A.dividedBy=A.div=function(t,e){return T=2,D(this,new o(t,e),v,y)},A.dividedToIntegerBy=A.divToInt=function(t,e){return T=13,D(this,new o(t,e),0,1)},A.equals=A.eq=function(t,e){return T=3,0===this.cmp(t,e)},A.floor=function(){return l(new o(this),this.e+1,3)},A.greaterThan=A.gt=function(t,e){return T=4,this.cmp(t,e)>0},A.greaterThanOrEqualTo=A.gte=function(t,e){return T=5,1==(e=this.cmp(t,e))||0===e},A.isFinite=function(){return!!this.c},A.isInteger=A.isInt=function(){return!!this.c&&j(this.e/O)>this.c.length-2},A.isNaN=function(){return!this.s},A.isNegative=A.isNeg=function(){return this.s<0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.lessThan=A.lt=function(t,e){return T=6,this.cmp(t,e)<0},A.lessThanOrEqualTo=A.lte=function(t,e){return T=7,-1==(e=this.cmp(t,e))||0===e},A.minus=function(t,e){var r,n,i,a,c=this,u=c.s;if(T=8,t=new o(t,e),e=t.s,!u||!e)return new o(0/0);if(u!=e)return t.s=-e,c.plus(t);var h=c.e/O,f=t.e/O,l=c.c,p=t.c;if(!h||!f){if(!l||!p)return l?(t.s=-e,t):new o(p?c:0/0);if(!l[0]||!p[0])return p[0]?(t.s=-e,t):new o(l[0]?c:3==y?-0:0)}if(r=0|h,h=h>0||h===r?r:r-1,r=0|f,f=f>0||f===r?r:r-1,l=l.slice(),u=h-f){for((a=0>u)?(u=-u,i=l):(f=h,i=p),i.reverse(),e=u;e--;i.push(0));i.reverse()}else for(n=(a=(u=l.length)<(e=p.length))?u:e,u=e=0;n>e;e++)if(l[e]!=p[e]){a=l[e]<p[e];break}if(a&&(i=l,l=p,p=i,t.s=-t.s),e=(n=p.length)-(r=l.length),e>0)for(;e--;l[r++]=0);for(e=C-1;n>u;){if(l[--n]<p[n]){for(r=n;r&&!l[--r];l[r]=e);--l[r],l[n]+=C}l[n]-=p[n]}for(;0==l[0];l.shift(),--f);return l[0]?s(t,l,f):(t.s=3==y?-1:1,t.c=[t.e=0],t)},A.modulo=A.mod=function(t,e){T=9;var r=this,n=r.c,i=(t=new o(t,e)).c,s=r.s,a=t.s;return e=!s||!a||i&&!i[0],e||n&&!n[0]?new o(e?0/0:r):(r.s=t.s=1,e=1==t.cmp(r),r.s=s,t.s=a,e?new o(r):r.minus(D(r,t,0,1).times(t)))},A.negated=A.neg=function(){var t=new o(this);return t.s=-t.s||null,t},A.plus=function(t,e){var r,n=this,i=n.s;if(T=10,t=new o(t,e),e=t.s,!i||!e)return new o(0/0);if(i!=e)return t.s=-e,n.minus(t);var a=n.e/O,c=t.e/O,u=n.c,h=t.c;if(!a||!c){if(!u||!h)return new o(i/0);if(!u[0]||!h[0])return h[0]?t:new o(u[0]?n:0*i)}if(i=0|a,a=a>0||a===i?i:i-1,i=0|c,c=c>0||c===i?i:i-1,u=u.slice(),i=a-c){for(i>0?(c=a,r=h):(i=-i,r=u),r.reverse();i--;r.push(0));r.reverse()}for(i=u.length,e=h.length,0>i-e&&(r=h,h=u,u=r,e=i),i=0;e;)i=(u[--e]=u[e]+h[e]+i)/C|0,u[e]%=C;return i&&(u.unshift(i),++c),s(t,u,c)},A.round=function(t,e){return t=null==t||((p=0>t||t>d)||x(t)!=t)&&!f(t,"decimal places","round")?0:0|t,e=null==e||((p=0>e||e>8)||x(e)!=e&&0!==e)&&!f(e,"mode","round")?y:0|e,l(new o(this),t+this.e+1,e)},A.squareRoot=A.sqrt=function(){var t,e,r,n,i,s=this,c=s.c,u=s.s,h=s.e,f=v+4,p=new o("0.5");if(1!==u||!c||!c[0])return new o(!u||0>u&&(!c||c[0])?0/0:c?s:1/0);if(u=Math.sqrt(+s),0==u||u==1/0?(e=a(c),(e.length+h)%2==0&&(e+="0"),u=Math.sqrt(e),h=j((h+1)/2)-(0>h||h%2),u==1/0?e="1e"+h:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+h),r=new o(e)):r=new o(u.toString()),r.c[0])for(h=r.e,u=h+f,3>u&&(u=0);;)if(i=r,r=p.times(i.plus(D(s,i,f,1))),a(i.c).slice(0,u)===(e=a(r.c)).slice(0,u)){if(r.e<h&&--u,e=e.slice(u-3,u+1),"9999"!=e&&(n||"4999"!=e)){(!+e||!+e.slice(1)&&"5"==e.charAt(0))&&(l(r,r.e+v+2,1),t=!r.times(r).eq(s));break}if(!n&&(l(i,i.e+v+2,0),i.times(i).eq(s))){r=i;break}f+=4,u+=4,n=1}return l(r,r.e+v+1,y,t)},A.times=function(t,e){var r,n,i,a,c,u,h,f,l,p=this,d=p.c,_=(T=11,t=new o(t,e)).c,v=p.e/O,y=t.e/O,g=p.s;if(t.s=g==(e=t.s)?1:-1,!((v||d&&d[0])&&(y||_&&_[0])))return new o(!g||!e||d&&!d[0]&&!_||_&&!_[0]&&!d?0/0:d&&_?0*t.s:t.s/0);for(n=0|v,n=(v>0||v===n?n:n-1)+(n=0|y,y>0||y===n?n:n-1),g=d.length,e=_.length,e>g&&(c=d,d=_,_=c,y=g,g=e,e=y),y=g+e,c=[];y--;c.push(0));for(v=e;--v>=0;){for(r=0,y=g+v,i=g,f=_[v]%B,l=_[v]/B|0;y>v;)u=d[--i]%B,h=d[i]/B|0,a=l*u+h*f,u=f*u+a%B*B+c[y]+r,r=(u/C|0)+(a/B|0)+l*h,c[y--]=u%C;c[y]=r}return r?++n:c.shift(),s(t,c,n)},A.toExponential=function(t){var e=this;return e.c?h(e,null==t||((p=0>t||t>d)||x(t)!=t&&0!==t)&&!f(t,"decimal places","toExponential")?null:0|t,1):e.toString()},A.toFixed=function(t){var e,r=this,n=g,i=m;return t=null==t||((p=0>t||t>d)||x(t)!=t&&0!==t)&&!f(t,"decimal places","toFixed")?null:r.e+(0|t),g=-(m=1/0),null!=t&&r.c?(e=h(r,t),r.s<0&&r.c&&(r.c[0]?e.indexOf("-")<0&&(e="-"+e):e=e.replace("-",""))):e=r.toString(),g=n,m=i,e},A.toFormat=function(t){var e=this;if(!e.c)return e.toString();var r,n=e.s<0,i=S.groupSeparator,o=+S.groupSize,s=+S.secondaryGroupSize,a=e.toFixed(t).split("."),c=a[0],u=a[1],h=n?c.slice(1):c,f=h.length;if(s&&(r=o,o=s,s=r,f-=r),o>0&&f>0){for(r=f%o||o,c=h.substr(0,r);f>r;r+=o)c+=i+h.substr(r,o);s>0&&(c+=i+h.slice(r)),n&&(c="-"+c)}return u?c+S.decimalSeparator+((s=+S.fractionGroupSize)?u.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+S.fractionGroupSeparator):u):c},A.toFraction=function(t){var e,r,n,i,s,c,u,h,l,d=r=new o(N),_=u=new o(N),v=this,g=v.c,m=new o(N);if(!g)return v.toString();for(l=a(g),i=m.e=l.length-v.e-1,m.c[0]=L[(s=i%O)<0?O+s:s],(null==t||(!(T=12,c=new o(t)).s||(p=c.cmp(d)<0||!c.c)||E&&j(c.e/O)<c.c.length-1)&&!f(t,"max denominator","toFraction")||(t=c).cmp(m)>0)&&(t=i>0?m:d),s=w,w=1/0,c=new o(l),u.c[0]=0;h=D(c,m,0,1),n=r.plus(h.times(_)),1!=n.cmp(t);)r=_,_=n,d=u.plus(h.times(n=d)),u=n,m=c.minus(h.times(n=m)),c=n;return n=D(t.minus(r),_,0,1),u=u.plus(n.times(d)),r=r.plus(n.times(_)),u.s=d.s=v.s,i*=2,e=D(d,_,i,y).minus(v).abs().cmp(D(u,r,i,y).minus(v).abs())<1?[d.toString(),_.toString()]:[u.toString(),r.toString()],w=s,e},A.toNumber=function(){var t=this;return+t||(t.s?0*t.s:0/0)},A.toPower=A.pow=function(t){var e=0*t==0?~~t:t,r=new o(this),n=new o(N);if(((p=-_>t||t>_)&&(e=1*t/0)||x(t)!=t&&0!==t&&!(e=0/0))&&!f(t,"exponent","pow")||!e)return new o(Math.pow(+r,e));for(e=0>e?-e:e;1&e&&(n=n.times(r)),e>>=1,e;)r=r.times(r);return 0>t?N.div(n):n},A.toPrecision=function(t){var e=this;return null!=t&&(!(p=1>t||t>d)&&x(t)==t||f(t,"precision","toPrecision"))&&e.c?h(e,0|--t,2):e.toString()},A.toString=function(t){var e,r,n,i=this,o=i.e;if(null===o)r=i.s?"Infinity":"NaN";else{if(t==e&&(g>=o||o>=m))return h(i,e,1);if(r=a(i.c),0>o){for(;++o;r="0"+r);r="0."+r}else if(n=r.length,o>0)if(++o>n)for(o-=n;o--;r+="0");else n>o&&(r=r.slice(0,o)+"."+r.slice(o));else if(e=r.charAt(0),n>1)r=e+"."+r.slice(1);else if("0"==e)return e;if(null!=t)if((p=!(t>=2&&65>t))||t!=~~t&&E)f(t,"base","toS");else if(r=u(r,0|t,10,i.s),"0"==r)return r}return i.s<0?"-"+r:r},A.valueOf=A.toJSON=function(){return this.toString()},"undefined"!=typeof t&&t.exports?t.exports=o:(n=function(){return o}.call(e,r,e,t),!(void 0!==n&&(t.exports=n)))}(this)},function(t){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t){t.exports=function(t){var e=t.sjcl,r=function(){var t={ripple:"rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz",bitcoin:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"},n=function(t){return e.codec.bytes.fromBits(e.hash.sha256.hash(e.codec.bytes.toBits(t)))};return{encode_base:function(r,n){for(var i=t[n||"ripple"],o=new e.bn(i.length),s=e.bn.fromBits(e.codec.bytes.toBits(r)),a=[];s.greaterEquals(o);){var c=s.mod(o);a.push(i[c.limbs[0]]),s=s.div(o)}a.push(i[s.limbs[0]]);for(var u=0;u!=r.length&&!r[u];u+=1)a.push(i[0]);return a.reverse().join("")},decode_base:function(r,n){for(var i,o=t[n||"ripple"],s=new e.bn(o.length),a=new e.bn(0);i!=r.length&&r[i]===o[0];)i+=1;for(i=0;i!=r.length;i+=1){var c=o.indexOf(r[i]);
if(0>c)return null;a=a.mul(s).addM(c)}for(var u=e.codec.bytes.fromBits(a.toBits()).reverse();0===u[u.length-1];)u.pop();for(i=0;r[i]===o[0];i++)u.push(0);return u.reverse(),u},encode_base_check:function(t,e,i){var o=[].concat(t,e),s=n(n(o)).slice(0,4);return r.encode_base([].concat(o,s),i)},decode_base_check:function(t,e,i){var o=r.decode_base(e,i);if(!o||o[0]!==t||o.length<5)return 0/0;var s,a=n(n(o.slice(0,-4))).slice(0,4),c=o.slice(-4);for(s=0;4!=s;s+=1)if(a[s]!==c[s])return 0/0;return o.slice(1,-4)}}}();return r}},function(t,e,r){t.exports=function(t){function e(t){this.value=t}var n=t.sjcl,i=r(58)({sjcl:n});return e.fromBytes=function(t){return new e(i.encode_base_check(33,t))},e.getRandom=function(){for(var t=0;8>t;t++)n.random.addEntropy(Math.random(),32,"Math.random()");var r=n.codec.bytes.fromBits(n.random.randomWords(4));return e.fromBytes(r)},e}},function(t,e,r){t.exports=function(t){function e(t){return i.hash.ripemd160.hash(i.hash.sha256.hash(t))}function n(t){this.value=t}var i=t.sjcl,o=r(58)({sjcl:i});return n.fromPublicKey=function(t){var r=i.codec.bytes.fromBits(e(i.codec.bytes.toBits(t.toBytesCompressed())));return new this(o.encode_base_check(0,r))},n}},function(t){t.exports=function(t){function e(t){if(!(t instanceof r.ecc.point))throw new Error("eccPoint must be a sjcl.ecc.point");this.value=t}var r=t.sjcl;return e.fromPrivateGenerator=function(t){return new this(r.ecc.curves.c256.G.mult(t))},e.prototype={toString:function(){return this.value.toString()}},e}},function(t,e,r){var n;(function(t,i){!function(o){function s(t){throw RangeError(O[t])}function a(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function c(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(C,".");var i=t.split("."),o=a(i,e).join(".");return n+o}function u(t){for(var e,r,n=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function h(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function f(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function l(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,r){var n=0;for(t=r?L(t/A):t>>1,t+=L(t/e);t>B*x>>1;n+=w)t=L(t/B);return L(n+(B+1)*t/(t+S))}function d(t){var e,r,n,i,o,a,c,u,l,d,_=[],v=t.length,y=0,g=T,m=k;for(r=t.lastIndexOf(j),0>r&&(r=0),n=0;r>n;++n)t.charCodeAt(n)>=128&&s("not-basic"),_.push(t.charCodeAt(n));for(i=r>0?r+1:0;v>i;){for(o=y,a=1,c=w;i>=v&&s("invalid-input"),u=f(t.charCodeAt(i++)),(u>=w||u>L((b-y)/a))&&s("overflow"),y+=u*a,l=m>=c?E:c>=m+x?x:c-m,!(l>u);c+=w)d=w-l,a>L(b/d)&&s("overflow"),a*=d;e=_.length+1,m=p(y-o,e,0==o),L(y/e)>b-g&&s("overflow"),g+=L(y/e),y%=e,_.splice(y++,0,g)}return h(_)}function _(t){var e,r,n,i,o,a,c,h,f,d,_,v,y,g,m,S=[];for(t=u(t),v=t.length,e=T,r=0,o=k,a=0;v>a;++a)_=t[a],128>_&&S.push(N(_));for(n=i=S.length,i&&S.push(j);v>n;){for(c=b,a=0;v>a;++a)_=t[a],_>=e&&c>_&&(c=_);for(y=n+1,c-e>L((b-r)/y)&&s("overflow"),r+=(c-e)*y,e=c,a=0;v>a;++a)if(_=t[a],e>_&&++r>b&&s("overflow"),_==e){for(h=r,f=w;d=o>=f?E:f>=o+x?x:f-o,!(d>h);f+=w)m=h-d,g=w-d,S.push(N(l(d+m%g,0))),h=L(m/g);S.push(N(l(h,0))),o=p(r,y,n==i),r=0,++n}++r,++e}return S.join("")}function v(t){return c(t,function(t){return I.test(t)?d(t.slice(4).toLowerCase()):t})}function y(t){return c(t,function(t){return R.test(t)?"xn--"+_(t):t})}var g=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);(g.global===g||g.window===g||g.self===g)&&(o=g);var m,b=2147483647,w=36,E=1,x=26,S=38,A=700,k=72,T=128,j="-",I=/^xn--/,R=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=w-E,L=Math.floor,N=String.fromCharCode;m={version:"1.3.2",ucs2:{decode:u,encode:h},decode:d,encode:_,toASCII:y,toUnicode:v},n=function(){return m}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(68)(t),function(){return this}())},function(t){function e(){}var r=t.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var n=[];if(e){var i=document.createElement("div"),o=new MutationObserver(function(){var t=n.slice();n.length=0,t.forEach(function(t){t()})});return o.observe(i,{attributes:!0}),function(t){n.length||i.setAttribute("yes","no"),n.push(t)}}return r?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=e,r.addListener=e,r.once=e,r.off=e,r.removeListener=e,r.removeAllListeners=e,r.emit=e,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},function(){},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,f=r?i-1:0,l=r?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+f],f+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+f],f+=l,h-=8);if(0===o)o=1-u;else{if(o===c)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,f=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,_=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+f>=1?l/c:l*Math.pow(2,1-f),e*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(e*c-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+p]=255&s,p+=d,s/=256,u-=8);t[r+p-d]|=128*_}},function(t){var e=Array.isArray,r=Object.prototype.toString;t.exports=e||function(t){return!!t&&"[object Array]"==r.call(t)}},function(t,e,r){function n(){}function i(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(){if(y.XMLHttpRequest&&("file:"!=y.location.protocol||!y.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function s(t){return t===Object(t)}function a(t){if(!s(t))return t;var e=[];for(var r in t)null!=t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}function c(t){for(var e,r,n={},i=t.split("&"),o=0,s=i.length;s>o;++o)r=i[o],e=r.split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return n}function u(t){var e,r,n,i,o=t.split(/\r?\n/),s={};o.pop();for(var a=0,c=o.length;c>a;++a)r=o[a],e=r.indexOf(":"),n=r.slice(0,e).toLowerCase(),i=g(r.slice(e+1)),s[n]=i;return s}function h(t){return t.split(/ *; */).shift()}function f(t){return v(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),n=r.shift(),i=r.shift();return n&&i&&(t[n]=i),t},{})}function l(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function p(t,e){var r=this;_.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var e=new l(r);"HEAD"==t&&(e.text=null),r.callback(null,e)})}function d(t,e){return"function"==typeof e?new p("GET",t).end(e):1==arguments.length?new p("GET",t):new p(t,e)}var _=r(83),v=r(88),y="undefined"==typeof window?this:window,g="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=a,d.parseString=c,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":c,"application/json":JSON.parse},l.prototype.get=function(t){return this.header[t.toLowerCase()]},l.prototype.setHeaderProperties=function(){var t=this.header["content-type"]||"";this.type=h(t);var e=f(t);for(var r in e)this[r]=e[r]},l.prototype.parseBody=function(t){var e=d.parse[this.type];return e?e(t):null},l.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},l.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,n="cannot "+e+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=e,i.url=r,i},d.Response=l,_(p.prototype),p.prototype.use=function(t){return t(this),this},p.prototype.timeout=function(t){return this._timeout=t,this},p.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.set=function(t,e){if(s(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},p.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},p.prototype.type=function(t){return this.set("Content-Type",d.types[t]||t),this},p.prototype.accept=function(t){return this.set("Accept",d.types[t]||t),this},p.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},p.prototype.query=function(t){return"string"!=typeof t&&(t=a(t)),t&&this._query.push(t),this},p.prototype.field=function(t,e){return this._formData||(this._formData=new FormData),this._formData.append(t,e),this},p.prototype.attach=function(t,e,r){return this._formData||(this._formData=new FormData),this._formData.append(t,e,r),this},p.prototype.send=function(t){var e=s(t),r=this.getHeader("Content-Type");if(e&&s(this._data))for(var n in t)this._data[n]=t[n];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return e?(r||this.type("json"),this):this},p.prototype.callback=function(t,e){var r=this._callback;return 2==r.length?r(t,e):t?this.emit("error",t):void r(e)},p.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},p.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(t){var e=this,r=this.xhr=o(),s=this._query.join("&"),a=this._timeout,c=this._formData||this._data;if(this._callback=t||n,r.onreadystatechange=function(){return 4==r.readyState?0==r.status?e.aborted?e.timeoutError():e.crossDomainError():void e.emit("end"):void 0},r.upload&&(r.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,e.emit("progress",t)}),a&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},a)),s&&(s=d.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof c&&!i(c)){var u=d.serialize[this.getHeader("Content-Type")];u&&(c=u(c))}for(var h in this.header)null!=this.header[h]&&r.setRequestHeader(h,this.header[h]);return this.emit("request",this),r.send(c),this},d.Request=p,d.get=function(t,e,r){var n=d("GET",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},d.head=function(t,e,r){var n=d("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},d.del=function(t,e){var r=d("DELETE",t);return e&&r.end(e),r},d.patch=function(t,e,r){var n=d("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},d.post=function(t,e,r){var n=d("POST",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},d.put=function(t,e,r){var n=d("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},t.exports=d},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){t.exports=function(t,e){function n(){return Object.keys(s)}e=e||{};var i=r(79)(t);e.createCipher=i.createCipher,e.createCipheriv=i.createCipheriv;var o=r(80)(t);e.createDecipher=o.createDecipher,e.createDecipheriv=o.createDecipheriv;var s=r(81);e.listCiphers=n}},function(t,e,r){(function(t,n){var i=r(89).nextTick,o=Array.prototype.slice,s={},a=0;"undefined"!=typeof setTimeout&&(e.setTimeout=function(){return setTimeout.apply(window,arguments)}),"undefined"!=typeof clearTimeout&&(e.clearTimeout=function(){clearTimeout.apply(window,arguments)}),"undefined"!=typeof setInterval&&(e.setInterval=function(){return setInterval.apply(window,arguments)}),"undefined"!=typeof clearInterval&&(e.clearInterval=function(){clearInterval.apply(window,arguments)}),e.enroll=function(t,e){t._timeoutID=setTimeout(t._onTimeout,e)},e.unenroll=function(t){clearTimeout(t._timeoutID)},e.active=function(){},e.setImmediate="function"==typeof t?t:function(t){var r=a++,n=arguments.length<2?!1:o.call(arguments,1);return s[r]=!0,i(function(){s[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete s[t]}}).call(e,r(70).setImmediate,r(70).clearImmediate)},function(t){"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,i,o){n=n||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(n);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var h=0;u>h;++h){var f,l,p,d,_=t[h].replace(a,"%20"),v=_.indexOf(i);v>=0?(f=_.substr(0,v),l=_.substr(v+1)):(f=_,l=""),p=decodeURIComponent(f),d=decodeURIComponent(l),e(s,p)?r(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t){"use strict";function e(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,o,s,a){return o=o||"&",s=s||"=",null===t&&(t=void 0),"object"==typeof t?e(i(t),function(i){var a=encodeURIComponent(r(i))+s;return n(t[i])?e(t[i],function(t){return a+encodeURIComponent(r(t))}).join(o):a+encodeURIComponent(r(t[i]))}).join(o):a?encodeURIComponent(r(a))+s+encodeURIComponent(r(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){function n(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var r=1732584193,n=-271733879,i=-1732584194,h=271733878,f=0;f<t.length;f+=16){var l=r,p=n,d=i,_=h;r=o(r,n,i,h,t[f+0],7,-680876936),h=o(h,r,n,i,t[f+1],12,-389564586),i=o(i,h,r,n,t[f+2],17,606105819),n=o(n,i,h,r,t[f+3],22,-1044525330),r=o(r,n,i,h,t[f+4],7,-176418897),h=o(h,r,n,i,t[f+5],12,1200080426),i=o(i,h,r,n,t[f+6],17,-1473231341),n=o(n,i,h,r,t[f+7],22,-45705983),r=o(r,n,i,h,t[f+8],7,1770035416),h=o(h,r,n,i,t[f+9],12,-1958414417),i=o(i,h,r,n,t[f+10],17,-42063),n=o(n,i,h,r,t[f+11],22,-1990404162),r=o(r,n,i,h,t[f+12],7,1804603682),h=o(h,r,n,i,t[f+13],12,-40341101),i=o(i,h,r,n,t[f+14],17,-1502002290),n=o(n,i,h,r,t[f+15],22,1236535329),r=s(r,n,i,h,t[f+1],5,-165796510),h=s(h,r,n,i,t[f+6],9,-1069501632),i=s(i,h,r,n,t[f+11],14,643717713),n=s(n,i,h,r,t[f+0],20,-373897302),r=s(r,n,i,h,t[f+5],5,-701558691),h=s(h,r,n,i,t[f+10],9,38016083),i=s(i,h,r,n,t[f+15],14,-660478335),n=s(n,i,h,r,t[f+4],20,-405537848),r=s(r,n,i,h,t[f+9],5,568446438),h=s(h,r,n,i,t[f+14],9,-1019803690),i=s(i,h,r,n,t[f+3],14,-187363961),n=s(n,i,h,r,t[f+8],20,1163531501),r=s(r,n,i,h,t[f+13],5,-1444681467),h=s(h,r,n,i,t[f+2],9,-51403784),i=s(i,h,r,n,t[f+7],14,1735328473),n=s(n,i,h,r,t[f+12],20,-1926607734),r=a(r,n,i,h,t[f+5],4,-378558),h=a(h,r,n,i,t[f+8],11,-2022574463),i=a(i,h,r,n,t[f+11],16,1839030562),n=a(n,i,h,r,t[f+14],23,-35309556),r=a(r,n,i,h,t[f+1],4,-1530992060),h=a(h,r,n,i,t[f+4],11,1272893353),i=a(i,h,r,n,t[f+7],16,-155497632),n=a(n,i,h,r,t[f+10],23,-1094730640),r=a(r,n,i,h,t[f+13],4,681279174),h=a(h,r,n,i,t[f+0],11,-358537222),i=a(i,h,r,n,t[f+3],16,-722521979),n=a(n,i,h,r,t[f+6],23,76029189),r=a(r,n,i,h,t[f+9],4,-640364487),h=a(h,r,n,i,t[f+12],11,-421815835),i=a(i,h,r,n,t[f+15],16,530742520),n=a(n,i,h,r,t[f+2],23,-995338651),r=c(r,n,i,h,t[f+0],6,-198630844),h=c(h,r,n,i,t[f+7],10,1126891415),i=c(i,h,r,n,t[f+14],15,-1416354905),n=c(n,i,h,r,t[f+5],21,-57434055),r=c(r,n,i,h,t[f+12],6,1700485571),h=c(h,r,n,i,t[f+3],10,-1894986606),i=c(i,h,r,n,t[f+10],15,-1051523),n=c(n,i,h,r,t[f+1],21,-2054922799),r=c(r,n,i,h,t[f+8],6,1873313359),h=c(h,r,n,i,t[f+15],10,-30611744),i=c(i,h,r,n,t[f+6],15,-1560198380),n=c(n,i,h,r,t[f+13],21,1309151649),r=c(r,n,i,h,t[f+4],6,-145523070),h=c(h,r,n,i,t[f+11],10,-1120210379),i=c(i,h,r,n,t[f+2],15,718787259),n=c(n,i,h,r,t[f+9],21,-343485551),r=u(r,l),n=u(n,p),i=u(i,d),h=u(h,_)}return Array(r,n,i,h)}function i(t,e,r,n,i,o){return u(h(u(u(e,t),u(n,o)),i),r)}function o(t,e,r,n,o,s,a){return i(e&r|~e&n,t,e,o,s,a)}function s(t,e,r,n,o,s,a){return i(e&n|r&~n,t,e,o,s,a)}function a(t,e,r,n,o,s,a){return i(e^r^n,t,e,o,s,a)}function c(t,e,r,n,o,s,a){return i(r^(e|~n),t,e,o,s,a)}function u(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r}function h(t,e){return t<<e|t>>>32-e}var f=r(82);t.exports=function(t){return f.hash(t,n,16)}},function(t,e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s?62:e===a?63:c>e?-1:c+10>e?e-c+26+26:h+26>e?e-h:u+26>e?e-u+26:void 0}function n(t){function r(t){u[f++]=t}var n,i,s,a,c,u;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=t.length;c="="===t.charAt(h-2)?2:"="===t.charAt(h-1)?1:0,u=new o(3*t.length/4-c),s=c>0?t.length-4:t.length;var f=0;for(n=0,i=0;s>n;n+=4,i+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===c?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&a)):1===c&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(a>>8&255),r(255&a)),u}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,c="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],c+=n(o);switch(a){case 1:o=t[t.length-1],c+=e(o>>2),c+=e(o<<4&63),c+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],c+=e(o>>10),c+=e(o>>4&63),c+=e(o<<2&63),c+="="}return c}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),h="A".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}(e)},function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){var e=t.exports=function(t){var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r},n=r(41).Buffer,i=r(84)(n);e.sha1=r(85)(n,i),e.sha256=r(86)(n,i),e.sha512=r(87)(n,i)},function(t,e,r){(function(e){t.exports=function(t){function r(t,e,r,i,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=n(t,e,r,i,o)}catch(c){return s(c)}s(void 0,a)})}function n(r,n,i,o,s){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(0>i)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(0>o)throw new TypeError("Bad key length");s=s||"sha1",e.isBuffer(r)||(r=new e(r)),e.isBuffer(n)||(n=new e(n));var a,c,u,h=1,f=new e(o),l=new e(n.length+4);n.copy(l,0,0,n.length);for(var p=1;h>=p;p++){l.writeUInt32BE(p,n.length);var d=t.createHmac(s,r).update(l).digest();if(!a&&(a=d.length,u=new e(a),h=Math.ceil(o/a),c=o-(h-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");d.copy(u,0,0,a);for(var _=1;i>_;_++){d=t.createHmac(s,r).update(d).digest();for(var v=0;a>v;v++)u[v]^=d[v]}var y=(p-1)*a,g=p==h?c:a;u.copy(f,y,0,g)}return f}return{pbkdf2:r,pbkdf2Sync:n}}}).call(e,r(41).Buffer)},function(t,e,r){(function(e){function r(t,e,r){return t^e^r}function n(t,e,r){return t&e|~t&r}function i(t,e,r){return(t|~e)^r}function o(t,e,r){return t&r|e&~r}function s(t,e,r){return t^(e|~r)}function a(t,e){return t<<e|t>>>32-e}function c(t){var r=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var n=_(t),i=8*t.length,o=8*t.length;n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var s=0;s<n.length;s+=16)y(r,n,s);for(var s=0;5>s;s++){var a=r[s];r[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var c=v(r);return new e(c)}t.exports=c;var u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0],_=function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},v=function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},y=function(t,e,c){for(var _=0;16>_;_++){var v=c+_,y=e[v];e[v]=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8)}var g,m,b,w,E,x,S,A,k,T;x=g=t[0],S=m=t[1],A=b=t[2],k=w=t[3],T=E=t[4];for(var j,_=0;80>_;_+=1)j=g+e[c+u[_]]|0,j+=16>_?r(m,b,w)+p[0]:32>_?n(m,b,w)+p[1]:48>_?i(m,b,w)+p[2]:64>_?o(m,b,w)+p[3]:s(m,b,w)+p[4],j=0|j,j=a(j,f[_]),j=j+E|0,g=E,E=w,w=a(b,10),b=m,m=j,j=x+e[c+h[_]]|0,j+=16>_?s(S,A,k)+d[0]:32>_?o(S,A,k)+d[1]:48>_?i(S,A,k)+d[2]:64>_?n(S,A,k)+d[3]:r(S,A,k)+d[4],j=0|j,j=a(j,l[_]),j=j+T|0,x=T,T=k,k=a(A,10),A=S,S=j;j=t[1]+b+k|0,t[1]=t[2]+w+T|0,t[2]=t[3]+E+x|0,t[3]=t[4]+g+S|0,t[4]=t[0]+m+A|0,t[0]=j}}).call(e,r(41).Buffer)},function(t,e,r){(function(e){function n(t,r,a){return this instanceof n?(s.call(this),this._cache=new i,this._cipher=new o.AES(r),this._prev=new e(a.length),a.copy(this._prev),void(this._mode=t)):new n(t,r,a)}function i(){return this instanceof i?void(this.cache=new e("")):new i}var o=r(90),s=r(91),a=r(99),c=r(81),u=r(93),h=r(92);a(n,s),n.prototype._transform=function(t,e,r){this._cache.add(t);for(var n,i;n=this._cache.get();)i=this._mode.encrypt(this,n),this.push(i);r()},n.prototype._flush=function(t){var e=this._cache.flush();this.push(this._mode.encrypt(this,e)),this._cipher.scrub(),t()},i.prototype.add=function(t){this.cache=e.concat([this.cache,t])},i.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},i.prototype.flush=function(){for(var t=16-this.cache.length,r=new e(t),n=-1;++n<t;)r.writeUInt8(t,n);var i=e.concat([this.cache,r]);return i};var f={ECB:r(94),CBC:r(95),CFB:r(96),OFB:r(97),CTR:r(98)};t.exports=function(t){function r(t,r,i){var o=c[t];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new e(i)),"string"==typeof r&&(r=new e(r)),r.length!==o.key/8)throw new TypeError("invalid key length "+r.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new h(f[o.mode],r,i):new n(f[o.mode],r,i)}function i(e,n){var i=c[e];if(!i)throw new TypeError("invalid suite type");var o=u(t,n,i.key,i.iv);return r(e,o.key,o.iv)}return{createCipher:i,createCipheriv:r}}}).call(e,r(41).Buffer)},function(t,e,r){(function(e){function n(t,r,o){return this instanceof n?(a.call(this),this._cache=new i,this._last=void 0,this._cipher=new s.AES(r),this._prev=new e(o.length),o.copy(this._prev),void(this._mode=t)):new n(t,r,o)}function i(){return this instanceof i?void(this.cache=new e("")):new i}function o(t){var e=t[15];if(16!==e)return t.slice(0,16-e)}var s=r(90),a=r(91),c=r(99),u=r(81),h=r(92),f=r(93);c(n,a),n.prototype._transform=function(t,e,r){this._cache.add(t);for(var n,i;n=this._cache.get();)i=this._mode.decrypt(this,n),this.push(i);r()},n.prototype._flush=function(t){var e=this._cache.flush();return e?(this.push(o(this._mode.decrypt(this,e))),void t()):t},i.prototype.add=function(t){this.cache=e.concat([this.cache,t])},i.prototype.get=function(){if(this.cache.length>16){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},i.prototype.flush=function(){return this.cache.length?this.cache:void 0};var l={ECB:r(94),CBC:r(95),CFB:r(96),OFB:r(97),CTR:r(98)};t.exports=function(t){function r(t,r,i){var o=u[t];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new e(i)),"string"==typeof r&&(r=new e(r)),r.length!==o.key/8)throw new TypeError("invalid key length "+r.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new h(l[o.mode],r,i,!0):new n(l[o.mode],r,i)}function i(e,n){var i=u[e];if(!i)throw new TypeError("invalid suite type");var o=f(t,n,i.key,i.iv);return r(e,o.key,o.iv)}return{createDecipher:i,createDecipheriv:r}}}).call(e,r(41).Buffer)},function(t,e){e["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},e["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},e["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},e["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},e["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},e["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},e.aes128=e["aes-128-cbc"],e.aes192=e["aes-192-cbc"],e.aes256=e["aes-256-cbc"],e["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},e["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},e["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},e["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},e["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},e["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},e["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},e["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},e["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"}},function(t,e,r){(function(e){function r(t,r){if(t.length%o!==0){var n=t.length+(o-t.length%o);t=e.concat([t,s],n)}for(var i=[],a=r?t.readInt32BE:t.readInt32LE,c=0;c<t.length;c+=o)i.push(a.call(t,c));return i}function n(t,r,n){for(var i=new e(r),o=n?i.writeInt32BE:i.writeInt32LE,s=0;s<t.length;s++)o.call(i,t[s],4*s,!0);return i}function i(t,i,o,s){e.isBuffer(t)||(t=new e(t));var c=i(r(t,s),t.length*a);return n(c,o,s)}var o=4,s=new e(o);s.fill(0);var a=8;t.exports={hash:i}}).call(e,r(41).Buffer)},function(t){function e(t){return t?r(t):void 0}function r(t){for(var r in e.prototype)t[r]=e.prototype[r];return t}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},e.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t){t.exports=function(t){function e(e,r){this._block=new t(e),this._finalSize=r,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,r){"string"==typeof e&&(r=r||"utf8",e=new t(e,r));for(var n=this._len+=e.length,i=this._s=this._s||0,o=0,s=this._block;n>i;){for(var a=Math.min(e.length,o+this._blockSize-i%this._blockSize),c=a-o,u=0;c>u;u++)s[i%this._blockSize+u]=e[u+o];i+=c,o+=c,i%this._blockSize===0&&this._update(s)}return this._s=i,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var r=this._update(this._block)||this._hash();return t?r.toString(t):r},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},function(t,e,r){var n=r(43).inherits;t.exports=function(t,e){function r(){return d.length?d.pop().init():this instanceof r?(this._w=p,e.call(this,64,56),this._h=null,void this.init()):new r}function i(t,e,r,n){return 20>t?e&r|~e&n:40>t?e^r^n:60>t?e&r|e&n|r&n:e^r^n}function o(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function s(t,e){return t+e|0}function a(t,e){return t<<e|t>>>32-e}var c=0,u=4,h=8,f=12,l=16,p=new("undefined"==typeof Int32Array?Array:Int32Array)(80),d=[];return n(r,e),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},r.prototype._POOL=d,r.prototype._update=function(t){var e,r,n,c,u,h,f,l,p,d;e=h=this._a,r=f=this._b,n=l=this._c,c=p=this._d,u=d=this._e;for(var _=this._w,v=0;80>v;v++){var y=_[v]=16>v?t.readInt32BE(4*v):a(_[v-3]^_[v-8]^_[v-14]^_[v-16],1),g=s(s(a(e,5),i(v,r,n,c)),s(s(u,y),o(v)));u=c,c=n,n=a(r,30),r=e,e=g
}this._a=s(e,h),this._b=s(r,f),this._c=s(n,l),this._d=s(c,p),this._e=s(u,d)},r.prototype._hash=function(){d.length<100&&d.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,c),e.writeInt32BE(0|this._b,u),e.writeInt32BE(0|this._c,h),e.writeInt32BE(0|this._d,f),e.writeInt32BE(0|this._e,l),e},r}},function(t,e,r){var n=r(43).inherits;t.exports=function(t,e){function r(){this.init(),this._w=p,e.call(this,64,56)}function i(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function s(t,e,r){return t&e^~t&r}function a(t,e,r){return t&e^t&r^e&r}function c(t){return i(t,2)^i(t,13)^i(t,22)}function u(t){return i(t,6)^i(t,11)^i(t,25)}function h(t){return i(t,7)^i(t,18)^o(t,3)}function f(t){return i(t,17)^i(t,19)^o(t,10)}var l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);return n(r,e),r.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},r.prototype._update=function(t){var e,r,n,i,o,p,d,_,v,y,g=this._w;e=0|this._a,r=0|this._b,n=0|this._c,i=0|this._d,o=0|this._e,p=0|this._f,d=0|this._g,_=0|this._h;for(var m=0;64>m;m++){var b=g[m]=16>m?t.readInt32BE(4*m):f(g[m-2])+g[m-7]+h(g[m-15])+g[m-16];v=_+u(o)+s(o,p,d)+l[m]+b,y=c(e)+a(e,r,n),_=d,d=p,p=o,o=i+v,i=n,n=r,r=e,e=v+y}this._a=e+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=p+this._f|0,this._g=d+this._g|0,this._h=_+this._h|0},r.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},r}},function(t,e,r){var n=r(43).inherits;t.exports=function(t,e){function r(){this.init(),this._w=c,e.call(this,128,112)}function i(t,e,r){return t>>>r|e<<32-r}function o(t,e,r){return t&e^~t&r}function s(t,e,r){return t&e^t&r^e&r}var a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],c=new Array(160);return n(r,e),r.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},r.prototype._update=function(t){var e,r,n,c,u,h,f,l,p,d,_,v,y,g,m,b,w=this._w;e=0|this._a,r=0|this._b,n=0|this._c,c=0|this._d,u=0|this._e,h=0|this._f,f=0|this._g,l=0|this._h,p=0|this._al,d=0|this._bl,_=0|this._cl,v=0|this._dl,y=0|this._el,g=0|this._fl,m=0|this._gl,b=0|this._hl;for(var E=0;80>E;E++){var x,S,A=2*E;if(16>E)x=w[A]=t.readInt32BE(4*A),S=w[A+1]=t.readInt32BE(4*A+4);else{var k=w[A-30],T=w[A-30+1],j=i(k,T,1)^i(k,T,8)^k>>>7,I=i(T,k,1)^i(T,k,8)^i(T,k,7);k=w[A-4],T=w[A-4+1];var R=i(k,T,19)^i(T,k,29)^k>>>6,C=i(T,k,19)^i(k,T,29)^i(T,k,6),O=w[A-14],B=w[A-14+1],L=w[A-32],N=w[A-32+1];S=I+B,x=j+O+(I>>>0>S>>>0?1:0),S+=C,x=x+R+(C>>>0>S>>>0?1:0),S+=N,x=x+L+(N>>>0>S>>>0?1:0),w[A]=x,w[A+1]=S}var D=s(e,r,n),q=s(p,d,_),M=i(e,p,28)^i(p,e,2)^i(p,e,7),F=i(p,e,28)^i(e,p,2)^i(e,p,7),P=i(u,y,14)^i(u,y,18)^i(y,u,9),U=i(y,u,14)^i(y,u,18)^i(u,y,9),z=a[A],H=a[A+1],G=o(u,h,f),X=o(y,g,m),K=b+U,V=l+P+(b>>>0>K>>>0?1:0);K+=X,V=V+G+(X>>>0>K>>>0?1:0),K+=H,V=V+z+(H>>>0>K>>>0?1:0),K+=S,V=V+x+(S>>>0>K>>>0?1:0);var Y=F+q,W=M+D+(F>>>0>Y>>>0?1:0);l=f,b=m,f=h,m=g,h=u,g=y,y=v+K|0,u=c+V+(v>>>0>y>>>0?1:0)|0,c=n,v=_,n=r,_=d,r=e,d=p,p=K+Y|0,e=V+W+(K>>>0>p>>>0?1:0)|0}this._al=this._al+p|0,this._bl=this._bl+d|0,this._cl=this._cl+_|0,this._dl=this._dl+v|0,this._el=this._el+y|0,this._fl=this._fl+g|0,this._gl=this._gl+m|0,this._hl=this._hl+b|0,this._a=this._a+e+(this._al>>>0<p>>>0?1:0)|0,this._b=this._b+r+(this._bl>>>0<d>>>0?1:0)|0,this._c=this._c+n+(this._cl>>>0<_>>>0?1:0)|0,this._d=this._d+c+(this._dl>>>0<v>>>0?1:0)|0,this._e=this._e+u+(this._el>>>0<y>>>0?1:0)|0,this._f=this._f+h+(this._fl>>>0<g>>>0?1:0)|0,this._g=this._g+f+(this._gl>>>0<m>>>0?1:0)|0,this._h=this._h+l+(this._hl>>>0<b>>>0?1:0)|0},r.prototype._hash=function(){function e(t,e,n){r.writeInt32BE(t,n),r.writeInt32BE(e,n+4)}var r=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),r},r}},function(t){t.exports=function(t,e,r){for(var n=0,i=t.length,o=3==arguments.length?r:t[n++];i>n;)o=e.call(null,o,t[n],++n,t);return o}},function(t){function e(){if(!o){o=!0;for(var t,e=i.length;e;){t=i,i=[];for(var r=-1;++r<e;)t[r]();e=i.length}o=!1}}function r(){}var n=t.exports={},i=[],o=!1;n.nextTick=function(t){i.push(t),o||setTimeout(e,0)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){(function(t){function r(t){var e,r;return e=t>a||0>t?(r=Math.abs(t)%a,0>t?a-r:r):t}function n(t){var e,r,n;for(e=r=0,n=t.length;n>=0?n>r:r>n;e=n>=0?++r:--r)t[e]=0;return!1}function i(){var t;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var e,r;for(r=[],t=e=0;4>e;t=++e)r.push([]);return r}(),this.INV_SUB_MIX=function(){var e,r;for(r=[],t=e=0;4>e;t=++e)r.push([]);return r}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(t){for(var e=t.length/4,r=new Array(e),n=-1;++n<e;)r[n]=t.readUInt32BE(4*n);return r}function s(t){this._key=o(t),this._doReset()}var a=Math.pow(2,32);i.prototype.init=function(){var t,e,r,n,i,o,s,a,c,u;for(t=function(){var t,r;for(r=[],e=t=0;256>t;e=++t)r.push(128>e?e<<1:e<<1^283);return r}(),i=0,c=0,e=u=0;256>u;e=++u)r=c^c<<1^c<<2^c<<3^c<<4,r=r>>>8^255&r^99,this.SBOX[i]=r,this.INV_SBOX[r]=i,o=t[i],s=t[o],a=t[s],n=257*t[r]^16843008*r,this.SUB_MIX[0][i]=n<<24|n>>>8,this.SUB_MIX[1][i]=n<<16|n>>>16,this.SUB_MIX[2][i]=n<<8|n>>>24,this.SUB_MIX[3][i]=n,n=16843009*a^65537*s^257*o^16843008*i,this.INV_SUB_MIX[0][r]=n<<24|n>>>8,this.INV_SUB_MIX[1][r]=n<<16|n>>>16,this.INV_SUB_MIX[2][r]=n<<8|n>>>24,this.INV_SUB_MIX[3][r]=n,0===i?i=c=1:(i=o^t[t[t[a^o]]],c^=t[t[c]]);return!0};var c=new i;s.blockSize=16,s.prototype.blockSize=s.blockSize,s.keySize=32,s.prototype.keySize=s.keySize,s.ivSize=s.blockSize,s.prototype.ivSize=s.ivSize,s.prototype._doReset=function(){var t,e,r,n,i,o,s,a;for(r=this._key,e=r.length,this._nRounds=e+6,i=4*(this._nRounds+1),this._keySchedule=[],n=s=0;i>=0?i>s:s>i;n=i>=0?++s:--s)this._keySchedule[n]=e>n?r[n]:(o=this._keySchedule[n-1],n%e===0?(o=o<<8|o>>>24,o=c.SBOX[o>>>24]<<24|c.SBOX[o>>>16&255]<<16|c.SBOX[o>>>8&255]<<8|c.SBOX[255&o],o^=c.RCON[n/e|0]<<24):e>6&&n%e===4?o=c.SBOX[o>>>24]<<24|c.SBOX[o>>>16&255]<<16|c.SBOX[o>>>8&255]<<8|c.SBOX[255&o]:void 0,this._keySchedule[n-e]^o);for(this._invKeySchedule=[],t=a=0;i>=0?i>a:a>i;t=i>=0?++a:--a)n=i-t,o=this._keySchedule[n-(t%4?0:4)],this._invKeySchedule[t]=4>t||4>=n?o:c.INV_SUB_MIX[0][c.SBOX[o>>>24]]^c.INV_SUB_MIX[1][c.SBOX[o>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[o>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&o]];return!0},s.prototype.encryptBlock=function(e){e=o(new t(e));var r=this._doCryptBlock(e,this._keySchedule,c.SUB_MIX,c.SBOX),n=new t(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[1],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[3],12),n},s.prototype.decryptBlock=function(e){e=o(new t(e));var r=[e[3],e[1]];e[1]=r[0],e[3]=r[1];var n=this._doCryptBlock(e,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX),i=new t(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[3],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[1],12),i},s.prototype.scrub=function(){n(this._keySchedule),n(this._invKeySchedule),n(this._key)},s.prototype._doCryptBlock=function(t,e,n,i){var o,s,a,c,u,h,f,l,p,d,_,v;for(a=t[0]^e[0],c=t[1]^e[1],u=t[2]^e[2],h=t[3]^e[3],o=4,s=_=1,v=this._nRounds;v>=1?v>_:_>v;s=v>=1?++_:--_)f=n[0][a>>>24]^n[1][c>>>16&255]^n[2][u>>>8&255]^n[3][255&h]^e[o++],l=n[0][c>>>24]^n[1][u>>>16&255]^n[2][h>>>8&255]^n[3][255&a]^e[o++],p=n[0][u>>>24]^n[1][h>>>16&255]^n[2][a>>>8&255]^n[3][255&c]^e[o++],d=n[0][h>>>24]^n[1][a>>>16&255]^n[2][c>>>8&255]^n[3][255&u]^e[o++],a=f,c=l,u=p,h=d;return f=(i[a>>>24]<<24|i[c>>>16&255]<<16|i[u>>>8&255]<<8|i[255&h])^e[o++],l=(i[c>>>24]<<24|i[u>>>16&255]<<16|i[h>>>8&255]<<8|i[255&a])^e[o++],p=(i[u>>>24]<<24|i[h>>>16&255]<<16|i[a>>>8&255]<<8|i[255&c])^e[o++],d=(i[h>>>24]<<24|i[a>>>16&255]<<16|i[c>>>8&255]<<8|i[255&u])^e[o++],[r(f),r(l),r(p),r(d)]},e.AES=s}).call(e,r(41).Buffer)},function(t,e,r){(function(e){function n(){i.call(this)}var i=r(101).Transform,o=r(99);t.exports=n,o(n,i),n.prototype.update=function(t,r,n){this.write(t,r);for(var i,o=new e("");i=this.read();)o=e.concat([o,i]);return n&&(o=o.toString(n)),o},n.prototype["final"]=function(t){this.end();for(var r,n=new e("");r=this.read();)n=e.concat([n,r]);return t&&(n=n.toString(t)),n}}).call(e,r(41).Buffer)},function(t,e,r){(function(e){function n(t,r,s,a){return this instanceof n?(o.call(this),this._cipher=new i.AES(r),this._prev=new e(s.length),this._cache=new e(""),this._secCache=new e(""),this._decrypt=a,s.copy(this._prev),void(this._mode=t)):new n(t,r,s)}var i=r(90),o=r(91),s=r(99);s(n,o),t.exports=n,n.prototype._transform=function(t,e,r){r(null,this._mode.encrypt(this,t,this._decrypt))},n.prototype._flush=function(t){this._cipher.scrub(),t()}}).call(e,r(41).Buffer)},function(t,e,r){(function(e){t.exports=function(t,r,n,i){n/=8,i=i||0;for(var o,s,a,c=0,u=0,h=new e(n),f=new e(i),l=0;;){if(o=t.createHash("md5"),l++>0&&o.update(s),o.update(r),s=o.digest(),a=0,n>0)for(;;){if(0===n)break;if(a===s.length)break;h[c++]=s[a],n--,a++}if(i>0&&a!==s.length)for(;;){if(0===i)break;if(a===s.length)break;f[u++]=s[a],i--,a++}if(0===n&&0===i)break}for(a=0;a<s.length;a++)s[a]=0;return{key:h,iv:f}}}).call(e,r(41).Buffer)},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,r){var n=r(100);e.encrypt=function(t,e){var r=n(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},e.decrypt=function(t,e){var r=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return n(i,r)}},function(t,e,r){(function(t){function n(e,r,n){var o=r.length,s=i(r,e._cache);return e._cache=e._cache.slice(o),e._prev=t.concat([e._prev,n?r:s]),s}var i=r(100);e.encrypt=function(e,r,i){for(var o,s=new t("");r.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=new t("")),!(e._cache.length<=r.length)){s=t.concat([s,n(e,r,i)]);break}o=e._cache.length,s=t.concat([s,n(e,r.slice(0,o),i)]),r=r.slice(o)}return s}}).call(e,r(41).Buffer)},function(t,e,r){(function(t){function n(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}var i=r(100);e.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,n(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),i(r,o)}}).call(e,r(41).Buffer)},function(t,e,r){(function(t){function n(t){var e=t._cipher.encryptBlock(t._prev);return i(t._prev),e}function i(t){for(var e,r=t.length;r--;){if(e=t.readUInt8(r),255!==e){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}var o=r(100);e.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,n(e)]);var i=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),o(r,i)}}).call(e,r(41).Buffer)},function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){(function(e){function r(t,r){for(var n=Math.min(t.length,r.length),i=new e(n),o=-1;++o<n;)i.writeUInt8(t[o]^r[o],o);return i}t.exports=r}).call(e,r(41).Buffer)},function(t,e,r){function n(){i.call(this)}t.exports=n;var i=r(39).EventEmitter,o=r(107);o(n,i),n.Readable=r(102),n.Writable=r(103),n.Duplex=r(104),n.Transform=r(105),n.PassThrough=r(106),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&u.pause&&u.pause()}function n(){u.readable&&u.resume&&u.resume()}function o(){h||(h=!0,t.end())}function s(){h||(h=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(c(),0===i.listenerCount(this,"error"))throw t}function c(){u.removeListener("data",r),t.removeListener("drain",n),u.removeListener("end",o),u.removeListener("close",s),u.removeListener("error",a),t.removeListener("error",a),u.removeListener("end",c),u.removeListener("close",c),t.removeListener("close",c)}var u=this;u.on("data",r),t.on("drain",n),t._isStdio||e&&e.end===!1||(u.on("end",o),u.on("close",s));var h=!1;return u.on("error",a),t.on("error",a),u.on("end",c),u.on("close",c),t.on("close",c),t.emit("pipe",u),t}},function(t,e,r){e=t.exports=r(109),e.Stream=r(101),e.Readable=e,e.Writable=r(110),e.Duplex=r(108),e.Transform=r(111),e.PassThrough=r(112)},function(t,e,r){t.exports=r(110)},function(t,e,r){t.exports=r(108)},function(t,e,r){t.exports=r(111)},function(t,e,r){t.exports=r(112)},function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){(function(e){function n(t){return this instanceof n?(c.call(this,t),u.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(t)}function i(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function o(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}t.exports=n;var s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},a=r(117);a.inherits=r(116);var c=r(109),u=r(110);a.inherits(n,c),o(s(u.prototype),function(t){n.prototype[t]||(n.prototype[t]=u.prototype[t])})}).call(e,r(63))},function(t,e,r){(function(e){function n(t,e){var n=r(108);t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(j||(j=r(114).StringDecoder),this.decoder=new j(t.encoding),this.encoding=t.encoding)}function i(t){r(108);return this instanceof i?(this._readableState=new n(t,this),this.readable=!0,void k.call(this)):new i(t)}function o(t,e,r,n,i){var o=u(e,r);if(o)t.emit("error",o);else if(T.isNullOrUndefined(r))e.reading=!1,e.ended||h(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||n||(r=e.decoder.write(r)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&f(t)),p(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=R)t=R;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||T.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function u(t,e){var r=null;return T.isBuffer(e)||T.isString(e)||T.isNullOrUndefined(e)||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function h(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,f(t)}function f(t){var r=t._readableState;r.needReadable=!1,r.emittedReadable||(I("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?e.nextTick(function(){l(t)}):l(t))}function l(t){I("emit readable"),t.emit("readable"),g(t)}function p(t,r){r.readingMore||(r.readingMore=!0,e.nextTick(function(){d(t,r)}))}function d(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(I("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function _(t){return function(){var e=t._readableState;I("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&A.listenerCount(t,"data")&&(e.flowing=!0,g(t))}}function v(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(function(){y(t,r)}))}function y(t,e){e.resumeScheduled=!1,t.emit("resume"),g(t),e.flowing&&!e.reading&&t.read(0)}function g(t){var e=t._readableState;if(I("flow",e.flowing),e.flowing)do var r=t.read();while(null!==r&&e.flowing)}function m(t,e){var r,n=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!t||t>=i)r=o?n.join(""):S.concat(n,i),n.length=0;else if(t<n[0].length){var a=n[0];r=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)r=n.shift();else{r=o?"":new S(t);for(var c=0,u=0,h=n.length;h>u&&t>c;u++){var a=n[0],f=Math.min(t-c,a.length);o?r+=a.slice(0,f):a.copy(r,c,0,f),f<a.length?n[0]=a.slice(f):n.shift(),c+=f}}return r}function b(t){var r=t._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");r.endEmitted||(r.ended=!0,e.nextTick(function(){r.endEmitted||0!==r.length||(r.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}function E(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1}t.exports=i;var x=r(115),S=r(41).Buffer;i.ReadableState=n;var A=r(39).EventEmitter;A.listenerCount||(A.listenerCount=function(t,e){return t.listeners(e).length});var k=r(101),T=r(117);T.inherits=r(116);var j,I=r(113);I=I&&I.debuglog?I.debuglog("stream"):function(){},T.inherits(i,k),i.prototype.push=function(t,e){var r=this._readableState;return T.isString(t)&&!r.objectMode&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=new S(t,e),e="")),o(this,r,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(t){return j||(j=r(114).StringDecoder),this._readableState.decoder=new j(t),this._readableState.encoding=t,this};var R=8388608;i.prototype.read=function(t){I("read",t);var e=this._readableState,r=t;if((!T.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return I("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?b(this):f(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&b(this),null;var n=e.needReadable;I("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,I("length less than watermark",n)),(e.ended||e.reading)&&(n=!1,I("reading or ended",n)),n&&(I("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(t=c(r,e));var i;return i=t>0?m(t,e):null,T.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),r!==t&&e.ended&&0===e.length&&b(this),T.isNull(i)||this.emit("data",i),i},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,r){function n(t){I("onunpipe"),t===f&&o()}function i(){I("onend"),t.end()}function o(){I("cleanup"),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("drain",v),t.removeListener("error",a),t.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",s),!l.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function s(e){I("ondata");var r=t.write(e);!1===r&&(I("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function a(e){I("onerror",e),h(),t.removeListener("error",a),0===A.listenerCount(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",u),h()}function u(){I("onfinish"),t.removeListener("close",c),h()}function h(){I("unpipe"),f.unpipe(t)}var f=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=t;break;case 1:l.pipes=[l.pipes,t];break;default:l.pipes.push(t)}l.pipesCount+=1,I("pipe count=%d opts=%j",l.pipesCount,r);var p=(!r||r.end!==!1)&&t!==e.stdout&&t!==e.stderr,d=p?i:o;l.endEmitted?e.nextTick(d):f.once("end",d),t.on("unpipe",n);var v=_(f);return t.on("drain",v),f.on("data",s),t._events&&t._events.error?x(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",c),t.once("finish",u),t.emit("pipe",f),l.flowing||(I("pipe resume"),f.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=E(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,r){var n=k.prototype.on.call(this,t,r);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&f(this,i);else{var o=this;e.nextTick(function(){I("readable nexttick read 0"),o.read(0)})}}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(I("resume"),t.flowing=!0,t.reading||(I("resume read 0"),this.read(0)),v(this,t)),this},i.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(I("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){if(I("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=n.push(i);o||(r=!0,t.pause())}});for(var i in t)T.isFunction(t[i])&&T.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){I("wrapped _read",e),r&&(r=!1,t.resume())},n},i._fromList=m}).call(e,r(63))},function(t,e,r){(function(e){function n(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function i(t,e){var n=r(108);t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,e instanceof n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var e=r(108);return this instanceof o||this instanceof e?(this._writableState=new i(t,this),this.writable=!0,void x.call(this)):new o(t)}function s(t,r,n){var i=new Error("write after end");t.emit("error",i),e.nextTick(function(){n(i)})}function a(t,r,n,i){var o=!0;if(!(E.isBuffer(n)||E.isString(n)||E.isNullOrUndefined(n)||r.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),e.nextTick(function(){i(s)}),o=!1}return o}function c(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&E.isString(e)&&(e=new w(e,r)),e}function u(t,e,r,i,o){r=c(e,r,i),E.isBuffer(r)&&(i="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new n(r,i,o)):h(t,e,!1,s,r,i,o),a}function h(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function f(t,r,n,i,o){n?e.nextTick(function(){r.pendingcb--,o(i)}):(r.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function l(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,r){var n=t._writableState,i=n.sync,o=n.writecb;if(l(n),r)f(t,n,i,r,o);else{var s=y(t,n);s||n.corked||n.bufferProcessing||!n.buffer.length||v(t,n),i?e.nextTick(function(){d(t,n,s,o)}):d(t,n,s,o)}}function d(t,e,r,n){r||_(t,e),e.pendingcb--,n(),m(t,e)}function _(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var r=[],n=0;n<e.buffer.length;n++)r.push(e.buffer[n].callback);e.pendingcb++,h(t,e,!0,e.length,e.buffer,"",function(t){for(var n=0;n<r.length;n++)e.pendingcb--,r[n](t)}),e.buffer=[]}else{for(var n=0;n<e.buffer.length;n++){var i=e.buffer[n],o=i.chunk,s=i.encoding,a=i.callback,c=e.objectMode?1:o.length;if(h(t,e,!1,c,o,s,a),e.writing){n++;break}}n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}e.bufferProcessing=!1}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function g(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function m(t,e){var r=y(t,e);return r&&(0===e.pendingcb?(g(t,e),e.finished=!0,t.emit("finish")):g(t,e)),r}function b(t,r,n){r.ending=!0,m(t,r),n&&(r.finished?e.nextTick(n):t.once("finish",n)),r.ended=!0}t.exports=o;var w=r(41).Buffer;o.WritableState=i;var E=r(117);E.inherits=r(116);var x=r(101);E.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return E.isFunction(e)&&(r=e,e=null),E.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),E.isFunction(r)||(r=function(){}),n.ended?s(this,n,r):a(this,n,t,r)&&(n.pendingcb++,i=u(this,n,t,e,r)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||v(this,t))},o.prototype._write=function(t,e,r){r(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,r){var n=this._writableState;E.isFunction(t)?(r=t,t=null,e=null):E.isFunction(e)&&(r=e,e=null),E.isNullOrUndefined(t)||this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||b(this,n,r)}}).call(e,r(63))},function(t,e,r){function n(t,e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,c.isNullOrUndefined(r)||t.push(r),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new n(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){c.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=r(108),c=r(117);c.inherits=r(116),c.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(){throw new Error("not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(){var t=this._transformState;c.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(t,e,r){function n(t){return this instanceof n?void i.call(this,t):new n(t)}t.exports=n;var i=r(111),o=r(117);o.inherits=r(116),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},function(){},function(t,e,r){function n(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=r(41).Buffer,c=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;
default:return!1}},u=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},u.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(2>=e&&r>>4==14){this.charLength=3;break}if(3>=e&&r>>3==30){this.charLength=4;break}}this.charReceived=e},u.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},function(t){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){(function(t){function r(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function u(t){return void 0===t}function h(t){return f(t)&&"[object RegExp]"===y(t)}function f(t){return"object"==typeof t&&null!==t}function l(t){return f(t)&&"[object Date]"===y(t)}function p(t){return f(t)&&("[object Error]"===y(t)||t instanceof Error)}function d(t){return"function"==typeof t}function _(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(e){return t.isBuffer(e)}function y(t){return Object.prototype.toString.call(t)}e.isArray=r,e.isBoolean=n,e.isNull=i,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=c,e.isUndefined=u,e.isRegExp=h,e.isObject=f,e.isDate=l,e.isError=p,e.isFunction=d,e.isPrimitive=_,e.isBuffer=v}).call(e,r(41).Buffer)}]);